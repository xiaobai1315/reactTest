{"version":3,"sources":["../../../../jspm_packages/npm/history@4.7.2/LocationUtils.js"],"names":["exports","__esModule","locationsAreEqual","createLocation","undefined","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_resolvePathname","require","_resolvePathname2","_interopRequireDefault","_valueEqual","_valueEqual2","_PathUtils","obj","default","path","state","currentLocation","location","parsePath","pathname","search","charAt","hash","decodeURI","e","URIError","a","b"],"mappings":"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","file":"LocationUtils.js","sourcesContent":["/* */ \n'use strict';\nexports.__esModule = true;\nexports.locationsAreEqual = exports.createLocation = undefined;\nvar _extends = Object.assign || function(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n  return target;\n};\nvar _resolvePathname = require('resolve-pathname');\nvar _resolvePathname2 = _interopRequireDefault(_resolvePathname);\nvar _valueEqual = require('value-equal');\nvar _valueEqual2 = _interopRequireDefault(_valueEqual);\nvar _PathUtils = require('./PathUtils');\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {default: obj};\n}\nvar createLocation = exports.createLocation = function createLocation(path, state, key, currentLocation) {\n  var location = void 0;\n  if (typeof path === 'string') {\n    location = (0, _PathUtils.parsePath)(path);\n    location.state = state;\n  } else {\n    location = _extends({}, path);\n    if (location.pathname === undefined)\n      location.pathname = '';\n    if (location.search) {\n      if (location.search.charAt(0) !== '?')\n        location.search = '?' + location.search;\n    } else {\n      location.search = '';\n    }\n    if (location.hash) {\n      if (location.hash.charAt(0) !== '#')\n        location.hash = '#' + location.hash;\n    } else {\n      location.hash = '';\n    }\n    if (state !== undefined && location.state === undefined)\n      location.state = state;\n  }\n  try {\n    location.pathname = decodeURI(location.pathname);\n  } catch (e) {\n    if (e instanceof URIError) {\n      throw new URIError('Pathname \"' + location.pathname + '\" could not be decoded. ' + 'This is likely caused by an invalid percent-encoding.');\n    } else {\n      throw e;\n    }\n  }\n  if (key)\n    location.key = key;\n  if (currentLocation) {\n    if (!location.pathname) {\n      location.pathname = currentLocation.pathname;\n    } else if (location.pathname.charAt(0) !== '/') {\n      location.pathname = (0, _resolvePathname2.default)(location.pathname, currentLocation.pathname);\n    }\n  } else {\n    if (!location.pathname) {\n      location.pathname = '/';\n    }\n  }\n  return location;\n};\nvar locationsAreEqual = exports.locationsAreEqual = function locationsAreEqual(a, b) {\n  return a.pathname === b.pathname && a.search === b.search && a.hash === b.hash && a.key === b.key && (0, _valueEqual2.default)(a.state, b.state);\n};\n"]}