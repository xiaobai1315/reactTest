{"version":3,"sources":["../../../../../jspm_packages/npm/history@4.7.2/es/LocationUtils.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","createLocation","path","state","currentLocation","location","pathname","undefined","search","charAt","hash","decodeURI","e","URIError","locationsAreEqual","a","b"],"mappings":"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","file":"LocationUtils.js","sourcesContent":["/* */ \n\"format cjs\";\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nimport resolvePathname from 'resolve-pathname';\nimport valueEqual from 'value-equal';\nimport { parsePath } from './PathUtils';\n\nexport var createLocation = function createLocation(path, state, key, currentLocation) {\n  var location = void 0;\n  if (typeof path === 'string') {\n    // Two-arg form: push(path, state)\n    location = parsePath(path);\n    location.state = state;\n  } else {\n    // One-arg form: push(location)\n    location = _extends({}, path);\n\n    if (location.pathname === undefined) location.pathname = '';\n\n    if (location.search) {\n      if (location.search.charAt(0) !== '?') location.search = '?' + location.search;\n    } else {\n      location.search = '';\n    }\n\n    if (location.hash) {\n      if (location.hash.charAt(0) !== '#') location.hash = '#' + location.hash;\n    } else {\n      location.hash = '';\n    }\n\n    if (state !== undefined && location.state === undefined) location.state = state;\n  }\n\n  try {\n    location.pathname = decodeURI(location.pathname);\n  } catch (e) {\n    if (e instanceof URIError) {\n      throw new URIError('Pathname \"' + location.pathname + '\" could not be decoded. ' + 'This is likely caused by an invalid percent-encoding.');\n    } else {\n      throw e;\n    }\n  }\n\n  if (key) location.key = key;\n\n  if (currentLocation) {\n    // Resolve incomplete/relative pathname relative to current location.\n    if (!location.pathname) {\n      location.pathname = currentLocation.pathname;\n    } else if (location.pathname.charAt(0) !== '/') {\n      location.pathname = resolvePathname(location.pathname, currentLocation.pathname);\n    }\n  } else {\n    // When there is no prior location and pathname is empty, set it to /\n    if (!location.pathname) {\n      location.pathname = '/';\n    }\n  }\n\n  return location;\n};\n\nexport var locationsAreEqual = function locationsAreEqual(a, b) {\n  return a.pathname === b.pathname && a.search === b.search && a.hash === b.hash && a.key === b.key && valueEqual(a.state, b.state);\n};"]}