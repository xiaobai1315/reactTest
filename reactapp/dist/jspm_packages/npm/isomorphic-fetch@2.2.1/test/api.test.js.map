{"version":3,"sources":["../../../../../jspm_packages/npm/isomorphic-fetch@2.2.1/test/api.test.js"],"names":["require","polyfill","expect","nock","good","bad","responseToText","response","status","Error","text","describe","before","get","reply","it","fetch","to","be","a","done","then","data","equal","catch","err","toString"],"mappings":"AAAA;AACA;;AACAA,QAAQ,aAAR,EAAuBC,QAAvB;AACAD,QAAQ,mBAAR;AACA,IAAIE,SAASF,QAAQ,MAAR,EAAgBE,MAA7B;AACA,IAAIC,OAAOH,QAAQ,MAAR,CAAX;AACA,IAAII,OAAO,oBAAX;AACA,IAAIC,MAAM,gCAAV;AACA,SAASC,cAAT,CAAwBC,QAAxB,EAAkC;AAChC,MAAIA,SAASC,MAAT,IAAmB,GAAvB,EACE,MAAM,IAAIC,KAAJ,CAAU,qBAAV,CAAN;AACF,SAAOF,SAASG,IAAT,EAAP;AACD;AACDC,SAAS,OAAT,EAAkB,YAAW;AAC3BC,SAAO,YAAW;AAChBT,SAAK,sBAAL,EAA6BU,GAA7B,CAAiC,cAAjC,EAAiDC,KAAjD,CAAuD,GAAvD,EAA4DV,IAA5D;AACAD,SAAK,sBAAL,EAA6BU,GAA7B,CAAiC,WAAjC,EAA8CC,KAA9C,CAAoD,GAApD,EAAyDT,GAAzD;AACD,GAHD;AAIAU,KAAG,mBAAH,EAAwB,YAAW;AACjCb,WAAOc,KAAP,EAAcC,EAAd,CAAiBC,EAAjB,CAAoBC,CAApB,CAAsB,UAAtB;AACD,GAFD;AAGAJ,KAAG,0CAAH,EAA+C,UAASK,IAAT,EAAe;AAC5DJ,UAAM,4BAAN,EAAoCK,IAApC,CAAyCf,cAAzC,EAAyDe,IAAzD,CAA8D,UAASC,IAAT,EAAe;AAC3EpB,aAAOoB,IAAP,EAAaL,EAAb,CAAgBM,KAAhB,CAAsBnB,IAAtB;AACAgB;AACD,KAHD,EAGGI,KAHH,CAGSJ,IAHT;AAID,GALD;AAMAL,KAAG,6CAAH,EAAkD,UAASK,IAAT,EAAe;AAC/DJ,UAAM,yBAAN,EAAiCK,IAAjC,CAAsCf,cAAtC,EAAsDkB,KAAtD,CAA4D,UAASC,GAAT,EAAc;AACxEvB,aAAOuB,IAAIC,QAAJ,EAAP,EAAuBT,EAAvB,CAA0BM,KAA1B,CAAgC,4BAAhC;AACAH;AACD,KAHD,EAGGI,KAHH,CAGSJ,IAHT;AAID,GALD;AAMD,CApBD","file":"api.test.js","sourcesContent":["/* */ \n\"use strict\";\nrequire('es6-promise').polyfill();\nrequire('../fetch-npm-node');\nvar expect = require('chai').expect;\nvar nock = require('nock');\nvar good = 'hello world. 你好世界。';\nvar bad = 'good bye cruel world. 再见残酷的世界。';\nfunction responseToText(response) {\n  if (response.status >= 400)\n    throw new Error(\"Bad server response\");\n  return response.text();\n}\ndescribe('fetch', function() {\n  before(function() {\n    nock('https://mattandre.ws').get('/succeed.txt').reply(200, good);\n    nock('https://mattandre.ws').get('/fail.txt').reply(404, bad);\n  });\n  it('should be defined', function() {\n    expect(fetch).to.be.a('function');\n  });\n  it('should facilitate the making of requests', function(done) {\n    fetch('//mattandre.ws/succeed.txt').then(responseToText).then(function(data) {\n      expect(data).to.equal(good);\n      done();\n    }).catch(done);\n  });\n  it('should do the right thing with bad requests', function(done) {\n    fetch('//mattandre.ws/fail.txt').then(responseToText).catch(function(err) {\n      expect(err.toString()).to.equal(\"Error: Bad server response\");\n      done();\n    }).catch(done);\n  });\n});\n"]}