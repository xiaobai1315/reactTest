{"version":3,"sources":["../../../../jspm_packages/npm/setimmediate@1.0.5/setImmediate.js"],"names":["process","global","undefined","setImmediate","nextHandle","tasksByHandle","currentlyRunningATask","doc","document","registerImmediate","callback","Function","args","Array","arguments","length","i","task","clearImmediate","handle","run","apply","runIfPresent","setTimeout","installNextTickImplementation","nextTick","canUsePostMessage","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","installPostMessageImplementation","messagePrefix","Math","random","onGlobalMessage","event","source","data","indexOf","slice","addEventListener","attachEvent","installMessageChannelImplementation","channel","MessageChannel","port1","port2","installReadyStateChangeImplementation","html","documentElement","script","createElement","onreadystatechange","removeChild","appendChild","installSetTimeoutImplementation","attachTo","Object","getPrototypeOf","toString","call","self","require"],"mappings":"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","file":"setImmediate.js","sourcesContent":["/* */ \n(function(process) {\n  (function(global, undefined) {\n    \"use strict\";\n    if (global.setImmediate) {\n      return;\n    }\n    var nextHandle = 1;\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n    function setImmediate(callback) {\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n        args[i] = arguments[i + 1];\n      }\n      var task = {\n        callback: callback,\n        args: args\n      };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n    function clearImmediate(handle) {\n      delete tasksByHandle[handle];\n    }\n    function run(task) {\n      var callback = task.callback;\n      var args = task.args;\n      switch (args.length) {\n        case 0:\n          callback();\n          break;\n        case 1:\n          callback(args[0]);\n          break;\n        case 2:\n          callback(args[0], args[1]);\n          break;\n        case 3:\n          callback(args[0], args[1], args[2]);\n          break;\n        default:\n          callback.apply(undefined, args);\n          break;\n      }\n    }\n    function runIfPresent(handle) {\n      if (currentlyRunningATask) {\n        setTimeout(runIfPresent, 0, handle);\n      } else {\n        var task = tasksByHandle[handle];\n        if (task) {\n          currentlyRunningATask = true;\n          try {\n            run(task);\n          } finally {\n            clearImmediate(handle);\n            currentlyRunningATask = false;\n          }\n        }\n      }\n    }\n    function installNextTickImplementation() {\n      registerImmediate = function(handle) {\n        process.nextTick(function() {\n          runIfPresent(handle);\n        });\n      };\n    }\n    function canUsePostMessage() {\n      if (global.postMessage && !global.importScripts) {\n        var postMessageIsAsynchronous = true;\n        var oldOnMessage = global.onmessage;\n        global.onmessage = function() {\n          postMessageIsAsynchronous = false;\n        };\n        global.postMessage(\"\", \"*\");\n        global.onmessage = oldOnMessage;\n        return postMessageIsAsynchronous;\n      }\n    }\n    function installPostMessageImplementation() {\n      var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n      var onGlobalMessage = function(event) {\n        if (event.source === global && typeof event.data === \"string\" && event.data.indexOf(messagePrefix) === 0) {\n          runIfPresent(+event.data.slice(messagePrefix.length));\n        }\n      };\n      if (global.addEventListener) {\n        global.addEventListener(\"message\", onGlobalMessage, false);\n      } else {\n        global.attachEvent(\"onmessage\", onGlobalMessage);\n      }\n      registerImmediate = function(handle) {\n        global.postMessage(messagePrefix + handle, \"*\");\n      };\n    }\n    function installMessageChannelImplementation() {\n      var channel = new MessageChannel();\n      channel.port1.onmessage = function(event) {\n        var handle = event.data;\n        runIfPresent(handle);\n      };\n      registerImmediate = function(handle) {\n        channel.port2.postMessage(handle);\n      };\n    }\n    function installReadyStateChangeImplementation() {\n      var html = doc.documentElement;\n      registerImmediate = function(handle) {\n        var script = doc.createElement(\"script\");\n        script.onreadystatechange = function() {\n          runIfPresent(handle);\n          script.onreadystatechange = null;\n          html.removeChild(script);\n          script = null;\n        };\n        html.appendChild(script);\n      };\n    }\n    function installSetTimeoutImplementation() {\n      registerImmediate = function(handle) {\n        setTimeout(runIfPresent, 0, handle);\n      };\n    }\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n    if ({}.toString.call(global.process) === \"[object process]\") {\n      installNextTickImplementation();\n    } else if (canUsePostMessage()) {\n      installPostMessageImplementation();\n    } else if (global.MessageChannel) {\n      installMessageChannelImplementation();\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n      installReadyStateChangeImplementation();\n    } else {\n      installSetTimeoutImplementation();\n    }\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n  }(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n})(require('process'));\n"]}