{"version":3,"sources":["../../../../../jspm_packages/npm/iconv-lite@0.4.19/encodings/internal.js"],"names":["Buffer","require","module","exports","utf8","type","bomAware","cesu8","unicode11utf8","ucs2","utf16le","binary","base64","hex","_internal","InternalCodec","codecOptions","iconv","enc","encodingName","encoder","InternalEncoderBase64","InternalEncoderCesu8","toString","decoder","InternalDecoderCesu8","defaultCharUnicode","prototype","InternalEncoder","InternalDecoder","StringDecoder","end","options","codec","call","write","str","prevStr","completeQuads","length","slice","buf","bufIdx","i","charCode","charCodeAt","acc","contBytes","accBytes","res","curByte","String","fromCharCode"],"mappings":"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","file":"internal.js","sourcesContent":["/* */ \n(function(Buffer) {\n  \"use strict\";\n  var Buffer = require('buffer').Buffer;\n  module.exports = {\n    utf8: {\n      type: \"_internal\",\n      bomAware: true\n    },\n    cesu8: {\n      type: \"_internal\",\n      bomAware: true\n    },\n    unicode11utf8: \"utf8\",\n    ucs2: {\n      type: \"_internal\",\n      bomAware: true\n    },\n    utf16le: \"ucs2\",\n    binary: {type: \"_internal\"},\n    base64: {type: \"_internal\"},\n    hex: {type: \"_internal\"},\n    _internal: InternalCodec\n  };\n  function InternalCodec(codecOptions, iconv) {\n    this.enc = codecOptions.encodingName;\n    this.bomAware = codecOptions.bomAware;\n    if (this.enc === \"base64\")\n      this.encoder = InternalEncoderBase64;\n    else if (this.enc === \"cesu8\") {\n      this.enc = \"utf8\";\n      this.encoder = InternalEncoderCesu8;\n      if (new Buffer('eda0bdedb2a9', 'hex').toString() !== 'ðŸ’©') {\n        this.decoder = InternalDecoderCesu8;\n        this.defaultCharUnicode = iconv.defaultCharUnicode;\n      }\n    }\n  }\n  InternalCodec.prototype.encoder = InternalEncoder;\n  InternalCodec.prototype.decoder = InternalDecoder;\n  var StringDecoder = require('string_decoder').StringDecoder;\n  if (!StringDecoder.prototype.end)\n    StringDecoder.prototype.end = function() {};\n  function InternalDecoder(options, codec) {\n    StringDecoder.call(this, codec.enc);\n  }\n  InternalDecoder.prototype = StringDecoder.prototype;\n  function InternalEncoder(options, codec) {\n    this.enc = codec.enc;\n  }\n  InternalEncoder.prototype.write = function(str) {\n    return new Buffer(str, this.enc);\n  };\n  InternalEncoder.prototype.end = function() {};\n  function InternalEncoderBase64(options, codec) {\n    this.prevStr = '';\n  }\n  InternalEncoderBase64.prototype.write = function(str) {\n    str = this.prevStr + str;\n    var completeQuads = str.length - (str.length % 4);\n    this.prevStr = str.slice(completeQuads);\n    str = str.slice(0, completeQuads);\n    return new Buffer(str, \"base64\");\n  };\n  InternalEncoderBase64.prototype.end = function() {\n    return new Buffer(this.prevStr, \"base64\");\n  };\n  function InternalEncoderCesu8(options, codec) {}\n  InternalEncoderCesu8.prototype.write = function(str) {\n    var buf = new Buffer(str.length * 3),\n        bufIdx = 0;\n    for (var i = 0; i < str.length; i++) {\n      var charCode = str.charCodeAt(i);\n      if (charCode < 0x80)\n        buf[bufIdx++] = charCode;\n      else if (charCode < 0x800) {\n        buf[bufIdx++] = 0xC0 + (charCode >>> 6);\n        buf[bufIdx++] = 0x80 + (charCode & 0x3f);\n      } else {\n        buf[bufIdx++] = 0xE0 + (charCode >>> 12);\n        buf[bufIdx++] = 0x80 + ((charCode >>> 6) & 0x3f);\n        buf[bufIdx++] = 0x80 + (charCode & 0x3f);\n      }\n    }\n    return buf.slice(0, bufIdx);\n  };\n  InternalEncoderCesu8.prototype.end = function() {};\n  function InternalDecoderCesu8(options, codec) {\n    this.acc = 0;\n    this.contBytes = 0;\n    this.accBytes = 0;\n    this.defaultCharUnicode = codec.defaultCharUnicode;\n  }\n  InternalDecoderCesu8.prototype.write = function(buf) {\n    var acc = this.acc,\n        contBytes = this.contBytes,\n        accBytes = this.accBytes,\n        res = '';\n    for (var i = 0; i < buf.length; i++) {\n      var curByte = buf[i];\n      if ((curByte & 0xC0) !== 0x80) {\n        if (contBytes > 0) {\n          res += this.defaultCharUnicode;\n          contBytes = 0;\n        }\n        if (curByte < 0x80) {\n          res += String.fromCharCode(curByte);\n        } else if (curByte < 0xE0) {\n          acc = curByte & 0x1F;\n          contBytes = 1;\n          accBytes = 1;\n        } else if (curByte < 0xF0) {\n          acc = curByte & 0x0F;\n          contBytes = 2;\n          accBytes = 1;\n        } else {\n          res += this.defaultCharUnicode;\n        }\n      } else {\n        if (contBytes > 0) {\n          acc = (acc << 6) | (curByte & 0x3f);\n          contBytes--;\n          accBytes++;\n          if (contBytes === 0) {\n            if (accBytes === 2 && acc < 0x80 && acc > 0)\n              res += this.defaultCharUnicode;\n            else if (accBytes === 3 && acc < 0x800)\n              res += this.defaultCharUnicode;\n            else\n              res += String.fromCharCode(acc);\n          }\n        } else {\n          res += this.defaultCharUnicode;\n        }\n      }\n    }\n    this.acc = acc;\n    this.contBytes = contBytes;\n    this.accBytes = accBytes;\n    return res;\n  };\n  InternalDecoderCesu8.prototype.end = function() {\n    var res = 0;\n    if (this.contBytes > 0)\n      res += this.defaultCharUnicode;\n    return res;\n  };\n})(require('buffer').Buffer);\n"]}