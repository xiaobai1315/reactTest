{"version":3,"sources":["../../../../../jspm_packages/npm/iconv-lite@0.4.19/lib/extend-node.js"],"names":["Buffer","require","module","exports","iconv","original","undefined","supportsNodeEncodingsExtension","Uint8Array","extendNodeEncodings","console","error","nodeNativeEncodings","isNativeEncoding","enc","toLowerCase","SlowBuffer","SlowBufferToString","prototype","toString","encoding","start","end","String","call","length","decode","slice","SlowBufferWrite","write","string","offset","isFinite","swap","remaining","RangeError","buf","encode","copy","BufferIsEncoding","isEncoding","encodingExists","BufferByteLength","byteLength","str","BufferToString","BufferWrite","_offset","_length","_encoding","supportsStreams","Readable","ReadableSetEncoding","setEncoding","options","_readableState","decoder","getDecoder","collect","_collect","undoExtendNodeEncodings","Error"],"mappings":"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","file":"extend-node.js","sourcesContent":["/* */ \n(function(Buffer) {\n  \"use strict\";\n  var Buffer = require('buffer').Buffer;\n  module.exports = function(iconv) {\n    var original = undefined;\n    iconv.supportsNodeEncodingsExtension = !(new Buffer(0) instanceof Uint8Array);\n    iconv.extendNodeEncodings = function extendNodeEncodings() {\n      if (original)\n        return;\n      original = {};\n      if (!iconv.supportsNodeEncodingsExtension) {\n        console.error(\"ACTION NEEDED: require('iconv-lite').extendNodeEncodings() is not supported in your version of Node\");\n        console.error(\"See more info at https://github.com/ashtuchkin/iconv-lite/wiki/Node-v4-compatibility\");\n        return;\n      }\n      var nodeNativeEncodings = {\n        'hex': true,\n        'utf8': true,\n        'utf-8': true,\n        'ascii': true,\n        'binary': true,\n        'base64': true,\n        'ucs2': true,\n        'ucs-2': true,\n        'utf16le': true,\n        'utf-16le': true\n      };\n      Buffer.isNativeEncoding = function(enc) {\n        return enc && nodeNativeEncodings[enc.toLowerCase()];\n      };\n      var SlowBuffer = require('buffer').SlowBuffer;\n      original.SlowBufferToString = SlowBuffer.prototype.toString;\n      SlowBuffer.prototype.toString = function(encoding, start, end) {\n        encoding = String(encoding || 'utf8').toLowerCase();\n        if (Buffer.isNativeEncoding(encoding))\n          return original.SlowBufferToString.call(this, encoding, start, end);\n        if (typeof start == 'undefined')\n          start = 0;\n        if (typeof end == 'undefined')\n          end = this.length;\n        return iconv.decode(this.slice(start, end), encoding);\n      };\n      original.SlowBufferWrite = SlowBuffer.prototype.write;\n      SlowBuffer.prototype.write = function(string, offset, length, encoding) {\n        if (isFinite(offset)) {\n          if (!isFinite(length)) {\n            encoding = length;\n            length = undefined;\n          }\n        } else {\n          var swap = encoding;\n          encoding = offset;\n          offset = length;\n          length = swap;\n        }\n        offset = +offset || 0;\n        var remaining = this.length - offset;\n        if (!length) {\n          length = remaining;\n        } else {\n          length = +length;\n          if (length > remaining) {\n            length = remaining;\n          }\n        }\n        encoding = String(encoding || 'utf8').toLowerCase();\n        if (Buffer.isNativeEncoding(encoding))\n          return original.SlowBufferWrite.call(this, string, offset, length, encoding);\n        if (string.length > 0 && (length < 0 || offset < 0))\n          throw new RangeError('attempt to write beyond buffer bounds');\n        var buf = iconv.encode(string, encoding);\n        if (buf.length < length)\n          length = buf.length;\n        buf.copy(this, offset, 0, length);\n        return length;\n      };\n      original.BufferIsEncoding = Buffer.isEncoding;\n      Buffer.isEncoding = function(encoding) {\n        return Buffer.isNativeEncoding(encoding) || iconv.encodingExists(encoding);\n      };\n      original.BufferByteLength = Buffer.byteLength;\n      Buffer.byteLength = SlowBuffer.byteLength = function(str, encoding) {\n        encoding = String(encoding || 'utf8').toLowerCase();\n        if (Buffer.isNativeEncoding(encoding))\n          return original.BufferByteLength.call(this, str, encoding);\n        return iconv.encode(str, encoding).length;\n      };\n      original.BufferToString = Buffer.prototype.toString;\n      Buffer.prototype.toString = function(encoding, start, end) {\n        encoding = String(encoding || 'utf8').toLowerCase();\n        if (Buffer.isNativeEncoding(encoding))\n          return original.BufferToString.call(this, encoding, start, end);\n        if (typeof start == 'undefined')\n          start = 0;\n        if (typeof end == 'undefined')\n          end = this.length;\n        return iconv.decode(this.slice(start, end), encoding);\n      };\n      original.BufferWrite = Buffer.prototype.write;\n      Buffer.prototype.write = function(string, offset, length, encoding) {\n        var _offset = offset,\n            _length = length,\n            _encoding = encoding;\n        if (isFinite(offset)) {\n          if (!isFinite(length)) {\n            encoding = length;\n            length = undefined;\n          }\n        } else {\n          var swap = encoding;\n          encoding = offset;\n          offset = length;\n          length = swap;\n        }\n        encoding = String(encoding || 'utf8').toLowerCase();\n        if (Buffer.isNativeEncoding(encoding))\n          return original.BufferWrite.call(this, string, _offset, _length, _encoding);\n        offset = +offset || 0;\n        var remaining = this.length - offset;\n        if (!length) {\n          length = remaining;\n        } else {\n          length = +length;\n          if (length > remaining) {\n            length = remaining;\n          }\n        }\n        if (string.length > 0 && (length < 0 || offset < 0))\n          throw new RangeError('attempt to write beyond buffer bounds');\n        var buf = iconv.encode(string, encoding);\n        if (buf.length < length)\n          length = buf.length;\n        buf.copy(this, offset, 0, length);\n        return length;\n      };\n      if (iconv.supportsStreams) {\n        var Readable = require('stream').Readable;\n        original.ReadableSetEncoding = Readable.prototype.setEncoding;\n        Readable.prototype.setEncoding = function setEncoding(enc, options) {\n          this._readableState.decoder = iconv.getDecoder(enc, options);\n          this._readableState.encoding = enc;\n        };\n        Readable.prototype.collect = iconv._collect;\n      }\n    };\n    iconv.undoExtendNodeEncodings = function undoExtendNodeEncodings() {\n      if (!iconv.supportsNodeEncodingsExtension)\n        return;\n      if (!original)\n        throw new Error(\"require('iconv-lite').undoExtendNodeEncodings(): Nothing to undo; extendNodeEncodings() is not called.\");\n      delete Buffer.isNativeEncoding;\n      var SlowBuffer = require('buffer').SlowBuffer;\n      SlowBuffer.prototype.toString = original.SlowBufferToString;\n      SlowBuffer.prototype.write = original.SlowBufferWrite;\n      Buffer.isEncoding = original.BufferIsEncoding;\n      Buffer.byteLength = original.BufferByteLength;\n      Buffer.prototype.toString = original.BufferToString;\n      Buffer.prototype.write = original.BufferWrite;\n      if (iconv.supportsStreams) {\n        var Readable = require('stream').Readable;\n        Readable.prototype.setEncoding = original.ReadableSetEncoding;\n        delete Readable.prototype.collect;\n      }\n      original = undefined;\n    };\n  };\n})(require('buffer').Buffer);\n"]}