{"version":3,"sources":["../../../../../jspm_packages/npm/promise@7.3.1/setimmediate/es6-extensions.js"],"names":["Promise","require","module","exports","TRUE","valuePromise","FALSE","NULL","UNDEFINED","undefined","ZERO","EMPTYSTRING","value","p","_61","_65","_55","resolve","then","bind","ex","reject","all","arr","args","Array","prototype","slice","call","length","remaining","res","i","val","race","values","forEach","onRejected"],"mappings":"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","file":"es6-extensions.js","sourcesContent":["/* */ \n'use strict';\nvar Promise = require('./core');\nmodule.exports = Promise;\nvar TRUE = valuePromise(true);\nvar FALSE = valuePromise(false);\nvar NULL = valuePromise(null);\nvar UNDEFINED = valuePromise(undefined);\nvar ZERO = valuePromise(0);\nvar EMPTYSTRING = valuePromise('');\nfunction valuePromise(value) {\n  var p = new Promise(Promise._61);\n  p._65 = 1;\n  p._55 = value;\n  return p;\n}\nPromise.resolve = function(value) {\n  if (value instanceof Promise)\n    return value;\n  if (value === null)\n    return NULL;\n  if (value === undefined)\n    return UNDEFINED;\n  if (value === true)\n    return TRUE;\n  if (value === false)\n    return FALSE;\n  if (value === 0)\n    return ZERO;\n  if (value === '')\n    return EMPTYSTRING;\n  if (typeof value === 'object' || typeof value === 'function') {\n    try {\n      var then = value.then;\n      if (typeof then === 'function') {\n        return new Promise(then.bind(value));\n      }\n    } catch (ex) {\n      return new Promise(function(resolve, reject) {\n        reject(ex);\n      });\n    }\n  }\n  return valuePromise(value);\n};\nPromise.all = function(arr) {\n  var args = Array.prototype.slice.call(arr);\n  return new Promise(function(resolve, reject) {\n    if (args.length === 0)\n      return resolve([]);\n    var remaining = args.length;\n    function res(i, val) {\n      if (val && (typeof val === 'object' || typeof val === 'function')) {\n        if (val instanceof Promise && val.then === Promise.prototype.then) {\n          while (val._65 === 3) {\n            val = val._55;\n          }\n          if (val._65 === 1)\n            return res(i, val._55);\n          if (val._65 === 2)\n            reject(val._55);\n          val.then(function(val) {\n            res(i, val);\n          }, reject);\n          return;\n        } else {\n          var then = val.then;\n          if (typeof then === 'function') {\n            var p = new Promise(then.bind(val));\n            p.then(function(val) {\n              res(i, val);\n            }, reject);\n            return;\n          }\n        }\n      }\n      args[i] = val;\n      if (--remaining === 0) {\n        resolve(args);\n      }\n    }\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\nPromise.reject = function(value) {\n  return new Promise(function(resolve, reject) {\n    reject(value);\n  });\n};\nPromise.race = function(values) {\n  return new Promise(function(resolve, reject) {\n    values.forEach(function(value) {\n      Promise.resolve(value).then(resolve, reject);\n    });\n  });\n};\nPromise.prototype['catch'] = function(onRejected) {\n  return this.then(null, onRejected);\n};\n"]}