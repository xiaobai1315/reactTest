{"version":3,"sources":["../../../../../jspm_packages/npm/core-js@1.2.7/modules/$.collection-weak.js"],"names":["hide","require","redefineAll","anObject","isObject","strictNew","forOf","createArrayMethod","$has","WEAK","isExtensible","Object","arrayFind","arrayFindIndex","id","frozenStore","that","_l","FrozenStore","a","findFrozen","store","key","it","prototype","get","entry","has","set","value","push","index","splice","module","exports","getConstructor","wrapper","NAME","IS_MAP","ADDER","C","iterable","_i","undefined","def"],"mappings":"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","file":"$.collection-weak.js","sourcesContent":["/* */ \n'use strict';\nvar hide = require('./$.hide'),\n    redefineAll = require('./$.redefine-all'),\n    anObject = require('./$.an-object'),\n    isObject = require('./$.is-object'),\n    strictNew = require('./$.strict-new'),\n    forOf = require('./$.for-of'),\n    createArrayMethod = require('./$.array-methods'),\n    $has = require('./$.has'),\n    WEAK = require('./$.uid')('weak'),\n    isExtensible = Object.isExtensible || isObject,\n    arrayFind = createArrayMethod(5),\n    arrayFindIndex = createArrayMethod(6),\n    id = 0;\nvar frozenStore = function(that) {\n  return that._l || (that._l = new FrozenStore);\n};\nvar FrozenStore = function() {\n  this.a = [];\n};\nvar findFrozen = function(store, key) {\n  return arrayFind(store.a, function(it) {\n    return it[0] === key;\n  });\n};\nFrozenStore.prototype = {\n  get: function(key) {\n    var entry = findFrozen(this, key);\n    if (entry)\n      return entry[1];\n  },\n  has: function(key) {\n    return !!findFrozen(this, key);\n  },\n  set: function(key, value) {\n    var entry = findFrozen(this, key);\n    if (entry)\n      entry[1] = value;\n    else\n      this.a.push([key, value]);\n  },\n  'delete': function(key) {\n    var index = arrayFindIndex(this.a, function(it) {\n      return it[0] === key;\n    });\n    if (~index)\n      this.a.splice(index, 1);\n    return !!~index;\n  }\n};\nmodule.exports = {\n  getConstructor: function(wrapper, NAME, IS_MAP, ADDER) {\n    var C = wrapper(function(that, iterable) {\n      strictNew(that, C, NAME);\n      that._i = id++;\n      that._l = undefined;\n      if (iterable != undefined)\n        forOf(iterable, IS_MAP, that[ADDER], that);\n    });\n    redefineAll(C.prototype, {\n      'delete': function(key) {\n        if (!isObject(key))\n          return false;\n        if (!isExtensible(key))\n          return frozenStore(this)['delete'](key);\n        return $has(key, WEAK) && $has(key[WEAK], this._i) && delete key[WEAK][this._i];\n      },\n      has: function has(key) {\n        if (!isObject(key))\n          return false;\n        if (!isExtensible(key))\n          return frozenStore(this).has(key);\n        return $has(key, WEAK) && $has(key[WEAK], this._i);\n      }\n    });\n    return C;\n  },\n  def: function(that, key, value) {\n    if (!isExtensible(anObject(key))) {\n      frozenStore(that).set(key, value);\n    } else {\n      $has(key, WEAK) || hide(key, WEAK, {});\n      key[WEAK][that._i] = value;\n    }\n    return that;\n  },\n  frozenStore: frozenStore,\n  WEAK: WEAK\n};\n"]}