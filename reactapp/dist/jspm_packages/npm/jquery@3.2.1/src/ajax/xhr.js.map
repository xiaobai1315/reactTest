{"version":3,"sources":["../../../../../../jspm_packages/npm/jquery@3.2.1/src/ajax/xhr.js"],"names":["define","jQuery","support","ajaxSettings","xhr","window","XMLHttpRequest","e","xhrSuccessStatus","xhrSupported","cors","ajax","ajaxTransport","options","callback","errorCallback","crossDomain","send","headers","complete","i","open","type","url","async","username","password","xhrFields","mimeType","overrideMimeType","setRequestHeader","onload","onerror","onabort","onreadystatechange","abort","status","statusText","responseType","responseText","binary","response","text","getAllResponseHeaders","undefined","readyState","setTimeout","hasContent","data"],"mappings":";;AAAA;AACAA,OAAQ,CACP,SADO,EAEP,gBAFO,EAGP,SAHO,CAAR,EAIG,UAAUC,MAAV,EAAkBC,OAAlB,EAA4B;;AAE/B;;AAEAD,QAAOE,YAAP,CAAoBC,GAApB,GAA0B,YAAW;AACpC,MAAI;AACH,UAAO,IAAIC,OAAOC,cAAX,EAAP;AACA,GAFD,CAEE,OAAQC,CAAR,EAAY,CAAE;AAChB,EAJD;;AAMA,KAAIC,mBAAmB;;AAErB;AACA,KAAG,GAHkB;;AAKrB;AACA;AACA,QAAM;AAPe,EAAvB;AAAA,KASCC,eAAeR,OAAOE,YAAP,CAAoBC,GAApB,EAThB;;AAWAF,SAAQQ,IAAR,GAAe,CAAC,CAACD,YAAF,IAAoB,qBAAqBA,YAAxD;AACAP,SAAQS,IAAR,GAAeF,eAAe,CAAC,CAACA,YAAhC;;AAEAR,QAAOW,aAAP,CAAsB,UAAUC,OAAV,EAAoB;AACzC,MAAIC,SAAJ,EAAcC,aAAd;;AAEA;AACA,MAAKb,QAAQQ,IAAR,IAAgBD,gBAAgB,CAACI,QAAQG,WAA9C,EAA4D;AAC3D,UAAO;AACNC,UAAM,cAAUC,OAAV,EAAmBC,QAAnB,EAA8B;AACnC,SAAIC,CAAJ;AAAA,SACChB,MAAMS,QAAQT,GAAR,EADP;;AAGAA,SAAIiB,IAAJ,CACCR,QAAQS,IADT,EAECT,QAAQU,GAFT,EAGCV,QAAQW,KAHT,EAICX,QAAQY,QAJT,EAKCZ,QAAQa,QALT;;AAQA;AACA,SAAKb,QAAQc,SAAb,EAAyB;AACxB,WAAMP,CAAN,IAAWP,QAAQc,SAAnB,EAA+B;AAC9BvB,WAAKgB,CAAL,IAAWP,QAAQc,SAAR,CAAmBP,CAAnB,CAAX;AACA;AACD;;AAED;AACA,SAAKP,QAAQe,QAAR,IAAoBxB,IAAIyB,gBAA7B,EAAgD;AAC/CzB,UAAIyB,gBAAJ,CAAsBhB,QAAQe,QAA9B;AACA;;AAED;AACA;AACA;AACA;AACA;AACA,SAAK,CAACf,QAAQG,WAAT,IAAwB,CAACE,QAAS,kBAAT,CAA9B,EAA8D;AAC7DA,cAAS,kBAAT,IAAgC,gBAAhC;AACA;;AAED;AACA,UAAME,CAAN,IAAWF,OAAX,EAAqB;AACpBd,UAAI0B,gBAAJ,CAAsBV,CAAtB,EAAyBF,QAASE,CAAT,CAAzB;AACA;;AAED;AACAN,iBAAW,kBAAUQ,IAAV,EAAiB;AAC3B,aAAO,YAAW;AACjB,WAAKR,SAAL,EAAgB;AACfA,oBAAWC,gBAAgBX,IAAI2B,MAAJ,GAC1B3B,IAAI4B,OAAJ,GAAc5B,IAAI6B,OAAJ,GAAc7B,IAAI8B,kBAAJ,GAAyB,IADtD;;AAGA,YAAKZ,SAAS,OAAd,EAAwB;AACvBlB,aAAI+B,KAAJ;AACA,SAFD,MAEO,IAAKb,SAAS,OAAd,EAAwB;;AAE9B;AACA;AACA;AACA,aAAK,OAAOlB,IAAIgC,MAAX,KAAsB,QAA3B,EAAsC;AACrCjB,mBAAU,CAAV,EAAa,OAAb;AACA,UAFD,MAEO;AACNA;;AAEC;AACAf,cAAIgC,MAHL,EAIChC,IAAIiC,UAJL;AAMA;AACD,SAfM,MAeA;AACNlB,kBACCX,iBAAkBJ,IAAIgC,MAAtB,KAAkChC,IAAIgC,MADvC,EAEChC,IAAIiC,UAFL;;AAIC;AACA;AACA;AACA,UAAEjC,IAAIkC,YAAJ,IAAoB,MAAtB,MAAmC,MAAnC,IACA,OAAOlC,IAAImC,YAAX,KAA4B,QAD5B,GAEC,EAAEC,QAAQpC,IAAIqC,QAAd,EAFD,GAGC,EAAEC,MAAMtC,IAAImC,YAAZ,EAVF,EAWCnC,IAAIuC,qBAAJ,EAXD;AAaA;AACD;AACD,OAtCD;AAuCA,MAxCD;;AA0CA;AACAvC,SAAI2B,MAAJ,GAAajB,WAAb;AACAC,qBAAgBX,IAAI4B,OAAJ,GAAclB,UAAU,OAAV,CAA9B;;AAEA;AACA;AACA;AACA,SAAKV,IAAI6B,OAAJ,KAAgBW,SAArB,EAAiC;AAChCxC,UAAI6B,OAAJ,GAAclB,aAAd;AACA,MAFD,MAEO;AACNX,UAAI8B,kBAAJ,GAAyB,YAAW;;AAEnC;AACA,WAAK9B,IAAIyC,UAAJ,KAAmB,CAAxB,EAA4B;;AAE3B;AACA;AACA;AACA;AACAxC,eAAOyC,UAAP,CAAmB,YAAW;AAC7B,aAAKhC,SAAL,EAAgB;AACfC;AACA;AACD,SAJD;AAKA;AACD,OAfD;AAgBA;;AAED;AACAD,iBAAWA,UAAU,OAAV,CAAX;;AAEA,SAAI;;AAEH;AACAV,UAAIa,IAAJ,CAAUJ,QAAQkC,UAAR,IAAsBlC,QAAQmC,IAA9B,IAAsC,IAAhD;AACA,MAJD,CAIE,OAAQzC,CAAR,EAAY;;AAEb;AACA,UAAKO,SAAL,EAAgB;AACf,aAAMP,CAAN;AACA;AACD;AACD,KA5HK;;AA8HN4B,WAAO,iBAAW;AACjB,SAAKrB,SAAL,EAAgB;AACfA;AACA;AACD;AAlIK,IAAP;AAoIA;AACD,EA1ID;AA4IC,CAxKD","file":"xhr.js","sourcesContent":["/* */ \ndefine( [\n\t\"../core\",\n\t\"../var/support\",\n\t\"../ajax\"\n], function( jQuery, support ) {\n\n\"use strict\";\n\njQuery.ajaxSettings.xhr = function() {\n\ttry {\n\t\treturn new window.XMLHttpRequest();\n\t} catch ( e ) {}\n};\n\nvar xhrSuccessStatus = {\n\n\t\t// File protocol always yields status code 0, assume 200\n\t\t0: 200,\n\n\t\t// Support: IE <=9 only\n\t\t// #1450: sometimes IE returns 1223 when it should be 204\n\t\t1223: 204\n\t},\n\txhrSupported = jQuery.ajaxSettings.xhr();\n\nsupport.cors = !!xhrSupported && ( \"withCredentials\" in xhrSupported );\nsupport.ajax = xhrSupported = !!xhrSupported;\n\njQuery.ajaxTransport( function( options ) {\n\tvar callback, errorCallback;\n\n\t// Cross domain only allowed if supported through XMLHttpRequest\n\tif ( support.cors || xhrSupported && !options.crossDomain ) {\n\t\treturn {\n\t\t\tsend: function( headers, complete ) {\n\t\t\t\tvar i,\n\t\t\t\t\txhr = options.xhr();\n\n\t\t\t\txhr.open(\n\t\t\t\t\toptions.type,\n\t\t\t\t\toptions.url,\n\t\t\t\t\toptions.async,\n\t\t\t\t\toptions.username,\n\t\t\t\t\toptions.password\n\t\t\t\t);\n\n\t\t\t\t// Apply custom fields if provided\n\t\t\t\tif ( options.xhrFields ) {\n\t\t\t\t\tfor ( i in options.xhrFields ) {\n\t\t\t\t\t\txhr[ i ] = options.xhrFields[ i ];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Override mime type if needed\n\t\t\t\tif ( options.mimeType && xhr.overrideMimeType ) {\n\t\t\t\t\txhr.overrideMimeType( options.mimeType );\n\t\t\t\t}\n\n\t\t\t\t// X-Requested-With header\n\t\t\t\t// For cross-domain requests, seeing as conditions for a preflight are\n\t\t\t\t// akin to a jigsaw puzzle, we simply never set it to be sure.\n\t\t\t\t// (it can always be set on a per-request basis or even using ajaxSetup)\n\t\t\t\t// For same-domain requests, won't change header if already provided.\n\t\t\t\tif ( !options.crossDomain && !headers[ \"X-Requested-With\" ] ) {\n\t\t\t\t\theaders[ \"X-Requested-With\" ] = \"XMLHttpRequest\";\n\t\t\t\t}\n\n\t\t\t\t// Set headers\n\t\t\t\tfor ( i in headers ) {\n\t\t\t\t\txhr.setRequestHeader( i, headers[ i ] );\n\t\t\t\t}\n\n\t\t\t\t// Callback\n\t\t\t\tcallback = function( type ) {\n\t\t\t\t\treturn function() {\n\t\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\t\tcallback = errorCallback = xhr.onload =\n\t\t\t\t\t\t\t\txhr.onerror = xhr.onabort = xhr.onreadystatechange = null;\n\n\t\t\t\t\t\t\tif ( type === \"abort\" ) {\n\t\t\t\t\t\t\t\txhr.abort();\n\t\t\t\t\t\t\t} else if ( type === \"error\" ) {\n\n\t\t\t\t\t\t\t\t// Support: IE <=9 only\n\t\t\t\t\t\t\t\t// On a manual native abort, IE9 throws\n\t\t\t\t\t\t\t\t// errors on any property access that is not readyState\n\t\t\t\t\t\t\t\tif ( typeof xhr.status !== \"number\" ) {\n\t\t\t\t\t\t\t\t\tcomplete( 0, \"error\" );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tcomplete(\n\n\t\t\t\t\t\t\t\t\t\t// File: protocol always yields status 0; see #8605, #14207\n\t\t\t\t\t\t\t\t\t\txhr.status,\n\t\t\t\t\t\t\t\t\t\txhr.statusText\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcomplete(\n\t\t\t\t\t\t\t\t\txhrSuccessStatus[ xhr.status ] || xhr.status,\n\t\t\t\t\t\t\t\t\txhr.statusText,\n\n\t\t\t\t\t\t\t\t\t// Support: IE <=9 only\n\t\t\t\t\t\t\t\t\t// IE9 has no XHR2 but throws on binary (trac-11426)\n\t\t\t\t\t\t\t\t\t// For XHR2 non-text, let the caller handle it (gh-2498)\n\t\t\t\t\t\t\t\t\t( xhr.responseType || \"text\" ) !== \"text\"  ||\n\t\t\t\t\t\t\t\t\ttypeof xhr.responseText !== \"string\" ?\n\t\t\t\t\t\t\t\t\t\t{ binary: xhr.response } :\n\t\t\t\t\t\t\t\t\t\t{ text: xhr.responseText },\n\t\t\t\t\t\t\t\t\txhr.getAllResponseHeaders()\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t};\n\n\t\t\t\t// Listen to events\n\t\t\t\txhr.onload = callback();\n\t\t\t\terrorCallback = xhr.onerror = callback( \"error\" );\n\n\t\t\t\t// Support: IE 9 only\n\t\t\t\t// Use onreadystatechange to replace onabort\n\t\t\t\t// to handle uncaught aborts\n\t\t\t\tif ( xhr.onabort !== undefined ) {\n\t\t\t\t\txhr.onabort = errorCallback;\n\t\t\t\t} else {\n\t\t\t\t\txhr.onreadystatechange = function() {\n\n\t\t\t\t\t\t// Check readyState before timeout as it changes\n\t\t\t\t\t\tif ( xhr.readyState === 4 ) {\n\n\t\t\t\t\t\t\t// Allow onerror to be called first,\n\t\t\t\t\t\t\t// but that will not handle a native abort\n\t\t\t\t\t\t\t// Also, save errorCallback to a variable\n\t\t\t\t\t\t\t// as xhr.onerror cannot be accessed\n\t\t\t\t\t\t\twindow.setTimeout( function() {\n\t\t\t\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\t\t\t\terrorCallback();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\t// Create the abort callback\n\t\t\t\tcallback = callback( \"abort\" );\n\n\t\t\t\ttry {\n\n\t\t\t\t\t// Do send the request (this may raise an exception)\n\t\t\t\t\txhr.send( options.hasContent && options.data || null );\n\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\t// #14683: Only rethrow if this hasn't been notified as an error yet\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tthrow e;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tabort: function() {\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n} );\n\n} );\n"]}