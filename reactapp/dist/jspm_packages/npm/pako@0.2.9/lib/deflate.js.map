{"version":3,"sources":["../../../../../jspm_packages/npm/pako@0.2.9/lib/deflate.js"],"names":["zlib_deflate","require","utils","strings","msg","ZStream","toString","Object","prototype","Z_NO_FLUSH","Z_FINISH","Z_OK","Z_STREAM_END","Z_SYNC_FLUSH","Z_DEFAULT_COMPRESSION","Z_DEFAULT_STRATEGY","Z_DEFLATED","Deflate","options","assign","level","method","chunkSize","windowBits","memLevel","strategy","to","opt","raw","gzip","err","ended","chunks","strm","avail_out","status","deflateInit2","Error","header","deflateSetHeader","dictionary","dict","string2buf","call","Uint8Array","deflateSetDictionary","_dict_set","push","data","mode","_mode","input","next_in","avail_in","length","output","Buf8","next_out","deflate","onEnd","onData","buf2binstring","shrinkBuf","deflateEnd","chunk","result","join","flattenChunks","deflator","deflateRaw","exports"],"mappings":"AAAA;AACA;;AACA,IAAIA,eAAeC,QAAQ,gBAAR,CAAnB;AACA,IAAIC,QAAQD,QAAQ,gBAAR,CAAZ;AACA,IAAIE,UAAUF,QAAQ,iBAAR,CAAd;AACA,IAAIG,MAAMH,QAAQ,iBAAR,CAAV;AACA,IAAII,UAAUJ,QAAQ,gBAAR,CAAd;AACA,IAAIK,WAAWC,OAAOC,SAAP,CAAiBF,QAAhC;AACA,IAAIG,aAAa,CAAjB;AACA,IAAIC,WAAW,CAAf;AACA,IAAIC,OAAO,CAAX;AACA,IAAIC,eAAe,CAAnB;AACA,IAAIC,eAAe,CAAnB;AACA,IAAIC,wBAAwB,CAAC,CAA7B;AACA,IAAIC,qBAAqB,CAAzB;AACA,IAAIC,aAAa,CAAjB;AACA,SAASC,OAAT,CAAiBC,OAAjB,EAA0B;AACxB,MAAI,EAAE,gBAAgBD,OAAlB,CAAJ,EACE,OAAO,IAAIA,OAAJ,CAAYC,OAAZ,CAAP;AACF,OAAKA,OAAL,GAAehB,MAAMiB,MAAN,CAAa;AAC1BC,WAAON,qBADmB;AAE1BO,YAAQL,UAFkB;AAG1BM,eAAW,KAHe;AAI1BC,gBAAY,EAJc;AAK1BC,cAAU,CALgB;AAM1BC,cAAUV,kBANgB;AAO1BW,QAAI;AAPsB,GAAb,EAQZR,WAAW,EARC,CAAf;AASA,MAAIS,MAAM,KAAKT,OAAf;AACA,MAAIS,IAAIC,GAAJ,IAAYD,IAAIJ,UAAJ,GAAiB,CAAjC,EAAqC;AACnCI,QAAIJ,UAAJ,GAAiB,CAACI,IAAIJ,UAAtB;AACD,GAFD,MAEO,IAAII,IAAIE,IAAJ,IAAaF,IAAIJ,UAAJ,GAAiB,CAA9B,IAAqCI,IAAIJ,UAAJ,GAAiB,EAA1D,EAA+D;AACpEI,QAAIJ,UAAJ,IAAkB,EAAlB;AACD;AACD,OAAKO,GAAL,GAAW,CAAX;AACA,OAAK1B,GAAL,GAAW,EAAX;AACA,OAAK2B,KAAL,GAAa,KAAb;AACA,OAAKC,MAAL,GAAc,EAAd;AACA,OAAKC,IAAL,GAAY,IAAI5B,OAAJ,EAAZ;AACA,OAAK4B,IAAL,CAAUC,SAAV,GAAsB,CAAtB;AACA,MAAIC,SAASnC,aAAaoC,YAAb,CAA0B,KAAKH,IAA/B,EAAqCN,IAAIP,KAAzC,EAAgDO,IAAIN,MAApD,EAA4DM,IAAIJ,UAAhE,EAA4EI,IAAIH,QAAhF,EAA0FG,IAAIF,QAA9F,CAAb;AACA,MAAIU,WAAWxB,IAAf,EAAqB;AACnB,UAAM,IAAI0B,KAAJ,CAAUjC,IAAI+B,MAAJ,CAAV,CAAN;AACD;AACD,MAAIR,IAAIW,MAAR,EAAgB;AACdtC,iBAAauC,gBAAb,CAA8B,KAAKN,IAAnC,EAAyCN,IAAIW,MAA7C;AACD;AACD,MAAIX,IAAIa,UAAR,EAAoB;AAClB,QAAIC,IAAJ;AACA,QAAI,OAAOd,IAAIa,UAAX,KAA0B,QAA9B,EAAwC;AACtCC,aAAOtC,QAAQuC,UAAR,CAAmBf,IAAIa,UAAvB,CAAP;AACD,KAFD,MAEO,IAAIlC,SAASqC,IAAT,CAAchB,IAAIa,UAAlB,MAAkC,sBAAtC,EAA8D;AACnEC,aAAO,IAAIG,UAAJ,CAAejB,IAAIa,UAAnB,CAAP;AACD,KAFM,MAEA;AACLC,aAAOd,IAAIa,UAAX;AACD;AACDL,aAASnC,aAAa6C,oBAAb,CAAkC,KAAKZ,IAAvC,EAA6CQ,IAA7C,CAAT;AACA,QAAIN,WAAWxB,IAAf,EAAqB;AACnB,YAAM,IAAI0B,KAAJ,CAAUjC,IAAI+B,MAAJ,CAAV,CAAN;AACD;AACD,SAAKW,SAAL,GAAiB,IAAjB;AACD;AACF;AACD7B,QAAQT,SAAR,CAAkBuC,IAAlB,GAAyB,UAASC,IAAT,EAAeC,IAAf,EAAqB;AAC5C,MAAIhB,OAAO,KAAKA,IAAhB;AACA,MAAIX,YAAY,KAAKJ,OAAL,CAAaI,SAA7B;AACA,MAAIa,MAAJ,EACIe,KADJ;AAEA,MAAI,KAAKnB,KAAT,EAAgB;AACd,WAAO,KAAP;AACD;AACDmB,UAASD,SAAS,CAAC,CAACA,IAAZ,GAAoBA,IAApB,GAA6BA,SAAS,IAAV,GAAkBvC,QAAlB,GAA6BD,UAAjE;AACA,MAAI,OAAOuC,IAAP,KAAgB,QAApB,EAA8B;AAC5Bf,SAAKkB,KAAL,GAAahD,QAAQuC,UAAR,CAAmBM,IAAnB,CAAb;AACD,GAFD,MAEO,IAAI1C,SAASqC,IAAT,CAAcK,IAAd,MAAwB,sBAA5B,EAAoD;AACzDf,SAAKkB,KAAL,GAAa,IAAIP,UAAJ,CAAeI,IAAf,CAAb;AACD,GAFM,MAEA;AACLf,SAAKkB,KAAL,GAAaH,IAAb;AACD;AACDf,OAAKmB,OAAL,GAAe,CAAf;AACAnB,OAAKoB,QAAL,GAAgBpB,KAAKkB,KAAL,CAAWG,MAA3B;AACA,KAAG;AACD,QAAIrB,KAAKC,SAAL,KAAmB,CAAvB,EAA0B;AACxBD,WAAKsB,MAAL,GAAc,IAAIrD,MAAMsD,IAAV,CAAelC,SAAf,CAAd;AACAW,WAAKwB,QAAL,GAAgB,CAAhB;AACAxB,WAAKC,SAAL,GAAiBZ,SAAjB;AACD;AACDa,aAASnC,aAAa0D,OAAb,CAAqBzB,IAArB,EAA2BiB,KAA3B,CAAT;AACA,QAAIf,WAAWvB,YAAX,IAA2BuB,WAAWxB,IAA1C,EAAgD;AAC9C,WAAKgD,KAAL,CAAWxB,MAAX;AACA,WAAKJ,KAAL,GAAa,IAAb;AACA,aAAO,KAAP;AACD;AACD,QAAIE,KAAKC,SAAL,KAAmB,CAAnB,IAAyBD,KAAKoB,QAAL,KAAkB,CAAlB,KAAwBH,UAAUxC,QAAV,IAAsBwC,UAAUrC,YAAxD,CAA7B,EAAqG;AACnG,UAAI,KAAKK,OAAL,CAAaQ,EAAb,KAAoB,QAAxB,EAAkC;AAChC,aAAKkC,MAAL,CAAYzD,QAAQ0D,aAAR,CAAsB3D,MAAM4D,SAAN,CAAgB7B,KAAKsB,MAArB,EAA6BtB,KAAKwB,QAAlC,CAAtB,CAAZ;AACD,OAFD,MAEO;AACL,aAAKG,MAAL,CAAY1D,MAAM4D,SAAN,CAAgB7B,KAAKsB,MAArB,EAA6BtB,KAAKwB,QAAlC,CAAZ;AACD;AACF;AACF,GAnBD,QAmBS,CAACxB,KAAKoB,QAAL,GAAgB,CAAhB,IAAqBpB,KAAKC,SAAL,KAAmB,CAAzC,KAA+CC,WAAWvB,YAnBnE;AAoBA,MAAIsC,UAAUxC,QAAd,EAAwB;AACtByB,aAASnC,aAAa+D,UAAb,CAAwB,KAAK9B,IAA7B,CAAT;AACA,SAAK0B,KAAL,CAAWxB,MAAX;AACA,SAAKJ,KAAL,GAAa,IAAb;AACA,WAAOI,WAAWxB,IAAlB;AACD;AACD,MAAIuC,UAAUrC,YAAd,EAA4B;AAC1B,SAAK8C,KAAL,CAAWhD,IAAX;AACAsB,SAAKC,SAAL,GAAiB,CAAjB;AACA,WAAO,IAAP;AACD;AACD,SAAO,IAAP;AACD,CAlDD;AAmDAjB,QAAQT,SAAR,CAAkBoD,MAAlB,GAA2B,UAASI,KAAT,EAAgB;AACzC,OAAKhC,MAAL,CAAYe,IAAZ,CAAiBiB,KAAjB;AACD,CAFD;AAGA/C,QAAQT,SAAR,CAAkBmD,KAAlB,GAA0B,UAASxB,MAAT,EAAiB;AACzC,MAAIA,WAAWxB,IAAf,EAAqB;AACnB,QAAI,KAAKO,OAAL,CAAaQ,EAAb,KAAoB,QAAxB,EAAkC;AAChC,WAAKuC,MAAL,GAAc,KAAKjC,MAAL,CAAYkC,IAAZ,CAAiB,EAAjB,CAAd;AACD,KAFD,MAEO;AACL,WAAKD,MAAL,GAAc/D,MAAMiE,aAAN,CAAoB,KAAKnC,MAAzB,CAAd;AACD;AACF;AACD,OAAKA,MAAL,GAAc,EAAd;AACA,OAAKF,GAAL,GAAWK,MAAX;AACA,OAAK/B,GAAL,GAAW,KAAK6B,IAAL,CAAU7B,GAArB;AACD,CAXD;AAYA,SAASsD,OAAT,CAAiBP,KAAjB,EAAwBjC,OAAxB,EAAiC;AAC/B,MAAIkD,WAAW,IAAInD,OAAJ,CAAYC,OAAZ,CAAf;AACAkD,WAASrB,IAAT,CAAcI,KAAd,EAAqB,IAArB;AACA,MAAIiB,SAAStC,GAAb,EAAkB;AAChB,UAAMsC,SAAShE,GAAf;AACD;AACD,SAAOgE,SAASH,MAAhB;AACD;AACD,SAASI,UAAT,CAAoBlB,KAApB,EAA2BjC,OAA3B,EAAoC;AAClCA,YAAUA,WAAW,EAArB;AACAA,UAAQU,GAAR,GAAc,IAAd;AACA,SAAO8B,QAAQP,KAAR,EAAejC,OAAf,CAAP;AACD;AACD,SAASW,IAAT,CAAcsB,KAAd,EAAqBjC,OAArB,EAA8B;AAC5BA,YAAUA,WAAW,EAArB;AACAA,UAAQW,IAAR,GAAe,IAAf;AACA,SAAO6B,QAAQP,KAAR,EAAejC,OAAf,CAAP;AACD;AACDoD,QAAQrD,OAAR,GAAkBA,OAAlB;AACAqD,QAAQZ,OAAR,GAAkBA,OAAlB;AACAY,QAAQD,UAAR,GAAqBA,UAArB;AACAC,QAAQzC,IAAR,GAAeA,IAAf","file":"deflate.js","sourcesContent":["/* */ \n'use strict';\nvar zlib_deflate = require('./zlib/deflate');\nvar utils = require('./utils/common');\nvar strings = require('./utils/strings');\nvar msg = require('./zlib/messages');\nvar ZStream = require('./zlib/zstream');\nvar toString = Object.prototype.toString;\nvar Z_NO_FLUSH = 0;\nvar Z_FINISH = 4;\nvar Z_OK = 0;\nvar Z_STREAM_END = 1;\nvar Z_SYNC_FLUSH = 2;\nvar Z_DEFAULT_COMPRESSION = -1;\nvar Z_DEFAULT_STRATEGY = 0;\nvar Z_DEFLATED = 8;\nfunction Deflate(options) {\n  if (!(this instanceof Deflate))\n    return new Deflate(options);\n  this.options = utils.assign({\n    level: Z_DEFAULT_COMPRESSION,\n    method: Z_DEFLATED,\n    chunkSize: 16384,\n    windowBits: 15,\n    memLevel: 8,\n    strategy: Z_DEFAULT_STRATEGY,\n    to: ''\n  }, options || {});\n  var opt = this.options;\n  if (opt.raw && (opt.windowBits > 0)) {\n    opt.windowBits = -opt.windowBits;\n  } else if (opt.gzip && (opt.windowBits > 0) && (opt.windowBits < 16)) {\n    opt.windowBits += 16;\n  }\n  this.err = 0;\n  this.msg = '';\n  this.ended = false;\n  this.chunks = [];\n  this.strm = new ZStream();\n  this.strm.avail_out = 0;\n  var status = zlib_deflate.deflateInit2(this.strm, opt.level, opt.method, opt.windowBits, opt.memLevel, opt.strategy);\n  if (status !== Z_OK) {\n    throw new Error(msg[status]);\n  }\n  if (opt.header) {\n    zlib_deflate.deflateSetHeader(this.strm, opt.header);\n  }\n  if (opt.dictionary) {\n    var dict;\n    if (typeof opt.dictionary === 'string') {\n      dict = strings.string2buf(opt.dictionary);\n    } else if (toString.call(opt.dictionary) === '[object ArrayBuffer]') {\n      dict = new Uint8Array(opt.dictionary);\n    } else {\n      dict = opt.dictionary;\n    }\n    status = zlib_deflate.deflateSetDictionary(this.strm, dict);\n    if (status !== Z_OK) {\n      throw new Error(msg[status]);\n    }\n    this._dict_set = true;\n  }\n}\nDeflate.prototype.push = function(data, mode) {\n  var strm = this.strm;\n  var chunkSize = this.options.chunkSize;\n  var status,\n      _mode;\n  if (this.ended) {\n    return false;\n  }\n  _mode = (mode === ~~mode) ? mode : ((mode === true) ? Z_FINISH : Z_NO_FLUSH);\n  if (typeof data === 'string') {\n    strm.input = strings.string2buf(data);\n  } else if (toString.call(data) === '[object ArrayBuffer]') {\n    strm.input = new Uint8Array(data);\n  } else {\n    strm.input = data;\n  }\n  strm.next_in = 0;\n  strm.avail_in = strm.input.length;\n  do {\n    if (strm.avail_out === 0) {\n      strm.output = new utils.Buf8(chunkSize);\n      strm.next_out = 0;\n      strm.avail_out = chunkSize;\n    }\n    status = zlib_deflate.deflate(strm, _mode);\n    if (status !== Z_STREAM_END && status !== Z_OK) {\n      this.onEnd(status);\n      this.ended = true;\n      return false;\n    }\n    if (strm.avail_out === 0 || (strm.avail_in === 0 && (_mode === Z_FINISH || _mode === Z_SYNC_FLUSH))) {\n      if (this.options.to === 'string') {\n        this.onData(strings.buf2binstring(utils.shrinkBuf(strm.output, strm.next_out)));\n      } else {\n        this.onData(utils.shrinkBuf(strm.output, strm.next_out));\n      }\n    }\n  } while ((strm.avail_in > 0 || strm.avail_out === 0) && status !== Z_STREAM_END);\n  if (_mode === Z_FINISH) {\n    status = zlib_deflate.deflateEnd(this.strm);\n    this.onEnd(status);\n    this.ended = true;\n    return status === Z_OK;\n  }\n  if (_mode === Z_SYNC_FLUSH) {\n    this.onEnd(Z_OK);\n    strm.avail_out = 0;\n    return true;\n  }\n  return true;\n};\nDeflate.prototype.onData = function(chunk) {\n  this.chunks.push(chunk);\n};\nDeflate.prototype.onEnd = function(status) {\n  if (status === Z_OK) {\n    if (this.options.to === 'string') {\n      this.result = this.chunks.join('');\n    } else {\n      this.result = utils.flattenChunks(this.chunks);\n    }\n  }\n  this.chunks = [];\n  this.err = status;\n  this.msg = this.strm.msg;\n};\nfunction deflate(input, options) {\n  var deflator = new Deflate(options);\n  deflator.push(input, true);\n  if (deflator.err) {\n    throw deflator.msg;\n  }\n  return deflator.result;\n}\nfunction deflateRaw(input, options) {\n  options = options || {};\n  options.raw = true;\n  return deflate(input, options);\n}\nfunction gzip(input, options) {\n  options = options || {};\n  options.gzip = true;\n  return deflate(input, options);\n}\nexports.Deflate = Deflate;\nexports.deflate = deflate;\nexports.deflateRaw = deflateRaw;\nexports.gzip = gzip;\n"]}