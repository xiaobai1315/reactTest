{"version":3,"sources":["../../../../../../jspm_packages/npm/pako@0.2.9/lib/utils/strings.js"],"names":["process","utils","require","STR_APPLY_OK","STR_APPLY_UIA_OK","String","fromCharCode","apply","__","Uint8Array","_utf8len","Buf8","q","exports","string2buf","str","buf","c","c2","m_pos","i","str_len","length","buf_len","charCodeAt","buf2binstring","len","subarray","shrinkBuf","result","binstring2buf","buf2string","max","out","c_len","utf16buf","Array","utf8border","pos"],"mappings":"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","file":"strings.js","sourcesContent":["/* */ \n(function(process) {\n  'use strict';\n  var utils = require('./common');\n  var STR_APPLY_OK = true;\n  var STR_APPLY_UIA_OK = true;\n  try {\n    String.fromCharCode.apply(null, [0]);\n  } catch (__) {\n    STR_APPLY_OK = false;\n  }\n  try {\n    String.fromCharCode.apply(null, new Uint8Array(1));\n  } catch (__) {\n    STR_APPLY_UIA_OK = false;\n  }\n  var _utf8len = new utils.Buf8(256);\n  for (var q = 0; q < 256; q++) {\n    _utf8len[q] = (q >= 252 ? 6 : q >= 248 ? 5 : q >= 240 ? 4 : q >= 224 ? 3 : q >= 192 ? 2 : 1);\n  }\n  _utf8len[254] = _utf8len[254] = 1;\n  exports.string2buf = function(str) {\n    var buf,\n        c,\n        c2,\n        m_pos,\n        i,\n        str_len = str.length,\n        buf_len = 0;\n    for (m_pos = 0; m_pos < str_len; m_pos++) {\n      c = str.charCodeAt(m_pos);\n      if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {\n        c2 = str.charCodeAt(m_pos + 1);\n        if ((c2 & 0xfc00) === 0xdc00) {\n          c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n          m_pos++;\n        }\n      }\n      buf_len += c < 0x80 ? 1 : c < 0x800 ? 2 : c < 0x10000 ? 3 : 4;\n    }\n    buf = new utils.Buf8(buf_len);\n    for (i = 0, m_pos = 0; i < buf_len; m_pos++) {\n      c = str.charCodeAt(m_pos);\n      if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {\n        c2 = str.charCodeAt(m_pos + 1);\n        if ((c2 & 0xfc00) === 0xdc00) {\n          c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n          m_pos++;\n        }\n      }\n      if (c < 0x80) {\n        buf[i++] = c;\n      } else if (c < 0x800) {\n        buf[i++] = 0xC0 | (c >>> 6);\n        buf[i++] = 0x80 | (c & 0x3f);\n      } else if (c < 0x10000) {\n        buf[i++] = 0xE0 | (c >>> 12);\n        buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n        buf[i++] = 0x80 | (c & 0x3f);\n      } else {\n        buf[i++] = 0xf0 | (c >>> 18);\n        buf[i++] = 0x80 | (c >>> 12 & 0x3f);\n        buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n        buf[i++] = 0x80 | (c & 0x3f);\n      }\n    }\n    return buf;\n  };\n  function buf2binstring(buf, len) {\n    if (len < 65537) {\n      if ((buf.subarray && STR_APPLY_UIA_OK) || (!buf.subarray && STR_APPLY_OK)) {\n        return String.fromCharCode.apply(null, utils.shrinkBuf(buf, len));\n      }\n    }\n    var result = '';\n    for (var i = 0; i < len; i++) {\n      result += String.fromCharCode(buf[i]);\n    }\n    return result;\n  }\n  exports.buf2binstring = function(buf) {\n    return buf2binstring(buf, buf.length);\n  };\n  exports.binstring2buf = function(str) {\n    var buf = new utils.Buf8(str.length);\n    for (var i = 0,\n        len = buf.length; i < len; i++) {\n      buf[i] = str.charCodeAt(i);\n    }\n    return buf;\n  };\n  exports.buf2string = function(buf, max) {\n    var i,\n        out,\n        c,\n        c_len;\n    var len = max || buf.length;\n    var utf16buf = new Array(len * 2);\n    for (out = 0, i = 0; i < len; ) {\n      c = buf[i++];\n      if (c < 0x80) {\n        utf16buf[out++] = c;\n        continue;\n      }\n      c_len = _utf8len[c];\n      if (c_len > 4) {\n        utf16buf[out++] = 0xfffd;\n        i += c_len - 1;\n        continue;\n      }\n      c &= c_len === 2 ? 0x1f : c_len === 3 ? 0x0f : 0x07;\n      while (c_len > 1 && i < len) {\n        c = (c << 6) | (buf[i++] & 0x3f);\n        c_len--;\n      }\n      if (c_len > 1) {\n        utf16buf[out++] = 0xfffd;\n        continue;\n      }\n      if (c < 0x10000) {\n        utf16buf[out++] = c;\n      } else {\n        c -= 0x10000;\n        utf16buf[out++] = 0xd800 | ((c >> 10) & 0x3ff);\n        utf16buf[out++] = 0xdc00 | (c & 0x3ff);\n      }\n    }\n    return buf2binstring(utf16buf, out);\n  };\n  exports.utf8border = function(buf, max) {\n    var pos;\n    max = max || buf.length;\n    if (max > buf.length) {\n      max = buf.length;\n    }\n    pos = max - 1;\n    while (pos >= 0 && (buf[pos] & 0xC0) === 0x80) {\n      pos--;\n    }\n    if (pos < 0) {\n      return max;\n    }\n    if (pos === 0) {\n      return max;\n    }\n    return (pos + _utf8len[buf[pos]] > max) ? pos : max;\n  };\n})(require('process'));\n"]}