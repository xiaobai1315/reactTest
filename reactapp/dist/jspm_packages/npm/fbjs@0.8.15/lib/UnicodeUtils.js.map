{"version":3,"sources":["../../../../../jspm_packages/npm/fbjs@0.8.15/lib/UnicodeUtils.js"],"names":["process","invariant","require","SURROGATE_HIGH_START","SURROGATE_HIGH_END","SURROGATE_LOW_START","SURROGATE_LOW_END","SURROGATE_UNITS_REGEX","isCodeUnitInSurrogateRange","codeUnit","isSurrogatePair","str","index","length","env","NODE_ENV","first","charCodeAt","second","hasSurrogateUnit","test","getUTF16Length","pos","strlen","len","substr","start","undefined","Infinity","size","posA","posB","substring","end","Math","abs","getCodePoints","codePoints","push","codePointAt","UnicodeUtils","module","exports"],"mappings":"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","file":"UnicodeUtils.js","sourcesContent":["/* */ \n(function(process) {\n  'use strict';\n  var invariant = require('./invariant');\n  var SURROGATE_HIGH_START = 0xD800;\n  var SURROGATE_HIGH_END = 0xDBFF;\n  var SURROGATE_LOW_START = 0xDC00;\n  var SURROGATE_LOW_END = 0xDFFF;\n  var SURROGATE_UNITS_REGEX = /[\\uD800-\\uDFFF]/;\n  function isCodeUnitInSurrogateRange(codeUnit) {\n    return SURROGATE_HIGH_START <= codeUnit && codeUnit <= SURROGATE_LOW_END;\n  }\n  function isSurrogatePair(str, index) {\n    !(0 <= index && index < str.length) ? process.env.NODE_ENV !== 'production' ? invariant(false, 'isSurrogatePair: Invalid index %s for string length %s.', index, str.length) : invariant(false) : void 0;\n    if (index + 1 === str.length) {\n      return false;\n    }\n    var first = str.charCodeAt(index);\n    var second = str.charCodeAt(index + 1);\n    return SURROGATE_HIGH_START <= first && first <= SURROGATE_HIGH_END && SURROGATE_LOW_START <= second && second <= SURROGATE_LOW_END;\n  }\n  function hasSurrogateUnit(str) {\n    return SURROGATE_UNITS_REGEX.test(str);\n  }\n  function getUTF16Length(str, pos) {\n    return 1 + isCodeUnitInSurrogateRange(str.charCodeAt(pos));\n  }\n  function strlen(str) {\n    if (!hasSurrogateUnit(str)) {\n      return str.length;\n    }\n    var len = 0;\n    for (var pos = 0; pos < str.length; pos += getUTF16Length(str, pos)) {\n      len++;\n    }\n    return len;\n  }\n  function substr(str, start, length) {\n    start = start || 0;\n    length = length === undefined ? Infinity : length || 0;\n    if (!hasSurrogateUnit(str)) {\n      return str.substr(start, length);\n    }\n    var size = str.length;\n    if (size <= 0 || start > size || length <= 0) {\n      return '';\n    }\n    var posA = 0;\n    if (start > 0) {\n      for (; start > 0 && posA < size; start--) {\n        posA += getUTF16Length(str, posA);\n      }\n      if (posA >= size) {\n        return '';\n      }\n    } else if (start < 0) {\n      for (posA = size; start < 0 && 0 < posA; start++) {\n        posA -= getUTF16Length(str, posA - 1);\n      }\n      if (posA < 0) {\n        posA = 0;\n      }\n    }\n    var posB = size;\n    if (length < size) {\n      for (posB = posA; length > 0 && posB < size; length--) {\n        posB += getUTF16Length(str, posB);\n      }\n    }\n    return str.substring(posA, posB);\n  }\n  function substring(str, start, end) {\n    start = start || 0;\n    end = end === undefined ? Infinity : end || 0;\n    if (start < 0) {\n      start = 0;\n    }\n    if (end < 0) {\n      end = 0;\n    }\n    var length = Math.abs(end - start);\n    start = start < end ? start : end;\n    return substr(str, start, length);\n  }\n  function getCodePoints(str) {\n    var codePoints = [];\n    for (var pos = 0; pos < str.length; pos += getUTF16Length(str, pos)) {\n      codePoints.push(str.codePointAt(pos));\n    }\n    return codePoints;\n  }\n  var UnicodeUtils = {\n    getCodePoints: getCodePoints,\n    getUTF16Length: getUTF16Length,\n    hasSurrogateUnit: hasSurrogateUnit,\n    isCodeUnitInSurrogateRange: isCodeUnitInSurrogateRange,\n    isSurrogatePair: isSurrogatePair,\n    strlen: strlen,\n    substring: substring,\n    substr: substr\n  };\n  module.exports = UnicodeUtils;\n})(require('process'));\n"]}