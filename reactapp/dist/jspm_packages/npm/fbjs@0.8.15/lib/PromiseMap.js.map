{"version":3,"sources":["../../../../../jspm_packages/npm/fbjs@0.8.15/lib/PromiseMap.js"],"names":["process","_classCallCheck","instance","Constructor","TypeError","Deferred","require","invariant","PromiseMap","_deferred","prototype","get","key","getDeferred","getPromise","resolveKey","value","entry","isSettled","env","NODE_ENV","resolve","rejectKey","reason","reject","entries","hasOwnProperty","module","exports"],"mappings":";;AAAA;AACA,CAAC,UAASA,OAAT,EAAkB;AACjB;;AACA,WAASC,eAAT,CAAyBC,QAAzB,EAAmCC,WAAnC,EAAgD;AAC9C,QAAI,EAAED,oBAAoBC,WAAtB,CAAJ,EAAwC;AACtC,YAAM,IAAIC,SAAJ,CAAc,mCAAd,CAAN;AACD;AACF;AACD,MAAIC,WAAWC,QAAQ,YAAR,CAAf;AACA,MAAIC,YAAYD,QAAQ,aAAR,CAAhB;AACA,MAAIE,aAAa,YAAW;AAC1B,aAASA,UAAT,GAAsB;AACpBP,sBAAgB,IAAhB,EAAsBO,UAAtB;AACA,WAAKC,SAAL,GAAiB,EAAjB;AACD;AACDD,eAAWE,SAAX,CAAqBC,GAArB,GAA2B,SAASA,GAAT,CAAaC,GAAb,EAAkB;AAC3C,aAAOC,YAAY,KAAKJ,SAAjB,EAA4BG,GAA5B,EAAiCE,UAAjC,EAAP;AACD,KAFD;AAGAN,eAAWE,SAAX,CAAqBK,UAArB,GAAkC,SAASA,UAAT,CAAoBH,GAApB,EAAyBI,KAAzB,EAAgC;AAChE,UAAIC,QAAQJ,YAAY,KAAKJ,SAAjB,EAA4BG,GAA5B,CAAZ;AACA,OAAC,CAACK,MAAMC,SAAN,EAAF,GAAsBlB,QAAQmB,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwCb,UAAU,KAAV,EAAiB,mCAAjB,EAAsDK,GAAtD,CAAxC,GAAqGL,UAAU,KAAV,CAA3H,GAA8I,KAAK,CAAnJ;AACAU,YAAMI,OAAN,CAAcL,KAAd;AACD,KAJD;AAKAR,eAAWE,SAAX,CAAqBY,SAArB,GAAiC,SAASA,SAAT,CAAmBV,GAAnB,EAAwBW,MAAxB,EAAgC;AAC/D,UAAIN,QAAQJ,YAAY,KAAKJ,SAAjB,EAA4BG,GAA5B,CAAZ;AACA,OAAC,CAACK,MAAMC,SAAN,EAAF,GAAsBlB,QAAQmB,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwCb,UAAU,KAAV,EAAiB,mCAAjB,EAAsDK,GAAtD,CAAxC,GAAqGL,UAAU,KAAV,CAA3H,GAA8I,KAAK,CAAnJ;AACAU,YAAMO,MAAN,CAAaD,MAAb;AACD,KAJD;AAKA,WAAOf,UAAP;AACD,GAnBgB,EAAjB;AAoBA,WAASK,WAAT,CAAqBY,OAArB,EAA8Bb,GAA9B,EAAmC;AACjC,QAAI,CAACa,QAAQC,cAAR,CAAuBd,GAAvB,CAAL,EAAkC;AAChCa,cAAQb,GAAR,IAAe,IAAIP,QAAJ,EAAf;AACD;AACD,WAAOoB,QAAQb,GAAR,CAAP;AACD;AACDe,SAAOC,OAAP,GAAiBpB,UAAjB;AACD,CApCD,EAoCGF,QAAQ,SAAR,CApCH","file":"PromiseMap.js","sourcesContent":["/* */ \n(function(process) {\n  'use strict';\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n  var Deferred = require('./Deferred');\n  var invariant = require('./invariant');\n  var PromiseMap = function() {\n    function PromiseMap() {\n      _classCallCheck(this, PromiseMap);\n      this._deferred = {};\n    }\n    PromiseMap.prototype.get = function get(key) {\n      return getDeferred(this._deferred, key).getPromise();\n    };\n    PromiseMap.prototype.resolveKey = function resolveKey(key, value) {\n      var entry = getDeferred(this._deferred, key);\n      !!entry.isSettled() ? process.env.NODE_ENV !== 'production' ? invariant(false, 'PromiseMap: Already settled `%s`.', key) : invariant(false) : void 0;\n      entry.resolve(value);\n    };\n    PromiseMap.prototype.rejectKey = function rejectKey(key, reason) {\n      var entry = getDeferred(this._deferred, key);\n      !!entry.isSettled() ? process.env.NODE_ENV !== 'production' ? invariant(false, 'PromiseMap: Already settled `%s`.', key) : invariant(false) : void 0;\n      entry.reject(reason);\n    };\n    return PromiseMap;\n  }();\n  function getDeferred(entries, key) {\n    if (!entries.hasOwnProperty(key)) {\n      entries[key] = new Deferred();\n    }\n    return entries[key];\n  }\n  module.exports = PromiseMap;\n})(require('process'));\n"]}