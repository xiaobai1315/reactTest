{"version":3,"sources":["../../../../jspm_packages/npm/stream-browserify@1.0.0/index.js"],"names":["module","exports","Stream","EE","require","EventEmitter","inherits","Readable","Writable","Duplex","Transform","PassThrough","call","prototype","pipe","dest","options","source","ondata","chunk","writable","write","pause","on","ondrain","readable","resume","_isStdio","end","onend","onclose","didOnEnd","destroy","onerror","er","cleanup","listenerCount","removeListener","emit"],"mappings":"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","file":"index.js","sourcesContent":["/* */ \nmodule.exports = Stream;\nvar EE = require('events').EventEmitter;\nvar inherits = require('inherits');\ninherits(Stream, EE);\nStream.Readable = require('readable-stream/readable');\nStream.Writable = require('readable-stream/writable');\nStream.Duplex = require('readable-stream/duplex');\nStream.Transform = require('readable-stream/transform');\nStream.PassThrough = require('readable-stream/passthrough');\nStream.Stream = Stream;\nfunction Stream() {\n  EE.call(this);\n}\nStream.prototype.pipe = function(dest, options) {\n  var source = this;\n  function ondata(chunk) {\n    if (dest.writable) {\n      if (false === dest.write(chunk) && source.pause) {\n        source.pause();\n      }\n    }\n  }\n  source.on('data', ondata);\n  function ondrain() {\n    if (source.readable && source.resume) {\n      source.resume();\n    }\n  }\n  dest.on('drain', ondrain);\n  if (!dest._isStdio && (!options || options.end !== false)) {\n    source.on('end', onend);\n    source.on('close', onclose);\n  }\n  var didOnEnd = false;\n  function onend() {\n    if (didOnEnd)\n      return;\n    didOnEnd = true;\n    dest.end();\n  }\n  function onclose() {\n    if (didOnEnd)\n      return;\n    didOnEnd = true;\n    if (typeof dest.destroy === 'function')\n      dest.destroy();\n  }\n  function onerror(er) {\n    cleanup();\n    if (EE.listenerCount(this, 'error') === 0) {\n      throw er;\n    }\n  }\n  source.on('error', onerror);\n  dest.on('error', onerror);\n  function cleanup() {\n    source.removeListener('data', ondata);\n    dest.removeListener('drain', ondrain);\n    source.removeListener('end', onend);\n    source.removeListener('close', onclose);\n    source.removeListener('error', onerror);\n    dest.removeListener('error', onerror);\n    source.removeListener('end', cleanup);\n    source.removeListener('close', cleanup);\n    dest.removeListener('close', cleanup);\n  }\n  source.on('end', cleanup);\n  source.on('close', cleanup);\n  dest.on('close', cleanup);\n  dest.emit('pipe', source);\n  return dest;\n};\n"]}