{"version":3,"sources":["../../../../../jspm_packages/npm/readable-stream@2.3.3/lib/_stream_writable.js"],"names":["Buffer","process","processNextTick","require","module","exports","Writable","WriteReq","chunk","encoding","cb","callback","next","CorkedRequest","state","_this","entry","finish","onCorkedFinish","asyncWrite","browser","indexOf","version","slice","setImmediate","Duplex","WritableState","util","inherits","internalUtil","deprecate","Stream","OurUint8Array","global","Uint8Array","_uint8ArrayToBuffer","from","_isUint8Array","obj","isBuffer","destroyImpl","nop","options","stream","objectMode","writableObjectMode","hwm","highWaterMark","defaultHwm","Math","floor","finalCalled","needDrain","ending","ended","finished","destroyed","noDecode","decodeStrings","defaultEncoding","length","writing","corked","sync","bufferProcessing","onwrite","er","writecb","writelen","bufferedRequest","lastBufferedRequest","pendingcb","prefinished","errorEmitted","bufferedRequestCount","corkedRequestsFree","prototype","getBuffer","current","out","push","Object","defineProperty","get","_","realHasInstance","Symbol","hasInstance","Function","value","object","call","_writableState","writable","write","_write","writev","_writev","destroy","_destroy","final","_final","pipe","emit","Error","writeAfterEnd","validChunk","valid","TypeError","undefined","ret","isBuf","writeOrBuffer","cork","uncork","clearBuffer","setDefaultEncoding","toLowerCase","decodeChunk","newChunk","len","last","doWrite","onwriteError","finishMaybe","onwriteStateUpdate","needFinish","afterWrite","onwriteDrain","l","buffer","Array","holder","count","allBuffers","end","endWritable","callFinal","err","prefinish","need","once","corkReq","set","_undestroy","undestroy"],"mappings":"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","file":"_stream_writable.js","sourcesContent":["/* */ \n(function(Buffer, process) {\n  'use strict';\n  var processNextTick = require('process-nextick-args');\n  module.exports = Writable;\n  function WriteReq(chunk, encoding, cb) {\n    this.chunk = chunk;\n    this.encoding = encoding;\n    this.callback = cb;\n    this.next = null;\n  }\n  function CorkedRequest(state) {\n    var _this = this;\n    this.next = null;\n    this.entry = null;\n    this.finish = function() {\n      onCorkedFinish(_this, state);\n    };\n  }\n  var asyncWrite = !process.browser && ['v0.10', 'v0.9.'].indexOf(process.version.slice(0, 5)) > -1 ? setImmediate : processNextTick;\n  var Duplex;\n  Writable.WritableState = WritableState;\n  var util = require('core-util-is');\n  util.inherits = require('inherits');\n  var internalUtil = {deprecate: require('util-deprecate')};\n  var Stream = require('./internal/streams/stream-browser');\n  var Buffer = require('safe-buffer').Buffer;\n  var OurUint8Array = global.Uint8Array || function() {};\n  function _uint8ArrayToBuffer(chunk) {\n    return Buffer.from(chunk);\n  }\n  function _isUint8Array(obj) {\n    return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n  }\n  var destroyImpl = require('./internal/streams/destroy');\n  util.inherits(Writable, Stream);\n  function nop() {}\n  function WritableState(options, stream) {\n    Duplex = Duplex || require('./_stream_duplex');\n    options = options || {};\n    this.objectMode = !!options.objectMode;\n    if (stream instanceof Duplex)\n      this.objectMode = this.objectMode || !!options.writableObjectMode;\n    var hwm = options.highWaterMark;\n    var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n    this.highWaterMark = hwm || hwm === 0 ? hwm : defaultHwm;\n    this.highWaterMark = Math.floor(this.highWaterMark);\n    this.finalCalled = false;\n    this.needDrain = false;\n    this.ending = false;\n    this.ended = false;\n    this.finished = false;\n    this.destroyed = false;\n    var noDecode = options.decodeStrings === false;\n    this.decodeStrings = !noDecode;\n    this.defaultEncoding = options.defaultEncoding || 'utf8';\n    this.length = 0;\n    this.writing = false;\n    this.corked = 0;\n    this.sync = true;\n    this.bufferProcessing = false;\n    this.onwrite = function(er) {\n      onwrite(stream, er);\n    };\n    this.writecb = null;\n    this.writelen = 0;\n    this.bufferedRequest = null;\n    this.lastBufferedRequest = null;\n    this.pendingcb = 0;\n    this.prefinished = false;\n    this.errorEmitted = false;\n    this.bufferedRequestCount = 0;\n    this.corkedRequestsFree = new CorkedRequest(this);\n  }\n  WritableState.prototype.getBuffer = function getBuffer() {\n    var current = this.bufferedRequest;\n    var out = [];\n    while (current) {\n      out.push(current);\n      current = current.next;\n    }\n    return out;\n  };\n  (function() {\n    try {\n      Object.defineProperty(WritableState.prototype, 'buffer', {get: internalUtil.deprecate(function() {\n          return this.getBuffer();\n        }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')});\n    } catch (_) {}\n  })();\n  var realHasInstance;\n  if (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {\n    realHasInstance = Function.prototype[Symbol.hasInstance];\n    Object.defineProperty(Writable, Symbol.hasInstance, {value: function(object) {\n        if (realHasInstance.call(this, object))\n          return true;\n        return object && object._writableState instanceof WritableState;\n      }});\n  } else {\n    realHasInstance = function(object) {\n      return object instanceof this;\n    };\n  }\n  function Writable(options) {\n    Duplex = Duplex || require('./_stream_duplex');\n    if (!realHasInstance.call(Writable, this) && !(this instanceof Duplex)) {\n      return new Writable(options);\n    }\n    this._writableState = new WritableState(options, this);\n    this.writable = true;\n    if (options) {\n      if (typeof options.write === 'function')\n        this._write = options.write;\n      if (typeof options.writev === 'function')\n        this._writev = options.writev;\n      if (typeof options.destroy === 'function')\n        this._destroy = options.destroy;\n      if (typeof options.final === 'function')\n        this._final = options.final;\n    }\n    Stream.call(this);\n  }\n  Writable.prototype.pipe = function() {\n    this.emit('error', new Error('Cannot pipe, not readable'));\n  };\n  function writeAfterEnd(stream, cb) {\n    var er = new Error('write after end');\n    stream.emit('error', er);\n    processNextTick(cb, er);\n  }\n  function validChunk(stream, state, chunk, cb) {\n    var valid = true;\n    var er = false;\n    if (chunk === null) {\n      er = new TypeError('May not write null values to stream');\n    } else if (typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n      er = new TypeError('Invalid non-string/buffer chunk');\n    }\n    if (er) {\n      stream.emit('error', er);\n      processNextTick(cb, er);\n      valid = false;\n    }\n    return valid;\n  }\n  Writable.prototype.write = function(chunk, encoding, cb) {\n    var state = this._writableState;\n    var ret = false;\n    var isBuf = _isUint8Array(chunk) && !state.objectMode;\n    if (isBuf && !Buffer.isBuffer(chunk)) {\n      chunk = _uint8ArrayToBuffer(chunk);\n    }\n    if (typeof encoding === 'function') {\n      cb = encoding;\n      encoding = null;\n    }\n    if (isBuf)\n      encoding = 'buffer';\n    else if (!encoding)\n      encoding = state.defaultEncoding;\n    if (typeof cb !== 'function')\n      cb = nop;\n    if (state.ended)\n      writeAfterEnd(this, cb);\n    else if (isBuf || validChunk(this, state, chunk, cb)) {\n      state.pendingcb++;\n      ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);\n    }\n    return ret;\n  };\n  Writable.prototype.cork = function() {\n    var state = this._writableState;\n    state.corked++;\n  };\n  Writable.prototype.uncork = function() {\n    var state = this._writableState;\n    if (state.corked) {\n      state.corked--;\n      if (!state.writing && !state.corked && !state.finished && !state.bufferProcessing && state.bufferedRequest)\n        clearBuffer(this, state);\n    }\n  };\n  Writable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n    if (typeof encoding === 'string')\n      encoding = encoding.toLowerCase();\n    if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1))\n      throw new TypeError('Unknown encoding: ' + encoding);\n    this._writableState.defaultEncoding = encoding;\n    return this;\n  };\n  function decodeChunk(state, chunk, encoding) {\n    if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n      chunk = Buffer.from(chunk, encoding);\n    }\n    return chunk;\n  }\n  function writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {\n    if (!isBuf) {\n      var newChunk = decodeChunk(state, chunk, encoding);\n      if (chunk !== newChunk) {\n        isBuf = true;\n        encoding = 'buffer';\n        chunk = newChunk;\n      }\n    }\n    var len = state.objectMode ? 1 : chunk.length;\n    state.length += len;\n    var ret = state.length < state.highWaterMark;\n    if (!ret)\n      state.needDrain = true;\n    if (state.writing || state.corked) {\n      var last = state.lastBufferedRequest;\n      state.lastBufferedRequest = {\n        chunk: chunk,\n        encoding: encoding,\n        isBuf: isBuf,\n        callback: cb,\n        next: null\n      };\n      if (last) {\n        last.next = state.lastBufferedRequest;\n      } else {\n        state.bufferedRequest = state.lastBufferedRequest;\n      }\n      state.bufferedRequestCount += 1;\n    } else {\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n    }\n    return ret;\n  }\n  function doWrite(stream, state, writev, len, chunk, encoding, cb) {\n    state.writelen = len;\n    state.writecb = cb;\n    state.writing = true;\n    state.sync = true;\n    if (writev)\n      stream._writev(chunk, state.onwrite);\n    else\n      stream._write(chunk, encoding, state.onwrite);\n    state.sync = false;\n  }\n  function onwriteError(stream, state, sync, er, cb) {\n    --state.pendingcb;\n    if (sync) {\n      processNextTick(cb, er);\n      processNextTick(finishMaybe, stream, state);\n      stream._writableState.errorEmitted = true;\n      stream.emit('error', er);\n    } else {\n      cb(er);\n      stream._writableState.errorEmitted = true;\n      stream.emit('error', er);\n      finishMaybe(stream, state);\n    }\n  }\n  function onwriteStateUpdate(state) {\n    state.writing = false;\n    state.writecb = null;\n    state.length -= state.writelen;\n    state.writelen = 0;\n  }\n  function onwrite(stream, er) {\n    var state = stream._writableState;\n    var sync = state.sync;\n    var cb = state.writecb;\n    onwriteStateUpdate(state);\n    if (er)\n      onwriteError(stream, state, sync, er, cb);\n    else {\n      var finished = needFinish(state);\n      if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n        clearBuffer(stream, state);\n      }\n      if (sync) {\n        asyncWrite(afterWrite, stream, state, finished, cb);\n      } else {\n        afterWrite(stream, state, finished, cb);\n      }\n    }\n  }\n  function afterWrite(stream, state, finished, cb) {\n    if (!finished)\n      onwriteDrain(stream, state);\n    state.pendingcb--;\n    cb();\n    finishMaybe(stream, state);\n  }\n  function onwriteDrain(stream, state) {\n    if (state.length === 0 && state.needDrain) {\n      state.needDrain = false;\n      stream.emit('drain');\n    }\n  }\n  function clearBuffer(stream, state) {\n    state.bufferProcessing = true;\n    var entry = state.bufferedRequest;\n    if (stream._writev && entry && entry.next) {\n      var l = state.bufferedRequestCount;\n      var buffer = new Array(l);\n      var holder = state.corkedRequestsFree;\n      holder.entry = entry;\n      var count = 0;\n      var allBuffers = true;\n      while (entry) {\n        buffer[count] = entry;\n        if (!entry.isBuf)\n          allBuffers = false;\n        entry = entry.next;\n        count += 1;\n      }\n      buffer.allBuffers = allBuffers;\n      doWrite(stream, state, true, state.length, buffer, '', holder.finish);\n      state.pendingcb++;\n      state.lastBufferedRequest = null;\n      if (holder.next) {\n        state.corkedRequestsFree = holder.next;\n        holder.next = null;\n      } else {\n        state.corkedRequestsFree = new CorkedRequest(state);\n      }\n    } else {\n      while (entry) {\n        var chunk = entry.chunk;\n        var encoding = entry.encoding;\n        var cb = entry.callback;\n        var len = state.objectMode ? 1 : chunk.length;\n        doWrite(stream, state, false, len, chunk, encoding, cb);\n        entry = entry.next;\n        if (state.writing) {\n          break;\n        }\n      }\n      if (entry === null)\n        state.lastBufferedRequest = null;\n    }\n    state.bufferedRequestCount = 0;\n    state.bufferedRequest = entry;\n    state.bufferProcessing = false;\n  }\n  Writable.prototype._write = function(chunk, encoding, cb) {\n    cb(new Error('_write() is not implemented'));\n  };\n  Writable.prototype._writev = null;\n  Writable.prototype.end = function(chunk, encoding, cb) {\n    var state = this._writableState;\n    if (typeof chunk === 'function') {\n      cb = chunk;\n      chunk = null;\n      encoding = null;\n    } else if (typeof encoding === 'function') {\n      cb = encoding;\n      encoding = null;\n    }\n    if (chunk !== null && chunk !== undefined)\n      this.write(chunk, encoding);\n    if (state.corked) {\n      state.corked = 1;\n      this.uncork();\n    }\n    if (!state.ending && !state.finished)\n      endWritable(this, state, cb);\n  };\n  function needFinish(state) {\n    return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n  }\n  function callFinal(stream, state) {\n    stream._final(function(err) {\n      state.pendingcb--;\n      if (err) {\n        stream.emit('error', err);\n      }\n      state.prefinished = true;\n      stream.emit('prefinish');\n      finishMaybe(stream, state);\n    });\n  }\n  function prefinish(stream, state) {\n    if (!state.prefinished && !state.finalCalled) {\n      if (typeof stream._final === 'function') {\n        state.pendingcb++;\n        state.finalCalled = true;\n        processNextTick(callFinal, stream, state);\n      } else {\n        state.prefinished = true;\n        stream.emit('prefinish');\n      }\n    }\n  }\n  function finishMaybe(stream, state) {\n    var need = needFinish(state);\n    if (need) {\n      prefinish(stream, state);\n      if (state.pendingcb === 0) {\n        state.finished = true;\n        stream.emit('finish');\n      }\n    }\n    return need;\n  }\n  function endWritable(stream, state, cb) {\n    state.ending = true;\n    finishMaybe(stream, state);\n    if (cb) {\n      if (state.finished)\n        processNextTick(cb);\n      else\n        stream.once('finish', cb);\n    }\n    state.ended = true;\n    stream.writable = false;\n  }\n  function onCorkedFinish(corkReq, state, err) {\n    var entry = corkReq.entry;\n    corkReq.entry = null;\n    while (entry) {\n      var cb = entry.callback;\n      state.pendingcb--;\n      cb(err);\n      entry = entry.next;\n    }\n    if (state.corkedRequestsFree) {\n      state.corkedRequestsFree.next = corkReq;\n    } else {\n      state.corkedRequestsFree = corkReq;\n    }\n  }\n  Object.defineProperty(Writable.prototype, 'destroyed', {\n    get: function() {\n      if (this._writableState === undefined) {\n        return false;\n      }\n      return this._writableState.destroyed;\n    },\n    set: function(value) {\n      if (!this._writableState) {\n        return;\n      }\n      this._writableState.destroyed = value;\n    }\n  });\n  Writable.prototype.destroy = destroyImpl.destroy;\n  Writable.prototype._undestroy = destroyImpl.undestroy;\n  Writable.prototype._destroy = function(err, cb) {\n    this.end();\n    cb(err);\n  };\n})(require('buffer').Buffer, require('process'));\n"]}