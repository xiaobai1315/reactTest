{"version":3,"sources":["../../../../../jspm_packages/npm/readable-stream@2.3.3/lib/_stream_duplex.js"],"names":["process","processNextTick","require","objectKeys","Object","keys","obj","key","push","module","exports","Duplex","util","inherits","Readable","Writable","prototype","v","length","method","options","call","readable","writable","allowHalfOpen","once","onend","_writableState","ended","onEndNT","self","end","defineProperty","get","_readableState","undefined","destroyed","set","value","_destroy","err","cb","forEach","xs","f","i","l"],"mappings":"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","file":"_stream_duplex.js","sourcesContent":["/* */ \n(function(process) {\n  'use strict';\n  var processNextTick = require('process-nextick-args');\n  var objectKeys = Object.keys || function(obj) {\n    var keys = [];\n    for (var key in obj) {\n      keys.push(key);\n    }\n    return keys;\n  };\n  module.exports = Duplex;\n  var util = require('core-util-is');\n  util.inherits = require('inherits');\n  var Readable = require('./_stream_readable');\n  var Writable = require('./_stream_writable');\n  util.inherits(Duplex, Readable);\n  var keys = objectKeys(Writable.prototype);\n  for (var v = 0; v < keys.length; v++) {\n    var method = keys[v];\n    if (!Duplex.prototype[method])\n      Duplex.prototype[method] = Writable.prototype[method];\n  }\n  function Duplex(options) {\n    if (!(this instanceof Duplex))\n      return new Duplex(options);\n    Readable.call(this, options);\n    Writable.call(this, options);\n    if (options && options.readable === false)\n      this.readable = false;\n    if (options && options.writable === false)\n      this.writable = false;\n    this.allowHalfOpen = true;\n    if (options && options.allowHalfOpen === false)\n      this.allowHalfOpen = false;\n    this.once('end', onend);\n  }\n  function onend() {\n    if (this.allowHalfOpen || this._writableState.ended)\n      return;\n    processNextTick(onEndNT, this);\n  }\n  function onEndNT(self) {\n    self.end();\n  }\n  Object.defineProperty(Duplex.prototype, 'destroyed', {\n    get: function() {\n      if (this._readableState === undefined || this._writableState === undefined) {\n        return false;\n      }\n      return this._readableState.destroyed && this._writableState.destroyed;\n    },\n    set: function(value) {\n      if (this._readableState === undefined || this._writableState === undefined) {\n        return;\n      }\n      this._readableState.destroyed = value;\n      this._writableState.destroyed = value;\n    }\n  });\n  Duplex.prototype._destroy = function(err, cb) {\n    this.push(null);\n    this.end();\n    processNextTick(cb, err);\n  };\n  function forEach(xs, f) {\n    for (var i = 0,\n        l = xs.length; i < l; i++) {\n      f(xs[i], i);\n    }\n  }\n})(require('process'));\n"]}