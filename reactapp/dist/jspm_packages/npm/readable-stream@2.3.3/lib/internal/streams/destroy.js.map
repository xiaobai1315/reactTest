{"version":3,"sources":["../../../../../../../jspm_packages/npm/readable-stream@2.3.3/lib/internal/streams/destroy.js"],"names":["process","processNextTick","require","destroy","err","cb","_this","readableDestroyed","_readableState","destroyed","writableDestroyed","_writableState","errorEmitted","emitErrorNT","_destroy","undestroy","reading","ended","endEmitted","ending","finished","self","emit","module","exports"],"mappings":";;AAAA;AACA,CAAC,UAASA,OAAT,EAAkB;AACjB;;AACA,MAAIC,kBAAkBC,QAAQ,sBAAR,CAAtB;AACA,WAASC,OAAT,CAAiBC,GAAjB,EAAsBC,EAAtB,EAA0B;AACxB,QAAIC,QAAQ,IAAZ;AACA,QAAIC,oBAAoB,KAAKC,cAAL,IAAuB,KAAKA,cAAL,CAAoBC,SAAnE;AACA,QAAIC,oBAAoB,KAAKC,cAAL,IAAuB,KAAKA,cAAL,CAAoBF,SAAnE;AACA,QAAIF,qBAAqBG,iBAAzB,EAA4C;AAC1C,UAAIL,EAAJ,EAAQ;AACNA,WAAGD,GAAH;AACD,OAFD,MAEO,IAAIA,QAAQ,CAAC,KAAKO,cAAN,IAAwB,CAAC,KAAKA,cAAL,CAAoBC,YAArD,CAAJ,EAAwE;AAC7EX,wBAAgBY,WAAhB,EAA6B,IAA7B,EAAmCT,GAAnC;AACD;AACD;AACD;AACD,QAAI,KAAKI,cAAT,EAAyB;AACvB,WAAKA,cAAL,CAAoBC,SAApB,GAAgC,IAAhC;AACD;AACD,QAAI,KAAKE,cAAT,EAAyB;AACvB,WAAKA,cAAL,CAAoBF,SAApB,GAAgC,IAAhC;AACD;AACD,SAAKK,QAAL,CAAcV,OAAO,IAArB,EAA2B,UAASA,GAAT,EAAc;AACvC,UAAI,CAACC,EAAD,IAAOD,GAAX,EAAgB;AACdH,wBAAgBY,WAAhB,EAA6BP,KAA7B,EAAoCF,GAApC;AACA,YAAIE,MAAMK,cAAV,EAA0B;AACxBL,gBAAMK,cAAN,CAAqBC,YAArB,GAAoC,IAApC;AACD;AACF,OALD,MAKO,IAAIP,EAAJ,EAAQ;AACbA,WAAGD,GAAH;AACD;AACF,KATD;AAUD;AACD,WAASW,SAAT,GAAqB;AACnB,QAAI,KAAKP,cAAT,EAAyB;AACvB,WAAKA,cAAL,CAAoBC,SAApB,GAAgC,KAAhC;AACA,WAAKD,cAAL,CAAoBQ,OAApB,GAA8B,KAA9B;AACA,WAAKR,cAAL,CAAoBS,KAApB,GAA4B,KAA5B;AACA,WAAKT,cAAL,CAAoBU,UAApB,GAAiC,KAAjC;AACD;AACD,QAAI,KAAKP,cAAT,EAAyB;AACvB,WAAKA,cAAL,CAAoBF,SAApB,GAAgC,KAAhC;AACA,WAAKE,cAAL,CAAoBM,KAApB,GAA4B,KAA5B;AACA,WAAKN,cAAL,CAAoBQ,MAApB,GAA6B,KAA7B;AACA,WAAKR,cAAL,CAAoBS,QAApB,GAA+B,KAA/B;AACA,WAAKT,cAAL,CAAoBC,YAApB,GAAmC,KAAnC;AACD;AACF;AACD,WAASC,WAAT,CAAqBQ,IAArB,EAA2BjB,GAA3B,EAAgC;AAC9BiB,SAAKC,IAAL,CAAU,OAAV,EAAmBlB,GAAnB;AACD;AACDmB,SAAOC,OAAP,GAAiB;AACfrB,aAASA,OADM;AAEfY,eAAWA;AAFI,GAAjB;AAID,CAtDD,EAsDGb,QAAQ,SAAR,CAtDH","file":"destroy.js","sourcesContent":["/* */ \n(function(process) {\n  'use strict';\n  var processNextTick = require('process-nextick-args');\n  function destroy(err, cb) {\n    var _this = this;\n    var readableDestroyed = this._readableState && this._readableState.destroyed;\n    var writableDestroyed = this._writableState && this._writableState.destroyed;\n    if (readableDestroyed || writableDestroyed) {\n      if (cb) {\n        cb(err);\n      } else if (err && (!this._writableState || !this._writableState.errorEmitted)) {\n        processNextTick(emitErrorNT, this, err);\n      }\n      return;\n    }\n    if (this._readableState) {\n      this._readableState.destroyed = true;\n    }\n    if (this._writableState) {\n      this._writableState.destroyed = true;\n    }\n    this._destroy(err || null, function(err) {\n      if (!cb && err) {\n        processNextTick(emitErrorNT, _this, err);\n        if (_this._writableState) {\n          _this._writableState.errorEmitted = true;\n        }\n      } else if (cb) {\n        cb(err);\n      }\n    });\n  }\n  function undestroy() {\n    if (this._readableState) {\n      this._readableState.destroyed = false;\n      this._readableState.reading = false;\n      this._readableState.ended = false;\n      this._readableState.endEmitted = false;\n    }\n    if (this._writableState) {\n      this._writableState.destroyed = false;\n      this._writableState.ended = false;\n      this._writableState.ending = false;\n      this._writableState.finished = false;\n      this._writableState.errorEmitted = false;\n    }\n  }\n  function emitErrorNT(self, err) {\n    self.emit('error', err);\n  }\n  module.exports = {\n    destroy: destroy,\n    undestroy: undestroy\n  };\n})(require('process'));\n"]}