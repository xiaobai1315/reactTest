{"version":3,"sources":["../../../../../jspm_packages/npm/react@15.6.1/lib/update.js"],"names":["process","_prodInvariant","require","_assign","invariant","hasOwnProperty","shallowCopy","x","Array","isArray","concat","constructor","COMMAND_PUSH","COMMAND_UNSHIFT","COMMAND_SPLICE","COMMAND_SET","COMMAND_MERGE","COMMAND_APPLY","ALL_COMMANDS_LIST","ALL_COMMANDS_SET","forEach","command","invariantArrayCase","value","spec","env","NODE_ENV","specValue","update","join","call","Object","keys","length","nextValue","mergeObj","item","push","unshift","args","splice","apply","k","module","exports"],"mappings":"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","file":"update.js","sourcesContent":["/* */ \n(function(process) {\n  'use strict';\n  var _prodInvariant = require('./reactProdInvariant'),\n      _assign = require('object-assign');\n  var invariant = require('fbjs/lib/invariant');\n  var hasOwnProperty = {}.hasOwnProperty;\n  function shallowCopy(x) {\n    if (Array.isArray(x)) {\n      return x.concat();\n    } else if (x && typeof x === 'object') {\n      return _assign(new x.constructor(), x);\n    } else {\n      return x;\n    }\n  }\n  var COMMAND_PUSH = '$push';\n  var COMMAND_UNSHIFT = '$unshift';\n  var COMMAND_SPLICE = '$splice';\n  var COMMAND_SET = '$set';\n  var COMMAND_MERGE = '$merge';\n  var COMMAND_APPLY = '$apply';\n  var ALL_COMMANDS_LIST = [COMMAND_PUSH, COMMAND_UNSHIFT, COMMAND_SPLICE, COMMAND_SET, COMMAND_MERGE, COMMAND_APPLY];\n  var ALL_COMMANDS_SET = {};\n  ALL_COMMANDS_LIST.forEach(function(command) {\n    ALL_COMMANDS_SET[command] = true;\n  });\n  function invariantArrayCase(value, spec, command) {\n    !Array.isArray(value) ? process.env.NODE_ENV !== 'production' ? invariant(false, 'update(): expected target of %s to be an array; got %s.', command, value) : _prodInvariant('1', command, value) : void 0;\n    var specValue = spec[command];\n    !Array.isArray(specValue) ? process.env.NODE_ENV !== 'production' ? invariant(false, 'update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?', command, specValue) : _prodInvariant('2', command, specValue) : void 0;\n  }\n  function update(value, spec) {\n    !(typeof spec === 'object') ? process.env.NODE_ENV !== 'production' ? invariant(false, 'update(): You provided a key path to update() that did not contain one of %s. Did you forget to include {%s: ...}?', ALL_COMMANDS_LIST.join(', '), COMMAND_SET) : _prodInvariant('3', ALL_COMMANDS_LIST.join(', '), COMMAND_SET) : void 0;\n    if (hasOwnProperty.call(spec, COMMAND_SET)) {\n      !(Object.keys(spec).length === 1) ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Cannot have more than one key in an object with %s', COMMAND_SET) : _prodInvariant('4', COMMAND_SET) : void 0;\n      return spec[COMMAND_SET];\n    }\n    var nextValue = shallowCopy(value);\n    if (hasOwnProperty.call(spec, COMMAND_MERGE)) {\n      var mergeObj = spec[COMMAND_MERGE];\n      !(mergeObj && typeof mergeObj === 'object') ? process.env.NODE_ENV !== 'production' ? invariant(false, 'update(): %s expects a spec of type \\'object\\'; got %s', COMMAND_MERGE, mergeObj) : _prodInvariant('5', COMMAND_MERGE, mergeObj) : void 0;\n      !(nextValue && typeof nextValue === 'object') ? process.env.NODE_ENV !== 'production' ? invariant(false, 'update(): %s expects a target of type \\'object\\'; got %s', COMMAND_MERGE, nextValue) : _prodInvariant('6', COMMAND_MERGE, nextValue) : void 0;\n      _assign(nextValue, spec[COMMAND_MERGE]);\n    }\n    if (hasOwnProperty.call(spec, COMMAND_PUSH)) {\n      invariantArrayCase(value, spec, COMMAND_PUSH);\n      spec[COMMAND_PUSH].forEach(function(item) {\n        nextValue.push(item);\n      });\n    }\n    if (hasOwnProperty.call(spec, COMMAND_UNSHIFT)) {\n      invariantArrayCase(value, spec, COMMAND_UNSHIFT);\n      spec[COMMAND_UNSHIFT].forEach(function(item) {\n        nextValue.unshift(item);\n      });\n    }\n    if (hasOwnProperty.call(spec, COMMAND_SPLICE)) {\n      !Array.isArray(value) ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Expected %s target to be an array; got %s', COMMAND_SPLICE, value) : _prodInvariant('7', COMMAND_SPLICE, value) : void 0;\n      !Array.isArray(spec[COMMAND_SPLICE]) ? process.env.NODE_ENV !== 'production' ? invariant(false, 'update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?', COMMAND_SPLICE, spec[COMMAND_SPLICE]) : _prodInvariant('8', COMMAND_SPLICE, spec[COMMAND_SPLICE]) : void 0;\n      spec[COMMAND_SPLICE].forEach(function(args) {\n        !Array.isArray(args) ? process.env.NODE_ENV !== 'production' ? invariant(false, 'update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?', COMMAND_SPLICE, spec[COMMAND_SPLICE]) : _prodInvariant('8', COMMAND_SPLICE, spec[COMMAND_SPLICE]) : void 0;\n        nextValue.splice.apply(nextValue, args);\n      });\n    }\n    if (hasOwnProperty.call(spec, COMMAND_APPLY)) {\n      !(typeof spec[COMMAND_APPLY] === 'function') ? process.env.NODE_ENV !== 'production' ? invariant(false, 'update(): expected spec of %s to be a function; got %s.', COMMAND_APPLY, spec[COMMAND_APPLY]) : _prodInvariant('9', COMMAND_APPLY, spec[COMMAND_APPLY]) : void 0;\n      nextValue = spec[COMMAND_APPLY](nextValue);\n    }\n    for (var k in spec) {\n      if (!(ALL_COMMANDS_SET.hasOwnProperty(k) && ALL_COMMANDS_SET[k])) {\n        nextValue[k] = update(value[k], spec[k]);\n      }\n    }\n    return nextValue;\n  }\n  module.exports = update;\n})(require('process'));\n"]}