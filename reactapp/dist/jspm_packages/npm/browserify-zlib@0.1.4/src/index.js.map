{"version":3,"sources":["../../../../../jspm_packages/npm/browserify-zlib@0.1.4/src/index.js"],"names":["Buffer","process","Transform","require","binding","util","assert","ok","Z_MIN_WINDOWBITS","Z_MAX_WINDOWBITS","Z_DEFAULT_WINDOWBITS","Z_MIN_CHUNK","Z_MAX_CHUNK","Infinity","Z_DEFAULT_CHUNK","Z_MIN_MEMLEVEL","Z_MAX_MEMLEVEL","Z_DEFAULT_MEMLEVEL","Z_MIN_LEVEL","Z_MAX_LEVEL","Z_DEFAULT_LEVEL","Z_DEFAULT_COMPRESSION","Object","keys","forEach","k","match","exports","codes","Z_OK","Z_STREAM_END","Z_NEED_DICT","Z_ERRNO","Z_STREAM_ERROR","Z_DATA_ERROR","Z_MEM_ERROR","Z_BUF_ERROR","Z_VERSION_ERROR","Deflate","Inflate","Gzip","Gunzip","DeflateRaw","InflateRaw","Unzip","createDeflate","o","createInflate","createDeflateRaw","createInflateRaw","createGzip","createGunzip","createUnzip","deflate","buffer","opts","callback","zlibBuffer","deflateSync","zlibBufferSync","gzip","gzipSync","deflateRaw","deflateRawSync","unzip","unzipSync","inflate","inflateSync","gunzip","gunzipSync","inflateRaw","inflateRawSync","engine","buffers","nread","on","onError","onEnd","end","flow","chunk","read","push","length","once","err","removeListener","buf","concat","close","isBuffer","TypeError","flushFlag","Z_FINISH","_processChunk","Zlib","call","DEFLATE","INFLATE","GZIP","GUNZIP","DEFLATERAW","INFLATERAW","UNZIP","mode","_opts","_chunkSize","chunkSize","flush","Z_NO_FLUSH","Z_PARTIAL_FLUSH","Z_SYNC_FLUSH","Z_FULL_FLUSH","Z_BLOCK","Error","_flushFlag","windowBits","level","memLevel","strategy","Z_FILTERED","Z_HUFFMAN_ONLY","Z_RLE","Z_FIXED","Z_DEFAULT_STRATEGY","dictionary","_binding","self","_hadError","onerror","message","errno","error","code","emit","init","_buffer","_offset","_closed","_level","_strategy","inherits","prototype","params","RangeError","nextTick","reset","_flush","_transform","kind","ws","_writableState","ended","ending","needDrain","write","encoding","cb","last","availInBefore","availOutBefore","inOff","async","er","res","writeSync","req","availInAfter","availOutAfter","have","out","slice","newReq"],"mappings":"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","file":"index.js","sourcesContent":["/* */ \n(function(Buffer, process) {\n  var Transform = require('readable-stream/transform');\n  var binding = require('./binding');\n  var util = require('util');\n  var assert = require('assert').ok;\n  binding.Z_MIN_WINDOWBITS = 8;\n  binding.Z_MAX_WINDOWBITS = 15;\n  binding.Z_DEFAULT_WINDOWBITS = 15;\n  binding.Z_MIN_CHUNK = 64;\n  binding.Z_MAX_CHUNK = Infinity;\n  binding.Z_DEFAULT_CHUNK = (16 * 1024);\n  binding.Z_MIN_MEMLEVEL = 1;\n  binding.Z_MAX_MEMLEVEL = 9;\n  binding.Z_DEFAULT_MEMLEVEL = 8;\n  binding.Z_MIN_LEVEL = -1;\n  binding.Z_MAX_LEVEL = 9;\n  binding.Z_DEFAULT_LEVEL = binding.Z_DEFAULT_COMPRESSION;\n  Object.keys(binding).forEach(function(k) {\n    if (k.match(/^Z/))\n      exports[k] = binding[k];\n  });\n  exports.codes = {\n    Z_OK: binding.Z_OK,\n    Z_STREAM_END: binding.Z_STREAM_END,\n    Z_NEED_DICT: binding.Z_NEED_DICT,\n    Z_ERRNO: binding.Z_ERRNO,\n    Z_STREAM_ERROR: binding.Z_STREAM_ERROR,\n    Z_DATA_ERROR: binding.Z_DATA_ERROR,\n    Z_MEM_ERROR: binding.Z_MEM_ERROR,\n    Z_BUF_ERROR: binding.Z_BUF_ERROR,\n    Z_VERSION_ERROR: binding.Z_VERSION_ERROR\n  };\n  Object.keys(exports.codes).forEach(function(k) {\n    exports.codes[exports.codes[k]] = k;\n  });\n  exports.Deflate = Deflate;\n  exports.Inflate = Inflate;\n  exports.Gzip = Gzip;\n  exports.Gunzip = Gunzip;\n  exports.DeflateRaw = DeflateRaw;\n  exports.InflateRaw = InflateRaw;\n  exports.Unzip = Unzip;\n  exports.createDeflate = function(o) {\n    return new Deflate(o);\n  };\n  exports.createInflate = function(o) {\n    return new Inflate(o);\n  };\n  exports.createDeflateRaw = function(o) {\n    return new DeflateRaw(o);\n  };\n  exports.createInflateRaw = function(o) {\n    return new InflateRaw(o);\n  };\n  exports.createGzip = function(o) {\n    return new Gzip(o);\n  };\n  exports.createGunzip = function(o) {\n    return new Gunzip(o);\n  };\n  exports.createUnzip = function(o) {\n    return new Unzip(o);\n  };\n  exports.deflate = function(buffer, opts, callback) {\n    if (typeof opts === 'function') {\n      callback = opts;\n      opts = {};\n    }\n    return zlibBuffer(new Deflate(opts), buffer, callback);\n  };\n  exports.deflateSync = function(buffer, opts) {\n    return zlibBufferSync(new Deflate(opts), buffer);\n  };\n  exports.gzip = function(buffer, opts, callback) {\n    if (typeof opts === 'function') {\n      callback = opts;\n      opts = {};\n    }\n    return zlibBuffer(new Gzip(opts), buffer, callback);\n  };\n  exports.gzipSync = function(buffer, opts) {\n    return zlibBufferSync(new Gzip(opts), buffer);\n  };\n  exports.deflateRaw = function(buffer, opts, callback) {\n    if (typeof opts === 'function') {\n      callback = opts;\n      opts = {};\n    }\n    return zlibBuffer(new DeflateRaw(opts), buffer, callback);\n  };\n  exports.deflateRawSync = function(buffer, opts) {\n    return zlibBufferSync(new DeflateRaw(opts), buffer);\n  };\n  exports.unzip = function(buffer, opts, callback) {\n    if (typeof opts === 'function') {\n      callback = opts;\n      opts = {};\n    }\n    return zlibBuffer(new Unzip(opts), buffer, callback);\n  };\n  exports.unzipSync = function(buffer, opts) {\n    return zlibBufferSync(new Unzip(opts), buffer);\n  };\n  exports.inflate = function(buffer, opts, callback) {\n    if (typeof opts === 'function') {\n      callback = opts;\n      opts = {};\n    }\n    return zlibBuffer(new Inflate(opts), buffer, callback);\n  };\n  exports.inflateSync = function(buffer, opts) {\n    return zlibBufferSync(new Inflate(opts), buffer);\n  };\n  exports.gunzip = function(buffer, opts, callback) {\n    if (typeof opts === 'function') {\n      callback = opts;\n      opts = {};\n    }\n    return zlibBuffer(new Gunzip(opts), buffer, callback);\n  };\n  exports.gunzipSync = function(buffer, opts) {\n    return zlibBufferSync(new Gunzip(opts), buffer);\n  };\n  exports.inflateRaw = function(buffer, opts, callback) {\n    if (typeof opts === 'function') {\n      callback = opts;\n      opts = {};\n    }\n    return zlibBuffer(new InflateRaw(opts), buffer, callback);\n  };\n  exports.inflateRawSync = function(buffer, opts) {\n    return zlibBufferSync(new InflateRaw(opts), buffer);\n  };\n  function zlibBuffer(engine, buffer, callback) {\n    var buffers = [];\n    var nread = 0;\n    engine.on('error', onError);\n    engine.on('end', onEnd);\n    engine.end(buffer);\n    flow();\n    function flow() {\n      var chunk;\n      while (null !== (chunk = engine.read())) {\n        buffers.push(chunk);\n        nread += chunk.length;\n      }\n      engine.once('readable', flow);\n    }\n    function onError(err) {\n      engine.removeListener('end', onEnd);\n      engine.removeListener('readable', flow);\n      callback(err);\n    }\n    function onEnd() {\n      var buf = Buffer.concat(buffers, nread);\n      buffers = [];\n      callback(null, buf);\n      engine.close();\n    }\n  }\n  function zlibBufferSync(engine, buffer) {\n    if (typeof buffer === 'string')\n      buffer = new Buffer(buffer);\n    if (!Buffer.isBuffer(buffer))\n      throw new TypeError('Not a string or buffer');\n    var flushFlag = binding.Z_FINISH;\n    return engine._processChunk(buffer, flushFlag);\n  }\n  function Deflate(opts) {\n    if (!(this instanceof Deflate))\n      return new Deflate(opts);\n    Zlib.call(this, opts, binding.DEFLATE);\n  }\n  function Inflate(opts) {\n    if (!(this instanceof Inflate))\n      return new Inflate(opts);\n    Zlib.call(this, opts, binding.INFLATE);\n  }\n  function Gzip(opts) {\n    if (!(this instanceof Gzip))\n      return new Gzip(opts);\n    Zlib.call(this, opts, binding.GZIP);\n  }\n  function Gunzip(opts) {\n    if (!(this instanceof Gunzip))\n      return new Gunzip(opts);\n    Zlib.call(this, opts, binding.GUNZIP);\n  }\n  function DeflateRaw(opts) {\n    if (!(this instanceof DeflateRaw))\n      return new DeflateRaw(opts);\n    Zlib.call(this, opts, binding.DEFLATERAW);\n  }\n  function InflateRaw(opts) {\n    if (!(this instanceof InflateRaw))\n      return new InflateRaw(opts);\n    Zlib.call(this, opts, binding.INFLATERAW);\n  }\n  function Unzip(opts) {\n    if (!(this instanceof Unzip))\n      return new Unzip(opts);\n    Zlib.call(this, opts, binding.UNZIP);\n  }\n  function Zlib(opts, mode) {\n    this._opts = opts = opts || {};\n    this._chunkSize = opts.chunkSize || exports.Z_DEFAULT_CHUNK;\n    Transform.call(this, opts);\n    if (opts.flush) {\n      if (opts.flush !== binding.Z_NO_FLUSH && opts.flush !== binding.Z_PARTIAL_FLUSH && opts.flush !== binding.Z_SYNC_FLUSH && opts.flush !== binding.Z_FULL_FLUSH && opts.flush !== binding.Z_FINISH && opts.flush !== binding.Z_BLOCK) {\n        throw new Error('Invalid flush flag: ' + opts.flush);\n      }\n    }\n    this._flushFlag = opts.flush || binding.Z_NO_FLUSH;\n    if (opts.chunkSize) {\n      if (opts.chunkSize < exports.Z_MIN_CHUNK || opts.chunkSize > exports.Z_MAX_CHUNK) {\n        throw new Error('Invalid chunk size: ' + opts.chunkSize);\n      }\n    }\n    if (opts.windowBits) {\n      if (opts.windowBits < exports.Z_MIN_WINDOWBITS || opts.windowBits > exports.Z_MAX_WINDOWBITS) {\n        throw new Error('Invalid windowBits: ' + opts.windowBits);\n      }\n    }\n    if (opts.level) {\n      if (opts.level < exports.Z_MIN_LEVEL || opts.level > exports.Z_MAX_LEVEL) {\n        throw new Error('Invalid compression level: ' + opts.level);\n      }\n    }\n    if (opts.memLevel) {\n      if (opts.memLevel < exports.Z_MIN_MEMLEVEL || opts.memLevel > exports.Z_MAX_MEMLEVEL) {\n        throw new Error('Invalid memLevel: ' + opts.memLevel);\n      }\n    }\n    if (opts.strategy) {\n      if (opts.strategy != exports.Z_FILTERED && opts.strategy != exports.Z_HUFFMAN_ONLY && opts.strategy != exports.Z_RLE && opts.strategy != exports.Z_FIXED && opts.strategy != exports.Z_DEFAULT_STRATEGY) {\n        throw new Error('Invalid strategy: ' + opts.strategy);\n      }\n    }\n    if (opts.dictionary) {\n      if (!Buffer.isBuffer(opts.dictionary)) {\n        throw new Error('Invalid dictionary: it should be a Buffer instance');\n      }\n    }\n    this._binding = new binding.Zlib(mode);\n    var self = this;\n    this._hadError = false;\n    this._binding.onerror = function(message, errno) {\n      self._binding = null;\n      self._hadError = true;\n      var error = new Error(message);\n      error.errno = errno;\n      error.code = exports.codes[errno];\n      self.emit('error', error);\n    };\n    var level = exports.Z_DEFAULT_COMPRESSION;\n    if (typeof opts.level === 'number')\n      level = opts.level;\n    var strategy = exports.Z_DEFAULT_STRATEGY;\n    if (typeof opts.strategy === 'number')\n      strategy = opts.strategy;\n    this._binding.init(opts.windowBits || exports.Z_DEFAULT_WINDOWBITS, level, opts.memLevel || exports.Z_DEFAULT_MEMLEVEL, strategy, opts.dictionary);\n    this._buffer = new Buffer(this._chunkSize);\n    this._offset = 0;\n    this._closed = false;\n    this._level = level;\n    this._strategy = strategy;\n    this.once('end', this.close);\n  }\n  util.inherits(Zlib, Transform);\n  Zlib.prototype.params = function(level, strategy, callback) {\n    if (level < exports.Z_MIN_LEVEL || level > exports.Z_MAX_LEVEL) {\n      throw new RangeError('Invalid compression level: ' + level);\n    }\n    if (strategy != exports.Z_FILTERED && strategy != exports.Z_HUFFMAN_ONLY && strategy != exports.Z_RLE && strategy != exports.Z_FIXED && strategy != exports.Z_DEFAULT_STRATEGY) {\n      throw new TypeError('Invalid strategy: ' + strategy);\n    }\n    if (this._level !== level || this._strategy !== strategy) {\n      var self = this;\n      this.flush(binding.Z_SYNC_FLUSH, function() {\n        self._binding.params(level, strategy);\n        if (!self._hadError) {\n          self._level = level;\n          self._strategy = strategy;\n          if (callback)\n            callback();\n        }\n      });\n    } else {\n      process.nextTick(callback);\n    }\n  };\n  Zlib.prototype.reset = function() {\n    return this._binding.reset();\n  };\n  Zlib.prototype._flush = function(callback) {\n    this._transform(new Buffer(0), '', callback);\n  };\n  Zlib.prototype.flush = function(kind, callback) {\n    var ws = this._writableState;\n    if (typeof kind === 'function' || (kind === void 0 && !callback)) {\n      callback = kind;\n      kind = binding.Z_FULL_FLUSH;\n    }\n    if (ws.ended) {\n      if (callback)\n        process.nextTick(callback);\n    } else if (ws.ending) {\n      if (callback)\n        this.once('end', callback);\n    } else if (ws.needDrain) {\n      var self = this;\n      this.once('drain', function() {\n        self.flush(callback);\n      });\n    } else {\n      this._flushFlag = kind;\n      this.write(new Buffer(0), '', callback);\n    }\n  };\n  Zlib.prototype.close = function(callback) {\n    if (callback)\n      process.nextTick(callback);\n    if (this._closed)\n      return;\n    this._closed = true;\n    this._binding.close();\n    var self = this;\n    process.nextTick(function() {\n      self.emit('close');\n    });\n  };\n  Zlib.prototype._transform = function(chunk, encoding, cb) {\n    var flushFlag;\n    var ws = this._writableState;\n    var ending = ws.ending || ws.ended;\n    var last = ending && (!chunk || ws.length === chunk.length);\n    if (!chunk === null && !Buffer.isBuffer(chunk))\n      return cb(new Error('invalid input'));\n    if (last)\n      flushFlag = binding.Z_FINISH;\n    else {\n      flushFlag = this._flushFlag;\n      if (chunk.length >= ws.length) {\n        this._flushFlag = this._opts.flush || binding.Z_NO_FLUSH;\n      }\n    }\n    var self = this;\n    this._processChunk(chunk, flushFlag, cb);\n  };\n  Zlib.prototype._processChunk = function(chunk, flushFlag, cb) {\n    var availInBefore = chunk && chunk.length;\n    var availOutBefore = this._chunkSize - this._offset;\n    var inOff = 0;\n    var self = this;\n    var async = typeof cb === 'function';\n    if (!async) {\n      var buffers = [];\n      var nread = 0;\n      var error;\n      this.on('error', function(er) {\n        error = er;\n      });\n      do {\n        var res = this._binding.writeSync(flushFlag, chunk, inOff, availInBefore, this._buffer, this._offset, availOutBefore);\n      } while (!this._hadError && callback(res[0], res[1]));\n      if (this._hadError) {\n        throw error;\n      }\n      var buf = Buffer.concat(buffers, nread);\n      this.close();\n      return buf;\n    }\n    var req = this._binding.write(flushFlag, chunk, inOff, availInBefore, this._buffer, this._offset, availOutBefore);\n    req.buffer = chunk;\n    req.callback = callback;\n    function callback(availInAfter, availOutAfter) {\n      if (self._hadError)\n        return;\n      var have = availOutBefore - availOutAfter;\n      assert(have >= 0, 'have should not go down');\n      if (have > 0) {\n        var out = self._buffer.slice(self._offset, self._offset + have);\n        self._offset += have;\n        if (async) {\n          self.push(out);\n        } else {\n          buffers.push(out);\n          nread += out.length;\n        }\n      }\n      if (availOutAfter === 0 || self._offset >= self._chunkSize) {\n        availOutBefore = self._chunkSize;\n        self._offset = 0;\n        self._buffer = new Buffer(self._chunkSize);\n      }\n      if (availOutAfter === 0) {\n        inOff += (availInBefore - availInAfter);\n        availInBefore = availInAfter;\n        if (!async)\n          return true;\n        var newReq = self._binding.write(flushFlag, chunk, inOff, availInBefore, self._buffer, self._offset, self._chunkSize);\n        newReq.callback = callback;\n        newReq.buffer = chunk;\n        return;\n      }\n      if (!async)\n        return false;\n      cb();\n    }\n  };\n  util.inherits(Deflate, Zlib);\n  util.inherits(Inflate, Zlib);\n  util.inherits(Gzip, Zlib);\n  util.inherits(Gunzip, Zlib);\n  util.inherits(DeflateRaw, Zlib);\n  util.inherits(InflateRaw, Zlib);\n  util.inherits(Unzip, Zlib);\n})(require('buffer').Buffer, require('process'));\n"]}