{"version":3,"sources":["../../../../../jspm_packages/npm/browserify-zlib@0.1.4/src/binding.js"],"names":["Buffer","process","msg","require","zstream","zlib_deflate","zlib_inflate","constants","key","exports","NONE","DEFLATE","INFLATE","GZIP","GUNZIP","DEFLATERAW","INFLATERAW","UNZIP","Zlib","mode","TypeError","init_done","write_in_progress","pending_close","windowBits","level","memLevel","strategy","dictionary","prototype","init","strm","status","deflateInit2","Z_DEFLATED","inflateInit2","Error","Z_OK","_error","params","_writeCheck","write","flush","input","in_off","in_len","out","out_off","out_len","self","nextTick","res","_write","callback","close","bufferSet","data","offset","i","length","writeSync","Z_NO_FLUSH","Z_PARTIAL_FLUSH","Z_SYNC_FLUSH","Z_FULL_FLUSH","Z_FINISH","Z_BLOCK","_set","set","avail_in","next_in","avail_out","output","next_out","deflate","inflate","Z_STREAM_END","deflateEnd","inflateEnd","reset","deflateReset","inflateReset","onerror"],"mappings":"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","file":"binding.js","sourcesContent":["/* */ \n(function(Buffer, process) {\n  var msg = require('pako/lib/zlib/messages');\n  var zstream = require('pako/lib/zlib/zstream');\n  var zlib_deflate = require('pako/lib/zlib/deflate');\n  var zlib_inflate = require('pako/lib/zlib/inflate');\n  var constants = require('pako/lib/zlib/constants');\n  for (var key in constants) {\n    exports[key] = constants[key];\n  }\n  exports.NONE = 0;\n  exports.DEFLATE = 1;\n  exports.INFLATE = 2;\n  exports.GZIP = 3;\n  exports.GUNZIP = 4;\n  exports.DEFLATERAW = 5;\n  exports.INFLATERAW = 6;\n  exports.UNZIP = 7;\n  function Zlib(mode) {\n    if (mode < exports.DEFLATE || mode > exports.UNZIP)\n      throw new TypeError(\"Bad argument\");\n    this.mode = mode;\n    this.init_done = false;\n    this.write_in_progress = false;\n    this.pending_close = false;\n    this.windowBits = 0;\n    this.level = 0;\n    this.memLevel = 0;\n    this.strategy = 0;\n    this.dictionary = null;\n  }\n  Zlib.prototype.init = function(windowBits, level, memLevel, strategy, dictionary) {\n    this.windowBits = windowBits;\n    this.level = level;\n    this.memLevel = memLevel;\n    this.strategy = strategy;\n    if (this.mode === exports.GZIP || this.mode === exports.GUNZIP)\n      this.windowBits += 16;\n    if (this.mode === exports.UNZIP)\n      this.windowBits += 32;\n    if (this.mode === exports.DEFLATERAW || this.mode === exports.INFLATERAW)\n      this.windowBits = -this.windowBits;\n    this.strm = new zstream();\n    switch (this.mode) {\n      case exports.DEFLATE:\n      case exports.GZIP:\n      case exports.DEFLATERAW:\n        var status = zlib_deflate.deflateInit2(this.strm, this.level, exports.Z_DEFLATED, this.windowBits, this.memLevel, this.strategy);\n        break;\n      case exports.INFLATE:\n      case exports.GUNZIP:\n      case exports.INFLATERAW:\n      case exports.UNZIP:\n        var status = zlib_inflate.inflateInit2(this.strm, this.windowBits);\n        break;\n      default:\n        throw new Error(\"Unknown mode \" + this.mode);\n    }\n    if (status !== exports.Z_OK) {\n      this._error(status);\n      return;\n    }\n    this.write_in_progress = false;\n    this.init_done = true;\n  };\n  Zlib.prototype.params = function() {\n    throw new Error(\"deflateParams Not supported\");\n  };\n  Zlib.prototype._writeCheck = function() {\n    if (!this.init_done)\n      throw new Error(\"write before init\");\n    if (this.mode === exports.NONE)\n      throw new Error(\"already finalized\");\n    if (this.write_in_progress)\n      throw new Error(\"write already in progress\");\n    if (this.pending_close)\n      throw new Error(\"close is pending\");\n  };\n  Zlib.prototype.write = function(flush, input, in_off, in_len, out, out_off, out_len) {\n    this._writeCheck();\n    this.write_in_progress = true;\n    var self = this;\n    process.nextTick(function() {\n      self.write_in_progress = false;\n      var res = self._write(flush, input, in_off, in_len, out, out_off, out_len);\n      self.callback(res[0], res[1]);\n      if (self.pending_close)\n        self.close();\n    });\n    return this;\n  };\n  function bufferSet(data, offset) {\n    for (var i = 0; i < data.length; i++) {\n      this[offset + i] = data[i];\n    }\n  }\n  Zlib.prototype.writeSync = function(flush, input, in_off, in_len, out, out_off, out_len) {\n    this._writeCheck();\n    return this._write(flush, input, in_off, in_len, out, out_off, out_len);\n  };\n  Zlib.prototype._write = function(flush, input, in_off, in_len, out, out_off, out_len) {\n    this.write_in_progress = true;\n    if (flush !== exports.Z_NO_FLUSH && flush !== exports.Z_PARTIAL_FLUSH && flush !== exports.Z_SYNC_FLUSH && flush !== exports.Z_FULL_FLUSH && flush !== exports.Z_FINISH && flush !== exports.Z_BLOCK) {\n      throw new Error(\"Invalid flush value\");\n    }\n    if (input == null) {\n      input = new Buffer(0);\n      in_len = 0;\n      in_off = 0;\n    }\n    if (out._set)\n      out.set = out._set;\n    else\n      out.set = bufferSet;\n    var strm = this.strm;\n    strm.avail_in = in_len;\n    strm.input = input;\n    strm.next_in = in_off;\n    strm.avail_out = out_len;\n    strm.output = out;\n    strm.next_out = out_off;\n    switch (this.mode) {\n      case exports.DEFLATE:\n      case exports.GZIP:\n      case exports.DEFLATERAW:\n        var status = zlib_deflate.deflate(strm, flush);\n        break;\n      case exports.UNZIP:\n      case exports.INFLATE:\n      case exports.GUNZIP:\n      case exports.INFLATERAW:\n        var status = zlib_inflate.inflate(strm, flush);\n        break;\n      default:\n        throw new Error(\"Unknown mode \" + this.mode);\n    }\n    if (status !== exports.Z_STREAM_END && status !== exports.Z_OK) {\n      this._error(status);\n    }\n    this.write_in_progress = false;\n    return [strm.avail_in, strm.avail_out];\n  };\n  Zlib.prototype.close = function() {\n    if (this.write_in_progress) {\n      this.pending_close = true;\n      return;\n    }\n    this.pending_close = false;\n    if (this.mode === exports.DEFLATE || this.mode === exports.GZIP || this.mode === exports.DEFLATERAW) {\n      zlib_deflate.deflateEnd(this.strm);\n    } else {\n      zlib_inflate.inflateEnd(this.strm);\n    }\n    this.mode = exports.NONE;\n  };\n  Zlib.prototype.reset = function() {\n    switch (this.mode) {\n      case exports.DEFLATE:\n      case exports.DEFLATERAW:\n        var status = zlib_deflate.deflateReset(this.strm);\n        break;\n      case exports.INFLATE:\n      case exports.INFLATERAW:\n        var status = zlib_inflate.inflateReset(this.strm);\n        break;\n    }\n    if (status !== exports.Z_OK) {\n      this._error(status);\n    }\n  };\n  Zlib.prototype._error = function(status) {\n    this.onerror(msg[status] + ': ' + this.strm.msg, status);\n    this.write_in_progress = false;\n    if (this.pending_close)\n      this.close();\n  };\n  exports.Zlib = Zlib;\n})(require('buffer').Buffer, require('process'));\n"]}