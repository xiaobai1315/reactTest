{"version":3,"sources":["../../../../../../jspm_packages/npm/browserify-zlib@0.1.4/test/ignored/test-zlib-dictionary.js"],"names":["Buffer","process","common","require","assert","zlib","path","spdyDict","join","deflate","createDeflate","dictionary","input","called","run","num","inflate","createInflate","reset","removeAllListeners","on","chunk","write","output","push","equal","flush","end"],"mappings":";;AAAA;AACA,CAAC,UAASA,MAAT,EAAiBC,OAAjB,EAA0B;AACzB,MAAIC,SAASC,QAAQ,WAAR,CAAb;AACA,MAAIC,SAASD,QAAQ,QAAR,CAAb;AACA,MAAIE,OAAOF,QAAQ,MAAR,CAAX;AACA,MAAIG,OAAOH,QAAQ,MAAR,CAAX;AACA,MAAII,WAAW,IAAIP,MAAJ,CAAW,CAAC,4EAAD,EAA+E,4EAA/E,EAA6J,4EAA7J,EAA2O,4EAA3O,EAAyT,4EAAzT,EAAuY,4EAAvY,EAAqd,4EAArd,EAAmiB,4EAAniB,EAAinB,4EAAjnB,EAA+rB,4EAA/rB,EAA6wB,4EAA7wB,EAA21B,4EAA31B,EAAy6B,sBAAz6B,EAAi8BQ,IAAj8B,CAAs8B,EAAt8B,CAAX,CAAf;AACA,MAAIC,UAAUJ,KAAKK,aAAL,CAAmB,EAACC,YAAYJ,QAAb,EAAnB,CAAd;AACA,MAAIK,QAAQ,CAAC,iBAAD,EAAoB,iBAApB,EAAuC,mBAAvC,EAA4D,EAA5D,EAAgEJ,IAAhE,CAAqE,MAArE,CAAZ;AACA,MAAIK,SAAS,CAAb;AACA,WAASC,GAAT,CAAaC,GAAb,EAAkB;AAChB,QAAIC,UAAUX,KAAKY,aAAL,CAAmB,EAACN,YAAYJ,QAAb,EAAnB,CAAd;AACA,QAAIQ,QAAQ,CAAZ,EAAe;AACbN,cAAQS,KAAR;AACAT,cAAQU,kBAAR,CAA2B,MAA3B;AACD;AACDV,YAAQW,EAAR,CAAW,MAAX,EAAmB,UAASC,KAAT,EAAgB;AACjCL,cAAQM,KAAR,CAAcD,KAAd;AACD,KAFD;AAGA,QAAIE,SAAS,EAAb;AACAP,YAAQI,EAAR,CAAW,MAAX,EAAmB,UAASC,KAAT,EAAgB;AACjCE,aAAOC,IAAP,CAAYH,KAAZ;AACD,KAFD;AAGAL,YAAQI,EAAR,CAAW,KAAX,EAAkB,YAAW;AAC3BP;AACAT,aAAOqB,KAAP,CAAaF,OAAOf,IAAP,CAAY,EAAZ,CAAb,EAA8BI,KAA9B;AACA,UAAIG,MAAM,CAAV,EACED,IAAIC,MAAM,CAAV;AACH,KALD;AAMAN,YAAQa,KAAR,CAAcV,KAAd;AACAH,YAAQiB,KAAR,CAAc,YAAW;AACvBV,cAAQW,GAAR;AACD,KAFD;AAGD;AACDb,MAAI,CAAJ;AACAb,UAAQmB,EAAR,CAAW,MAAX,EAAmB,YAAW;AAC5BhB,WAAOqB,KAAP,CAAaZ,MAAb,EAAqB,CAArB;AACD,GAFD;AAGD,CArCD,EAqCGV,QAAQ,QAAR,EAAkBH,MArCrB,EAqC6BG,QAAQ,SAAR,CArC7B","file":"test-zlib-dictionary.js","sourcesContent":["/* */ \n(function(Buffer, process) {\n  var common = require('../common');\n  var assert = require('assert');\n  var zlib = require('zlib');\n  var path = require('path');\n  var spdyDict = new Buffer(['optionsgetheadpostputdeletetraceacceptaccept-charsetaccept-encodingaccept-', 'languageauthorizationexpectfromhostif-modified-sinceif-matchif-none-matchi', 'f-rangeif-unmodifiedsincemax-forwardsproxy-authorizationrangerefererteuser', '-agent10010120020120220320420520630030130230330430530630740040140240340440', '5406407408409410411412413414415416417500501502503504505accept-rangesageeta', 'glocationproxy-authenticatepublicretry-afterservervarywarningwww-authentic', 'ateallowcontent-basecontent-encodingcache-controlconnectiondatetrailertran', 'sfer-encodingupgradeviawarningcontent-languagecontent-lengthcontent-locati', 'oncontent-md5content-rangecontent-typeetagexpireslast-modifiedset-cookieMo', 'ndayTuesdayWednesdayThursdayFridaySaturdaySundayJanFebMarAprMayJunJulAugSe', 'pOctNovDecchunkedtext/htmlimage/pngimage/jpgimage/gifapplication/xmlapplic', 'ation/xhtmltext/plainpublicmax-agecharset=iso-8859-1utf-8gzipdeflateHTTP/1', '.1statusversionurl\\0'].join(''));\n  var deflate = zlib.createDeflate({dictionary: spdyDict});\n  var input = ['HTTP/1.1 200 Ok', 'Server: node.js', 'Content-Length: 0', ''].join('\\r\\n');\n  var called = 0;\n  function run(num) {\n    var inflate = zlib.createInflate({dictionary: spdyDict});\n    if (num === 2) {\n      deflate.reset();\n      deflate.removeAllListeners('data');\n    }\n    deflate.on('data', function(chunk) {\n      inflate.write(chunk);\n    });\n    var output = [];\n    inflate.on('data', function(chunk) {\n      output.push(chunk);\n    });\n    inflate.on('end', function() {\n      called++;\n      assert.equal(output.join(''), input);\n      if (num < 2)\n        run(num + 1);\n    });\n    deflate.write(input);\n    deflate.flush(function() {\n      inflate.end();\n    });\n  }\n  run(1);\n  process.on('exit', function() {\n    assert.equal(called, 2);\n  });\n})(require('buffer').Buffer, require('process'));\n"]}