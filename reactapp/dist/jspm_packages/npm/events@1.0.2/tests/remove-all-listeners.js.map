{"version":3,"sources":["../../../../../jspm_packages/npm/events@1.0.2/tests/remove-all-listeners.js"],"names":["common","require","assert","events","after_checks","after","i","length","expect","expected","actual","push","deepEqual","sort","listener","name","mustCall","e1","EventEmitter","on","fooListeners","listeners","barListeners","bazListeners","removeAllListeners","notEqual","e2","console","error"],"mappings":";;AAAA;AACA,IAAIA,SAASC,QAAQ,UAAR,CAAb;AACA,IAAIC,SAASD,QAAQ,QAAR,CAAb;AACA,IAAIE,SAASF,QAAQ,WAAR,CAAb;AACA,IAAIG,eAAe,EAAnB;AACAC,MAAM,YAAW;AACf,OAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIF,aAAaG,MAAjC,EAAyC,EAAED,CAA3C,EAA8C;AAC5CF,iBAAaE,CAAb;AACD;AACF,CAJD;AAKA,SAASE,MAAT,CAAgBC,QAAhB,EAA0B;AACxB,MAAIC,SAAS,EAAb;AACAN,eAAaO,IAAb,CAAkB,YAAW;AAC3BT,WAAOU,SAAP,CAAiBF,OAAOG,IAAP,EAAjB,EAAgCJ,SAASI,IAAT,EAAhC;AACD,GAFD;AAGA,WAASC,QAAT,CAAkBC,IAAlB,EAAwB;AACtBL,WAAOC,IAAP,CAAYI,IAAZ;AACD;AACD,SAAOf,OAAOgB,QAAP,CAAgBF,QAAhB,EAA0BL,SAASF,MAAnC,CAAP;AACD;AACD,SAASO,QAAT,GAAoB,CAAE;AACtB,IAAIG,KAAK,IAAId,OAAOe,YAAX,EAAT;AACAD,GAAGE,EAAH,CAAM,KAAN,EAAaL,QAAb;AACAG,GAAGE,EAAH,CAAM,KAAN,EAAaL,QAAb;AACAG,GAAGE,EAAH,CAAM,KAAN,EAAaL,QAAb;AACAG,GAAGE,EAAH,CAAM,KAAN,EAAaL,QAAb;AACA,IAAIM,eAAeH,GAAGI,SAAH,CAAa,KAAb,CAAnB;AACA,IAAIC,eAAeL,GAAGI,SAAH,CAAa,KAAb,CAAnB;AACA,IAAIE,eAAeN,GAAGI,SAAH,CAAa,KAAb,CAAnB;AACAJ,GAAGE,EAAH,CAAM,gBAAN,EAAwBX,OAAO,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,CAAP,CAAxB;AACAS,GAAGO,kBAAH,CAAsB,KAAtB;AACAP,GAAGO,kBAAH,CAAsB,KAAtB;AACAtB,OAAOU,SAAP,CAAiBK,GAAGI,SAAH,CAAa,KAAb,CAAjB,EAAsC,CAACP,QAAD,CAAtC;AACAZ,OAAOU,SAAP,CAAiBK,GAAGI,SAAH,CAAa,KAAb,CAAjB,EAAsC,EAAtC;AACAnB,OAAOU,SAAP,CAAiBK,GAAGI,SAAH,CAAa,KAAb,CAAjB,EAAsC,EAAtC;AACAnB,OAAOU,SAAP,CAAiBQ,YAAjB,EAA+B,CAACN,QAAD,CAA/B;AACAZ,OAAOU,SAAP,CAAiBU,YAAjB,EAA+B,CAACR,QAAD,CAA/B;AACAZ,OAAOU,SAAP,CAAiBW,YAAjB,EAA+B,CAACT,QAAD,EAAWA,QAAX,CAA/B;AACAZ,OAAOuB,QAAP,CAAgBR,GAAGI,SAAH,CAAa,KAAb,CAAhB,EAAqCC,YAArC;AACApB,OAAOuB,QAAP,CAAgBR,GAAGI,SAAH,CAAa,KAAb,CAAhB,EAAqCE,YAArC;AACA,IAAIG,KAAK,IAAIvB,OAAOe,YAAX,EAAT;AACAQ,GAAGP,EAAH,CAAM,KAAN,EAAaL,QAAb;AACAY,GAAGP,EAAH,CAAM,KAAN,EAAaL,QAAb;AACAY,GAAGP,EAAH,CAAM,gBAAN,EAAwBX,OAAO,CAAC,KAAD,EAAQ,KAAR,EAAe,gBAAf,CAAP,CAAxB;AACAkB,GAAGP,EAAH,CAAM,gBAAN,EAAwBX,OAAO,CAAC,KAAD,EAAQ,KAAR,CAAP,CAAxB;AACAkB,GAAGF,kBAAH;AACAG,QAAQC,KAAR,CAAcF,EAAd;AACAxB,OAAOU,SAAP,CAAiB,EAAjB,EAAqBc,GAAGL,SAAH,CAAa,KAAb,CAArB;AACAnB,OAAOU,SAAP,CAAiB,EAAjB,EAAqBc,GAAGL,SAAH,CAAa,KAAb,CAArB","file":"remove-all-listeners.js","sourcesContent":["/* */ \nvar common = require('./common');\nvar assert = require('assert');\nvar events = require('../events');\nvar after_checks = [];\nafter(function() {\n  for (var i = 0; i < after_checks.length; ++i) {\n    after_checks[i]();\n  }\n});\nfunction expect(expected) {\n  var actual = [];\n  after_checks.push(function() {\n    assert.deepEqual(actual.sort(), expected.sort());\n  });\n  function listener(name) {\n    actual.push(name);\n  }\n  return common.mustCall(listener, expected.length);\n}\nfunction listener() {}\nvar e1 = new events.EventEmitter();\ne1.on('foo', listener);\ne1.on('bar', listener);\ne1.on('baz', listener);\ne1.on('baz', listener);\nvar fooListeners = e1.listeners('foo');\nvar barListeners = e1.listeners('bar');\nvar bazListeners = e1.listeners('baz');\ne1.on('removeListener', expect(['bar', 'baz', 'baz']));\ne1.removeAllListeners('bar');\ne1.removeAllListeners('baz');\nassert.deepEqual(e1.listeners('foo'), [listener]);\nassert.deepEqual(e1.listeners('bar'), []);\nassert.deepEqual(e1.listeners('baz'), []);\nassert.deepEqual(fooListeners, [listener]);\nassert.deepEqual(barListeners, [listener]);\nassert.deepEqual(bazListeners, [listener, listener]);\nassert.notEqual(e1.listeners('bar'), barListeners);\nassert.notEqual(e1.listeners('baz'), bazListeners);\nvar e2 = new events.EventEmitter();\ne2.on('foo', listener);\ne2.on('bar', listener);\ne2.on('removeListener', expect(['foo', 'bar', 'removeListener']));\ne2.on('removeListener', expect(['foo', 'bar']));\ne2.removeAllListeners();\nconsole.error(e2);\nassert.deepEqual([], e2.listeners('foo'));\nassert.deepEqual([], e2.listeners('bar'));\n"]}