{"version":3,"sources":["../../../../../../jspm_packages/npm/babel-core@5.8.38/lib/traversal/context.js"],"names":["exports","__esModule","_interopRequireWildcard","obj","newObj","key","Object","prototype","hasOwnProperty","call","_interopRequireDefault","_classCallCheck","instance","Constructor","TypeError","_path","require","_path2","_types","t","TraversalContext","scope","opts","state","parentPath","queue","shouldVisit","node","enter","exit","type","keys","VISITOR_KEYS","length","_arr","_i","create","listKey","path","get","parent","container","unshiftContext","visitMultiple","visited","stop","self","push","_arr2","_i2","resync","indexOf","visit","_arr3","_i3","shiftContext","visitSingle","nodes","Array","isArray","module"],"mappings":"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","file":"context.js","sourcesContent":["/* */ \n\"format cjs\";\n\"use strict\";\n\nexports.__esModule = true;\n// istanbul ignore next\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj[\"default\"] = obj; return newObj; } }\n\n// istanbul ignore next\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n// istanbul ignore next\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _path = require(\"./path\");\n\nvar _path2 = _interopRequireDefault(_path);\n\nvar _types = require(\"../types\");\n\nvar t = _interopRequireWildcard(_types);\n\n/**\n * [Please add a description.]\n */\n\nvar TraversalContext = (function () {\n  function TraversalContext(scope, opts, state, parentPath) {\n    _classCallCheck(this, TraversalContext);\n\n    this.queue = null;\n\n    this.parentPath = parentPath;\n    this.scope = scope;\n    this.state = state;\n    this.opts = opts;\n  }\n\n  /**\n   * [Please add a description.]\n   */\n\n  TraversalContext.prototype.shouldVisit = function shouldVisit(node) {\n    var opts = this.opts;\n    if (opts.enter || opts.exit) return true;\n\n    if (opts[node.type]) return true;\n\n    var keys = t.VISITOR_KEYS[node.type];\n    if (!keys || !keys.length) return false;\n\n    var _arr = keys;\n    for (var _i = 0; _i < _arr.length; _i++) {\n      var key = _arr[_i];\n      if (node[key]) return true;\n    }\n\n    return false;\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  TraversalContext.prototype.create = function create(node, obj, key, listKey) {\n    var path = _path2[\"default\"].get({\n      parentPath: this.parentPath,\n      parent: node,\n      container: obj,\n      key: key,\n      listKey: listKey\n    });\n    path.unshiftContext(this);\n    return path;\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  TraversalContext.prototype.visitMultiple = function visitMultiple(container, parent, listKey) {\n    // nothing to traverse!\n    if (container.length === 0) return false;\n\n    var visited = [];\n\n    var queue = this.queue = [];\n    var stop = false;\n\n    // build up initial queue\n    for (var key = 0; key < container.length; key++) {\n      var self = container[key];\n      if (self && this.shouldVisit(self)) {\n        queue.push(this.create(parent, container, key, listKey));\n      }\n    }\n\n    // visit the queue\n    var _arr2 = queue;\n    for (var _i2 = 0; _i2 < _arr2.length; _i2++) {\n      var path = _arr2[_i2];\n      path.resync();\n\n      if (visited.indexOf(path.node) >= 0) continue;\n      visited.push(path.node);\n\n      if (path.visit()) {\n        stop = true;\n        break;\n      }\n    }\n\n    var _arr3 = queue;\n    for (var _i3 = 0; _i3 < _arr3.length; _i3++) {\n      var path = _arr3[_i3];\n      path.shiftContext();\n    }\n\n    this.queue = null;\n\n    return stop;\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  TraversalContext.prototype.visitSingle = function visitSingle(node, key) {\n    if (this.shouldVisit(node[key])) {\n      var path = this.create(node, node, key);\n      path.visit();\n      path.shiftContext();\n    }\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  TraversalContext.prototype.visit = function visit(node, key) {\n    var nodes = node[key];\n    if (!nodes) return;\n\n    if (Array.isArray(nodes)) {\n      return this.visitMultiple(nodes, node, key);\n    } else {\n      return this.visitSingle(node, key);\n    }\n  };\n\n  return TraversalContext;\n})();\n\nexports[\"default\"] = TraversalContext;\nmodule.exports = exports[\"default\"];"]}