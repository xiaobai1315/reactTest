{"version":3,"sources":["../../../../../../../jspm_packages/npm/babel-core@5.8.38/lib/transformation/modules/umd.js"],"names":["exports","__esModule","_interopRequireWildcard","obj","newObj","key","Object","prototype","hasOwnProperty","call","_interopRequireDefault","_classCallCheck","instance","Constructor","TypeError","_inherits","subClass","superClass","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_default","require","_default2","_amd","_amd2","_lodashObjectValues","_lodashObjectValues2","_path","_path2","_util","util","_types","t","UMDFormatter","_AMDFormatter","apply","arguments","transform","program","body","names","_name","ids","push","literal","args","identifier","passModuleArg","concat","factory","functionExpression","blockStatement","defineArgs","arrayExpression","testExports","template","testModule","commonTests","logicalExpression","commonArgs","map","name","callExpression","browserArgs","_name2","id","defaultIds","toIdentifier","basename","extname","memberExpression","moduleName","getModuleName","unshift","globalArg","file","opts","runner","AMD_ARGUMENTS","COMMON_TEST","COMMON_ARGUMENTS","BROWSER_ARGUMENTS","GLOBAL_ARG","expressionStatement","thisExpression","module"],"mappings":"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","file":"umd.js","sourcesContent":["/* */ \n\"format cjs\";\n\"use strict\";\n\nexports.__esModule = true;\n// istanbul ignore next\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj[\"default\"] = obj; return newObj; } }\n\n// istanbul ignore next\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n// istanbul ignore next\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// istanbul ignore next\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _default = require(\"./_default\");\n\nvar _default2 = _interopRequireDefault(_default);\n\nvar _amd = require(\"./amd\");\n\nvar _amd2 = _interopRequireDefault(_amd);\n\nvar _lodashObjectValues = require(\"lodash/object/values\");\n\nvar _lodashObjectValues2 = _interopRequireDefault(_lodashObjectValues);\n\nvar _path = require(\"path\");\n\nvar _path2 = _interopRequireDefault(_path);\n\nvar _util = require(\"../../util\");\n\nvar util = _interopRequireWildcard(_util);\n\nvar _types = require(\"../../types\");\n\nvar t = _interopRequireWildcard(_types);\n\n/**\n * [Please add a description.]\n */\n\nvar UMDFormatter = (function (_AMDFormatter) {\n  _inherits(UMDFormatter, _AMDFormatter);\n\n  function UMDFormatter() {\n    _classCallCheck(this, UMDFormatter);\n\n    _AMDFormatter.apply(this, arguments);\n  }\n\n  /**\n   * [Please add a description.]\n   */\n\n  UMDFormatter.prototype.transform = function transform(program) {\n    _default2[\"default\"].prototype.transform.apply(this, arguments);\n\n    var body = program.body;\n\n    // build an array of module names\n\n    var names = [];\n    for (var _name in this.ids) {\n      names.push(t.literal(_name));\n    }\n\n    // factory\n\n    var ids = _lodashObjectValues2[\"default\"](this.ids);\n    var args = [t.identifier(\"exports\")];\n    if (this.passModuleArg) args.push(t.identifier(\"module\"));\n    args = args.concat(ids);\n\n    var factory = t.functionExpression(null, args, t.blockStatement(body));\n\n    // amd\n\n    var defineArgs = [t.literal(\"exports\")];\n    if (this.passModuleArg) defineArgs.push(t.literal(\"module\"));\n    defineArgs = defineArgs.concat(names);\n    defineArgs = [t.arrayExpression(defineArgs)];\n\n    // common\n\n    var testExports = util.template(\"test-exports\");\n    var testModule = util.template(\"test-module\");\n    var commonTests = this.passModuleArg ? t.logicalExpression(\"&&\", testExports, testModule) : testExports;\n\n    var commonArgs = [t.identifier(\"exports\")];\n    if (this.passModuleArg) commonArgs.push(t.identifier(\"module\"));\n    commonArgs = commonArgs.concat(names.map(function (name) {\n      return t.callExpression(t.identifier(\"require\"), [name]);\n    }));\n\n    // globals\n\n    var browserArgs = [];\n    if (this.passModuleArg) browserArgs.push(t.identifier(\"mod\"));\n\n    for (var _name2 in this.ids) {\n      var id = this.defaultIds[_name2] || t.identifier(t.toIdentifier(_path2[\"default\"].basename(_name2, _path2[\"default\"].extname(_name2))));\n      browserArgs.push(t.memberExpression(t.identifier(\"global\"), id));\n    }\n\n    //\n\n    var moduleName = this.getModuleName();\n    if (moduleName) defineArgs.unshift(t.literal(moduleName));\n\n    //\n    var globalArg = this.file.opts.basename;\n    if (moduleName) globalArg = moduleName;\n    globalArg = t.identifier(t.toIdentifier(globalArg));\n\n    var runner = util.template(\"umd-runner-body\", {\n      AMD_ARGUMENTS: defineArgs,\n      COMMON_TEST: commonTests,\n      COMMON_ARGUMENTS: commonArgs,\n      BROWSER_ARGUMENTS: browserArgs,\n      GLOBAL_ARG: globalArg\n    });\n\n    //\n\n    program.body = [t.expressionStatement(t.callExpression(runner, [t.thisExpression(), factory]))];\n  };\n\n  return UMDFormatter;\n})(_amd2[\"default\"]);\n\nexports[\"default\"] = UMDFormatter;\nmodule.exports = exports[\"default\"];"]}