{"version":3,"sources":["../../../../../../../jspm_packages/npm/babel-core@5.8.38/lib/transformation/modules/common.js"],"names":["exports","__esModule","_interopRequireWildcard","obj","newObj","key","Object","prototype","hasOwnProperty","call","_interopRequireDefault","_classCallCheck","instance","Constructor","TypeError","_inherits","subClass","superClass","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_default","require","_default2","_util","util","_types","t","CommonJSFormatter","_DefaultFormatter","apply","arguments","setup","_setup","hasLocalExports","conditional","file","scope","rename","noInteropRequireImport","templateName","isLoose","declar","template","_blockHoist","path","unshiftContainer","transform","program","hasDefaultOnlyExport","body","push","expressionStatement","assignmentExpression","memberExpression","identifier","importSpecifier","specifier","node","nodes","variableName","local","ref","getExternalReference","isSpecifierDefault","isModuleType","remaps","add","name","uid","generateUidIdentifierBasedOnNode","variableDeclaration","variableDeclarator","callExpression","addHelper","isImportNamespaceSpecifier","imported","importDeclaration","MODULE_NAME","source","exportSpecifier","doDefaultExportInterop","exportDeclaration","_getExternalReference","specifiers","module"],"mappings":"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","file":"common.js","sourcesContent":["/* */ \n\"format cjs\";\n\"use strict\";\n\nexports.__esModule = true;\n// istanbul ignore next\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj[\"default\"] = obj; return newObj; } }\n\n// istanbul ignore next\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n// istanbul ignore next\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// istanbul ignore next\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _default = require(\"./_default\");\n\nvar _default2 = _interopRequireDefault(_default);\n\nvar _util = require(\"../../util\");\n\nvar util = _interopRequireWildcard(_util);\n\nvar _types = require(\"../../types\");\n\nvar t = _interopRequireWildcard(_types);\n\n/**\n * [Please add a description.]\n */\n\nvar CommonJSFormatter = (function (_DefaultFormatter) {\n  _inherits(CommonJSFormatter, _DefaultFormatter);\n\n  function CommonJSFormatter() {\n    _classCallCheck(this, CommonJSFormatter);\n\n    _DefaultFormatter.apply(this, arguments);\n  }\n\n  /**\n   * [Please add a description.]\n   */\n\n  CommonJSFormatter.prototype.setup = function setup() {\n    this._setup(this.hasLocalExports);\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  CommonJSFormatter.prototype._setup = function _setup(conditional) {\n    var file = this.file;\n    var scope = file.scope;\n\n    scope.rename(\"module\");\n    scope.rename(\"exports\");\n\n    if (!this.noInteropRequireImport && conditional) {\n      var templateName = \"exports-module-declaration\";\n      if (this.file.isLoose(\"es6.modules\")) templateName += \"-loose\";\n      var declar = util.template(templateName, true);\n      declar._blockHoist = 3;\n      file.path.unshiftContainer(\"body\", [declar]);\n    }\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  CommonJSFormatter.prototype.transform = function transform(program) {\n    _default2[\"default\"].prototype.transform.apply(this, arguments);\n\n    if (this.hasDefaultOnlyExport) {\n      program.body.push(t.expressionStatement(t.assignmentExpression(\"=\", t.memberExpression(t.identifier(\"module\"), t.identifier(\"exports\")), t.memberExpression(t.identifier(\"exports\"), t.identifier(\"default\")))));\n    }\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  CommonJSFormatter.prototype.importSpecifier = function importSpecifier(specifier, node, nodes, scope) {\n    var variableName = specifier.local;\n\n    var ref = this.getExternalReference(node, nodes);\n\n    // import foo from \"foo\";\n    if (t.isSpecifierDefault(specifier)) {\n      if (this.isModuleType(node, \"absolute\")) {\n        // absolute module reference\n      } else if (this.isModuleType(node, \"absoluteDefault\")) {\n          this.remaps.add(scope, variableName.name, ref);\n        } else if (this.noInteropRequireImport) {\n          this.remaps.add(scope, variableName.name, t.memberExpression(ref, t.identifier(\"default\")));\n        } else {\n          var uid = this.scope.generateUidIdentifierBasedOnNode(node, \"import\");\n\n          nodes.push(t.variableDeclaration(\"var\", [t.variableDeclarator(uid, t.callExpression(this.file.addHelper(\"interop-require-default\"), [ref]))]));\n\n          this.remaps.add(scope, variableName.name, t.memberExpression(uid, t.identifier(\"default\")));\n        }\n    } else {\n      if (t.isImportNamespaceSpecifier(specifier)) {\n        if (!this.noInteropRequireImport) {\n          ref = t.callExpression(this.file.addHelper(\"interop-require-wildcard\"), [ref]);\n        }\n\n        // import * as bar from \"foo\";\n        nodes.push(t.variableDeclaration(\"var\", [t.variableDeclarator(variableName, ref)]));\n      } else {\n        // import { foo } from \"foo\";\n        this.remaps.add(scope, variableName.name, t.memberExpression(ref, t.identifier(specifier.imported.name)));\n      }\n    }\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  CommonJSFormatter.prototype.importDeclaration = function importDeclaration(node, nodes) {\n    // import \"foo\";\n    nodes.push(util.template(\"require\", {\n      MODULE_NAME: node.source\n    }, true));\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  CommonJSFormatter.prototype.exportSpecifier = function exportSpecifier(specifier) {\n    if (this.doDefaultExportInterop(specifier)) {\n      this.hasDefaultOnlyExport = true;\n    }\n\n    _default2[\"default\"].prototype.exportSpecifier.apply(this, arguments);\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  CommonJSFormatter.prototype.exportDeclaration = function exportDeclaration(node) {\n    if (this.doDefaultExportInterop(node)) {\n      this.hasDefaultOnlyExport = true;\n    }\n\n    _default2[\"default\"].prototype.exportDeclaration.apply(this, arguments);\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  CommonJSFormatter.prototype._getExternalReference = function _getExternalReference(node, nodes) {\n    var call = t.callExpression(t.identifier(\"require\"), [node.source]);\n    var uid;\n\n    if (this.isModuleType(node, \"absolute\")) {\n      // absolute module reference\n    } else if (this.isModuleType(node, \"absoluteDefault\")) {\n        call = t.memberExpression(call, t.identifier(\"default\"));\n      } else {\n        uid = this.scope.generateUidIdentifierBasedOnNode(node, \"import\");\n      }\n\n    uid = uid || node.specifiers[0].local;\n\n    var declar = t.variableDeclaration(\"var\", [t.variableDeclarator(uid, call)]);\n    nodes.push(declar);\n    return uid;\n  };\n\n  return CommonJSFormatter;\n})(_default2[\"default\"]);\n\nexports[\"default\"] = CommonJSFormatter;\nmodule.exports = exports[\"default\"];"]}