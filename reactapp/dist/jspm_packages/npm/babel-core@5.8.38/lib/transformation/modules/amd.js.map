{"version":3,"sources":["../../../../../../../jspm_packages/npm/babel-core@5.8.38/lib/transformation/modules/amd.js"],"names":["exports","__esModule","_interopRequireWildcard","obj","newObj","key","Object","prototype","hasOwnProperty","call","_interopRequireDefault","_classCallCheck","instance","Constructor","TypeError","_inherits","subClass","superClass","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_default","require","_default2","_common","_common2","_lodashCollectionIncludes","_lodashCollectionIncludes2","_lodashObjectValues","_lodashObjectValues2","_util","util","_types","t","AMDFormatter","_DefaultFormatter","apply","arguments","setup","_setup","hasNonDefaultExports","buildDependencyLiterals","names","name","ids","push","literal","transform","program","body","passModuleArg","concat","arrayExpression","params","unshift","identifier","container","functionExpression","blockStatement","defineArgs","moduleName","getModuleName","callExpression","expressionStatement","file","opts","moduleIds","_getExternalReference","node","scope","generateUidIdentifier","source","importDeclaration","getExternalReference","importSpecifier","specifier","nodes","ref","isImportNamespaceSpecifier","isImportDefaultSpecifier","defaultIds","local","isModuleType","memberExpression","dynamicImported","isSpecifierDefault","noInteropRequireImport","uid","variableDeclaration","variableDeclarator","addHelper","imported","remaps","add","exportSpecifier","doDefaultExportInterop","exported","template","VALUE","exportDeclaration","declar","declaration","assign","_pushStatement","isFunctionDeclaration","_blockHoist","module"],"mappings":"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","file":"amd.js","sourcesContent":["/* */ \n\"format cjs\";\n\"use strict\";\n\nexports.__esModule = true;\n// istanbul ignore next\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj[\"default\"] = obj; return newObj; } }\n\n// istanbul ignore next\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n// istanbul ignore next\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// istanbul ignore next\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _default = require(\"./_default\");\n\nvar _default2 = _interopRequireDefault(_default);\n\nvar _common = require(\"./common\");\n\nvar _common2 = _interopRequireDefault(_common);\n\nvar _lodashCollectionIncludes = require(\"lodash/collection/includes\");\n\nvar _lodashCollectionIncludes2 = _interopRequireDefault(_lodashCollectionIncludes);\n\nvar _lodashObjectValues = require(\"lodash/object/values\");\n\nvar _lodashObjectValues2 = _interopRequireDefault(_lodashObjectValues);\n\nvar _util = require(\"../../util\");\n\nvar util = _interopRequireWildcard(_util);\n\nvar _types = require(\"../../types\");\n\nvar t = _interopRequireWildcard(_types);\n\n/**\n * [Please add a description.]\n */\n\nvar AMDFormatter = (function (_DefaultFormatter) {\n  _inherits(AMDFormatter, _DefaultFormatter);\n\n  function AMDFormatter() {\n    _classCallCheck(this, AMDFormatter);\n\n    _DefaultFormatter.apply(this, arguments);\n  }\n\n  /**\n   * [Please add a description.]\n   */\n\n  AMDFormatter.prototype.setup = function setup() {\n    _common2[\"default\"].prototype._setup.call(this, this.hasNonDefaultExports);\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  AMDFormatter.prototype.buildDependencyLiterals = function buildDependencyLiterals() {\n    var names = [];\n    for (var name in this.ids) {\n      names.push(t.literal(name));\n    }\n    return names;\n  };\n\n  /**\n   * Wrap the entire body in a `define` wrapper.\n   */\n\n  AMDFormatter.prototype.transform = function transform(program) {\n    _common2[\"default\"].prototype.transform.apply(this, arguments);\n\n    var body = program.body;\n\n    // build an array of module names\n\n    var names = [t.literal(\"exports\")];\n    if (this.passModuleArg) names.push(t.literal(\"module\"));\n    names = names.concat(this.buildDependencyLiterals());\n    names = t.arrayExpression(names);\n\n    // build up define container\n\n    var params = _lodashObjectValues2[\"default\"](this.ids);\n    if (this.passModuleArg) params.unshift(t.identifier(\"module\"));\n    params.unshift(t.identifier(\"exports\"));\n\n    var container = t.functionExpression(null, params, t.blockStatement(body));\n\n    var defineArgs = [names, container];\n    var moduleName = this.getModuleName();\n    if (moduleName) defineArgs.unshift(t.literal(moduleName));\n\n    var call = t.callExpression(t.identifier(\"define\"), defineArgs);\n\n    program.body = [t.expressionStatement(call)];\n  };\n\n  /**\n   * Get the AMD module name that we'll prepend to the wrapper\n   * to define this module\n   */\n\n  AMDFormatter.prototype.getModuleName = function getModuleName() {\n    if (this.file.opts.moduleIds) {\n      return _default2[\"default\"].prototype.getModuleName.apply(this, arguments);\n    } else {\n      return null;\n    }\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  AMDFormatter.prototype._getExternalReference = function _getExternalReference(node) {\n    return this.scope.generateUidIdentifier(node.source.value);\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  AMDFormatter.prototype.importDeclaration = function importDeclaration(node) {\n    this.getExternalReference(node);\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  AMDFormatter.prototype.importSpecifier = function importSpecifier(specifier, node, nodes, scope) {\n    var key = node.source.value;\n    var ref = this.getExternalReference(node);\n\n    if (t.isImportNamespaceSpecifier(specifier) || t.isImportDefaultSpecifier(specifier)) {\n      this.defaultIds[key] = specifier.local;\n    }\n\n    if (this.isModuleType(node, \"absolute\")) {\n      // absolute module reference\n    } else if (this.isModuleType(node, \"absoluteDefault\")) {\n        // prevent unnecessary renaming of dynamic imports\n        this.ids[node.source.value] = ref;\n        ref = t.memberExpression(ref, t.identifier(\"default\"));\n      } else if (t.isImportNamespaceSpecifier(specifier)) {\n        // import * as bar from \"foo\";\n      } else if (!_lodashCollectionIncludes2[\"default\"](this.file.dynamicImported, node) && t.isSpecifierDefault(specifier) && !this.noInteropRequireImport) {\n          // import foo from \"foo\";\n          var uid = scope.generateUidIdentifier(specifier.local.name);\n          nodes.push(t.variableDeclaration(\"var\", [t.variableDeclarator(uid, t.callExpression(this.file.addHelper(\"interop-require-default\"), [ref]))]));\n          ref = t.memberExpression(uid, t.identifier(\"default\"));\n        } else {\n          // import { foo } from \"foo\";\n          var imported = specifier.imported;\n          if (t.isSpecifierDefault(specifier)) imported = t.identifier(\"default\");\n          ref = t.memberExpression(ref, imported);\n        }\n\n    this.remaps.add(scope, specifier.local.name, ref);\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  AMDFormatter.prototype.exportSpecifier = function exportSpecifier(specifier, node, nodes) {\n    if (this.doDefaultExportInterop(specifier)) {\n      this.passModuleArg = true;\n\n      if (specifier.exported !== specifier.local && !node.source) {\n        nodes.push(util.template(\"exports-default-assign\", {\n          VALUE: specifier.local\n        }, true));\n        return;\n      }\n    }\n\n    _common2[\"default\"].prototype.exportSpecifier.apply(this, arguments);\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  AMDFormatter.prototype.exportDeclaration = function exportDeclaration(node, nodes) {\n    if (this.doDefaultExportInterop(node)) {\n      this.passModuleArg = true;\n\n      var declar = node.declaration;\n      var assign = util.template(\"exports-default-assign\", {\n        VALUE: this._pushStatement(declar, nodes)\n      }, true);\n\n      if (t.isFunctionDeclaration(declar)) {\n        // we can hoist this assignment to the top of the file\n        assign._blockHoist = 3;\n      }\n\n      nodes.push(assign);\n      return;\n    }\n\n    _default2[\"default\"].prototype.exportDeclaration.apply(this, arguments);\n  };\n\n  return AMDFormatter;\n})(_default2[\"default\"]);\n\nexports[\"default\"] = AMDFormatter;\nmodule.exports = exports[\"default\"];"]}