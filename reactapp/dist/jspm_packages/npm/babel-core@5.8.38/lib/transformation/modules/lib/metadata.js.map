{"version":3,"sources":["../../../../../../../../jspm_packages/npm/babel-core@5.8.38/lib/transformation/modules/lib/metadata.js"],"names":["exports","__esModule","ExportDeclaration","Scope","_interopRequireWildcard","obj","newObj","key","Object","prototype","hasOwnProperty","call","_interopRequireDefault","_lodashObjectExtend","require","_lodashObjectExtend2","_types","t","ModuleDeclaration","enter","node","parent","scope","formatter","source","value","file","resolveModuleSource","addScope","ImportDeclaration","exit","hasLocalImports","specifiers","imported","metadata","imports","push","_arr","get","_i","length","specifier","ids","getBindingIdentifiers","localImports","local","name","isImportDefaultSpecifier","kind","isImportSpecifier","importedName","isImportNamespaceSpecifier","hasLocalExports","declar","isStatement","bindings","binding","_addExport","exported","isExportDefaultDeclaration","isExportNamedDeclaration","_arr2","_i2","isExportDefaultSpecifier","isExportNamespaceSpecifier","isExportAllDeclaration","isTypeAlias","onlyDefault","isSpecifierDefault","hasNonDefaultExports","isLoose","skip"],"mappings":"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","file":"metadata.js","sourcesContent":["/* */ \n\"format cjs\";\n\"use strict\";\n\nexports.__esModule = true;\nexports.ExportDeclaration = ExportDeclaration;\nexports.Scope = Scope;\n// istanbul ignore next\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj[\"default\"] = obj; return newObj; } }\n\n// istanbul ignore next\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar _lodashObjectExtend = require(\"lodash/object/extend\");\n\nvar _lodashObjectExtend2 = _interopRequireDefault(_lodashObjectExtend);\n\nvar _types = require(\"../../../types\");\n\nvar t = _interopRequireWildcard(_types);\n\n/**\n * [Please add a description.]\n */\n\nvar ModuleDeclaration = {\n  enter: function enter(node, parent, scope, formatter) {\n    if (node.source) {\n      node.source.value = formatter.file.resolveModuleSource(node.source.value);\n      formatter.addScope(this);\n    }\n  }\n};\n\nexports.ModuleDeclaration = ModuleDeclaration;\n/**\n * [Please add a description.]\n */\n\nvar ImportDeclaration = {\n  exit: function exit(node, parent, scope, formatter) {\n    formatter.hasLocalImports = true;\n\n    var specifiers = [];\n    var imported = [];\n    formatter.metadata.imports.push({\n      source: node.source.value,\n      imported: imported,\n      specifiers: specifiers\n    });\n\n    var _arr = this.get(\"specifiers\");\n\n    for (var _i = 0; _i < _arr.length; _i++) {\n      var specifier = _arr[_i];\n      var ids = specifier.getBindingIdentifiers();\n      _lodashObjectExtend2[\"default\"](formatter.localImports, ids);\n\n      var local = specifier.node.local.name;\n\n      if (specifier.isImportDefaultSpecifier()) {\n        imported.push(\"default\");\n        specifiers.push({\n          kind: \"named\",\n          imported: \"default\",\n          local: local\n        });\n      }\n\n      if (specifier.isImportSpecifier()) {\n        var importedName = specifier.node.imported.name;\n        imported.push(importedName);\n        specifiers.push({\n          kind: \"named\",\n          imported: importedName,\n          local: local\n        });\n      }\n\n      if (specifier.isImportNamespaceSpecifier()) {\n        imported.push(\"*\");\n        specifiers.push({\n          kind: \"namespace\",\n          local: local\n        });\n      }\n    }\n  }\n};\n\nexports.ImportDeclaration = ImportDeclaration;\n/**\n * [Please add a description.]\n */\n\nfunction ExportDeclaration(node, parent, scope, formatter) {\n  formatter.hasLocalExports = true;\n\n  var source = node.source ? node.source.value : null;\n  var exports = formatter.metadata.exports;\n\n  // export function foo() {}\n  // export var foo = \"bar\";\n  var declar = this.get(\"declaration\");\n  if (declar.isStatement()) {\n    var bindings = declar.getBindingIdentifiers();\n\n    for (var name in bindings) {\n      var binding = bindings[name];\n      formatter._addExport(name, binding);\n\n      exports.exported.push(name);\n      exports.specifiers.push({\n        kind: \"local\",\n        local: name,\n        exported: this.isExportDefaultDeclaration() ? \"default\" : name\n      });\n    }\n  }\n\n  if (this.isExportNamedDeclaration() && node.specifiers) {\n    var _arr2 = node.specifiers;\n\n    for (var _i2 = 0; _i2 < _arr2.length; _i2++) {\n      var specifier = _arr2[_i2];\n      var exported = specifier.exported.name;\n      exports.exported.push(exported);\n\n      // export foo from \"bar\";\n      if (t.isExportDefaultSpecifier(specifier)) {\n        exports.specifiers.push({\n          kind: \"external\",\n          local: exported,\n          exported: exported,\n          source: source\n        });\n      }\n\n      // export * as foo from \"bar\";\n      if (t.isExportNamespaceSpecifier(specifier)) {\n        exports.specifiers.push({\n          kind: \"external-namespace\",\n          exported: exported,\n          source: source\n        });\n      }\n\n      var local = specifier.local;\n      if (!local) continue;\n\n      formatter._addExport(local.name, specifier.exported);\n\n      // export { foo } from \"bar\";\n      // export { foo as bar } from \"bar\";\n      if (source) {\n        exports.specifiers.push({\n          kind: \"external\",\n          local: local.name,\n          exported: exported,\n          source: source\n        });\n      }\n\n      // export { foo };\n      // export { foo as bar };\n      if (!source) {\n        exports.specifiers.push({\n          kind: \"local\",\n          local: local.name,\n          exported: exported\n        });\n      }\n    }\n  }\n\n  // export * from \"bar\";\n  if (this.isExportAllDeclaration()) {\n    exports.specifiers.push({\n      kind: \"external-all\",\n      source: source\n    });\n  }\n\n  if (!t.isExportDefaultDeclaration(node) && !declar.isTypeAlias()) {\n    var onlyDefault = node.specifiers && node.specifiers.length === 1 && t.isSpecifierDefault(node.specifiers[0]);\n    if (!onlyDefault) {\n      formatter.hasNonDefaultExports = true;\n    }\n  }\n}\n\n/**\n * [Please add a description.]\n */\n\nfunction Scope(node, parent, scope, formatter) {\n  if (!formatter.isLoose()) {\n    this.skip();\n  }\n}"]}