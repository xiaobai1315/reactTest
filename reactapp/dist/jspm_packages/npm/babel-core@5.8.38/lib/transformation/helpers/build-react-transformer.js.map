{"version":3,"sources":["../../../../../../../jspm_packages/npm/babel-core@5.8.38/lib/transformation/helpers/build-react-transformer.js"],"names":["exports","__esModule","_interopRequireWildcard","obj","newObj","key","Object","prototype","hasOwnProperty","call","_interopRequireDefault","_lodashLangIsString","require","_lodashLangIsString2","_messages","messages","_esutils","_esutils2","_react","react","_types","t","opts","visitor","JSXIdentifier","node","name","isReferenced","thisExpression","keyword","isIdentifierNameES6","type","literal","JSXNamespacedName","errorWithNode","get","JSXMemberExpression","exit","computed","isLiteral","property","JSXExpressionContainer","expression","JSXAttribute","enter","value","replace","inherits","JSXOpeningElement","parent","scope","file","children","buildChildren","tagExpr","args","tagName","isIdentifier","state","pre","attribs","attributes","length","buildJSXOpeningElementAttributes","push","post","callExpression","callee","_props","objs","pushProps","objectExpression","prop","shift","isJSXSpreadAttribute","argument","isObjectExpression","unshift","addHelper","JSXElement","callExpr","openingElement","arguments","concat","_prettyCall","module"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEAA,QAAQC,UAAR,GAAqB,IAArB;AACA;;AAEA,SAASC,uBAAT,CAAiCC,GAAjC,EAAsC;AAAE,MAAIA,OAAOA,IAAIF,UAAf,EAA2B;AAAE,WAAOE,GAAP;AAAa,GAA1C,MAAgD;AAAE,QAAIC,SAAS,EAAb,CAAiB,IAAID,OAAO,IAAX,EAAiB;AAAE,WAAK,IAAIE,GAAT,IAAgBF,GAAhB,EAAqB;AAAE,YAAIG,OAAOC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCN,GAArC,EAA0CE,GAA1C,CAAJ,EAAoDD,OAAOC,GAAP,IAAcF,IAAIE,GAAJ,CAAd;AAAyB;AAAE,KAACD,OAAO,SAAP,IAAoBD,GAApB,CAAyB,OAAOC,MAAP;AAAgB;AAAE;;AAEhR;;AAEA,SAASM,sBAAT,CAAgCP,GAAhC,EAAqC;AAAE,SAAOA,OAAOA,IAAIF,UAAX,GAAwBE,GAAxB,GAA8B,EAAE,WAAWA,GAAb,EAArC;AAA0D;;AAEjG,IAAIQ,sBAAsBC,QAAQ,sBAAR,CAA1B;;AAEA,IAAIC,uBAAuBH,uBAAuBC,mBAAvB,CAA3B;;AAEA,IAAIG,YAAYF,QAAQ,gBAAR,CAAhB;;AAEA,IAAIG,WAAWb,wBAAwBY,SAAxB,CAAf;;AAEA,IAAIE,WAAWJ,QAAQ,SAAR,CAAf;;AAEA,IAAIK,YAAYP,uBAAuBM,QAAvB,CAAhB;;AAEA,IAAIE,SAASN,QAAQ,SAAR,CAAb;;AAEA,IAAIO,QAAQjB,wBAAwBgB,MAAxB,CAAZ;;AAEA,IAAIE,SAASR,QAAQ,aAAR,CAAb;;AAEA,IAAIS,IAAInB,wBAAwBkB,MAAxB,CAAR;;AAEA;;;;AAIApB,QAAQ,SAAR,IAAqB,UAAUsB,IAAV,EAAgB;AACnC,MAAIC,UAAU,EAAd;;AAEA;;;;AAIAA,UAAQC,aAAR,GAAwB,UAAUC,IAAV,EAAgB;AACtC,QAAIA,KAAKC,IAAL,KAAc,MAAd,IAAwB,KAAKC,YAAL,EAA5B,EAAiD;AAC/C,aAAON,EAAEO,cAAF,EAAP;AACD,KAFD,MAEO,IAAIX,UAAU,SAAV,EAAqBY,OAArB,CAA6BC,mBAA7B,CAAiDL,KAAKC,IAAtD,CAAJ,EAAiE;AACtED,WAAKM,IAAL,GAAY,YAAZ;AACD,KAFM,MAEA;AACL,aAAOV,EAAEW,OAAF,CAAUP,KAAKC,IAAf,CAAP;AACD;AACF,GARD;;AAUA;;;;AAIAH,UAAQU,iBAAR,GAA4B,YAAY;AACtC,UAAM,KAAKC,aAAL,CAAmBnB,SAASoB,GAAT,CAAa,mBAAb,CAAnB,CAAN;AACD,GAFD;;AAIA;;;;AAIAZ,UAAQa,mBAAR,GAA8B;AAC5BC,UAAM,SAASA,IAAT,CAAcZ,IAAd,EAAoB;AACxBA,WAAKa,QAAL,GAAgBjB,EAAEkB,SAAF,CAAYd,KAAKe,QAAjB,CAAhB;AACAf,WAAKM,IAAL,GAAY,kBAAZ;AACD;AAJ2B,GAA9B;;AAOA;;;;AAIAR,UAAQkB,sBAAR,GAAiC,UAAUhB,IAAV,EAAgB;AAC/C,WAAOA,KAAKiB,UAAZ;AACD,GAFD;;AAIA;;;;AAIAnB,UAAQoB,YAAR,GAAuB;AACrBC,WAAO,SAASA,KAAT,CAAenB,IAAf,EAAqB;AAC1B,UAAIoB,QAAQpB,KAAKoB,KAAjB;AACA,UAAIxB,EAAEkB,SAAF,CAAYM,KAAZ,KAAsBhC,qBAAqB,SAArB,EAAgCgC,MAAMA,KAAtC,CAA1B,EAAwE;AACtEA,cAAMA,KAAN,GAAcA,MAAMA,KAAN,CAAYC,OAAZ,CAAoB,QAApB,EAA8B,GAA9B,CAAd;AACD;AACF,KANoB;;AAQrBT,UAAM,SAASA,IAAT,CAAcZ,IAAd,EAAoB;AACxB,UAAIoB,QAAQpB,KAAKoB,KAAL,IAAcxB,EAAEW,OAAF,CAAU,IAAV,CAA1B;AACA,aAAOX,EAAE0B,QAAF,CAAW1B,EAAEmB,QAAF,CAAW,MAAX,EAAmBf,KAAKC,IAAxB,EAA8BmB,KAA9B,CAAX,EAAiDpB,IAAjD,CAAP;AACD;AAXoB,GAAvB;;AAcA;;;;AAIAF,UAAQyB,iBAAR,GAA4B;AAC1BX,UAAM,SAASA,IAAT,CAAcZ,IAAd,EAAoBwB,MAApB,EAA4BC,KAA5B,EAAmCC,IAAnC,EAAyC;AAC7CF,aAAOG,QAAP,GAAkBjC,MAAMkC,aAAN,CAAoBJ,MAApB,CAAlB;;AAEA,UAAIK,UAAU7B,KAAKC,IAAnB;AACA,UAAI6B,OAAO,EAAX;;AAEA,UAAIC,OAAJ;AACA,UAAInC,EAAEoC,YAAF,CAAeH,OAAf,CAAJ,EAA6B;AAC3BE,kBAAUF,QAAQ5B,IAAlB;AACD,OAFD,MAEO,IAAIL,EAAEkB,SAAF,CAAYe,OAAZ,CAAJ,EAA0B;AAC/BE,kBAAUF,QAAQT,KAAlB;AACD;;AAED,UAAIa,QAAQ;AACVJ,iBAASA,OADC;AAEVE,iBAASA,OAFC;AAGVD,cAAMA;AAHI,OAAZ;;AAMA,UAAIjC,KAAKqC,GAAT,EAAc;AACZrC,aAAKqC,GAAL,CAASD,KAAT,EAAgBP,IAAhB;AACD;;AAED,UAAIS,UAAUnC,KAAKoC,UAAnB;AACA,UAAID,QAAQE,MAAZ,EAAoB;AAClBF,kBAAUG,iCAAiCH,OAAjC,EAA0CT,IAA1C,CAAV;AACD,OAFD,MAEO;AACLS,kBAAUvC,EAAEW,OAAF,CAAU,IAAV,CAAV;AACD;;AAEDuB,WAAKS,IAAL,CAAUJ,OAAV;;AAEA,UAAItC,KAAK2C,IAAT,EAAe;AACb3C,aAAK2C,IAAL,CAAUP,KAAV,EAAiBP,IAAjB;AACD;;AAED,aAAOO,MAAMjD,IAAN,IAAcY,EAAE6C,cAAF,CAAiBR,MAAMS,MAAvB,EAA+BZ,IAA/B,CAArB;AACD;AAtCyB,GAA5B;;AAyCA;;;;;;;AAOA,MAAIQ,mCAAmC,SAASA,gCAAT,CAA0CH,OAA1C,EAAmDT,IAAnD,EAAyD;AAC9F,QAAIiB,SAAS,EAAb;AACA,QAAIC,OAAO,EAAX;;AAEA,QAAIC,YAAY,SAASA,SAAT,GAAqB;AACnC,UAAI,CAACF,OAAON,MAAZ,EAAoB;;AAEpBO,WAAKL,IAAL,CAAU3C,EAAEkD,gBAAF,CAAmBH,MAAnB,CAAV;AACAA,eAAS,EAAT;AACD,KALD;;AAOA,WAAOR,QAAQE,MAAf,EAAuB;AACrB,UAAIU,OAAOZ,QAAQa,KAAR,EAAX;AACA,UAAIpD,EAAEqD,oBAAF,CAAuBF,IAAvB,CAAJ,EAAkC;AAChCF;AACAD,aAAKL,IAAL,CAAUQ,KAAKG,QAAf;AACD,OAHD,MAGO;AACLP,eAAOJ,IAAP,CAAYQ,IAAZ;AACD;AACF;;AAEDF;;AAEA,QAAID,KAAKP,MAAL,KAAgB,CAApB,EAAuB;AACrB;AACAF,gBAAUS,KAAK,CAAL,CAAV;AACD,KAHD,MAGO;AACL;AACA,UAAI,CAAChD,EAAEuD,kBAAF,CAAqBP,KAAK,CAAL,CAArB,CAAL,EAAoC;AAClCA,aAAKQ,OAAL,CAAaxD,EAAEkD,gBAAF,CAAmB,EAAnB,CAAb;AACD;;AAED;AACAX,gBAAUvC,EAAE6C,cAAF,CAAiBf,KAAK2B,SAAL,CAAe,SAAf,CAAjB,EAA4CT,IAA5C,CAAV;AACD;;AAED,WAAOT,OAAP;AACD,GArCD;;AAuCA;;;;AAIArC,UAAQwD,UAAR,GAAqB;AACnB1C,UAAM,SAASA,IAAT,CAAcZ,IAAd,EAAoB;AACxB,UAAIuD,WAAWvD,KAAKwD,cAApB;;AAEAD,eAASE,SAAT,GAAqBF,SAASE,SAAT,CAAmBC,MAAnB,CAA0B1D,KAAK2B,QAA/B,CAArB;;AAEA,UAAI4B,SAASE,SAAT,CAAmBpB,MAAnB,IAA6B,CAAjC,EAAoC;AAClCkB,iBAASI,WAAT,GAAuB,IAAvB;AACD;;AAED,aAAO/D,EAAE0B,QAAF,CAAWiC,QAAX,EAAqBvD,IAArB,CAAP;AACD;AAXkB,GAArB;;AAcA,SAAOF,OAAP;AACD,CA5KD;;AA8KA8D,OAAOrF,OAAP,GAAiBA,QAAQ,SAAR,CAAjB","file":"build-react-transformer.js","sourcesContent":["/* */ \n\"format cjs\";\n// Based upon the excellent jsx-transpiler by Ingvar Stepanyan (RReverser)\n// https://github.com/RReverser/jsx-transpiler\n\n// jsx\n\n\"use strict\";\n\nexports.__esModule = true;\n// istanbul ignore next\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj[\"default\"] = obj; return newObj; } }\n\n// istanbul ignore next\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar _lodashLangIsString = require(\"lodash/lang/isString\");\n\nvar _lodashLangIsString2 = _interopRequireDefault(_lodashLangIsString);\n\nvar _messages = require(\"../../messages\");\n\nvar messages = _interopRequireWildcard(_messages);\n\nvar _esutils = require(\"esutils\");\n\nvar _esutils2 = _interopRequireDefault(_esutils);\n\nvar _react = require(\"./react\");\n\nvar react = _interopRequireWildcard(_react);\n\nvar _types = require(\"../../types\");\n\nvar t = _interopRequireWildcard(_types);\n\n/**\n * [Please add a description.]\n */\n\nexports[\"default\"] = function (opts) {\n  var visitor = {};\n\n  /**\n   * [Please add a description.]\n   */\n\n  visitor.JSXIdentifier = function (node) {\n    if (node.name === \"this\" && this.isReferenced()) {\n      return t.thisExpression();\n    } else if (_esutils2[\"default\"].keyword.isIdentifierNameES6(node.name)) {\n      node.type = \"Identifier\";\n    } else {\n      return t.literal(node.name);\n    }\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  visitor.JSXNamespacedName = function () {\n    throw this.errorWithNode(messages.get(\"JSXNamespacedTags\"));\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  visitor.JSXMemberExpression = {\n    exit: function exit(node) {\n      node.computed = t.isLiteral(node.property);\n      node.type = \"MemberExpression\";\n    }\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  visitor.JSXExpressionContainer = function (node) {\n    return node.expression;\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  visitor.JSXAttribute = {\n    enter: function enter(node) {\n      var value = node.value;\n      if (t.isLiteral(value) && _lodashLangIsString2[\"default\"](value.value)) {\n        value.value = value.value.replace(/\\n\\s+/g, \" \");\n      }\n    },\n\n    exit: function exit(node) {\n      var value = node.value || t.literal(true);\n      return t.inherits(t.property(\"init\", node.name, value), node);\n    }\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  visitor.JSXOpeningElement = {\n    exit: function exit(node, parent, scope, file) {\n      parent.children = react.buildChildren(parent);\n\n      var tagExpr = node.name;\n      var args = [];\n\n      var tagName;\n      if (t.isIdentifier(tagExpr)) {\n        tagName = tagExpr.name;\n      } else if (t.isLiteral(tagExpr)) {\n        tagName = tagExpr.value;\n      }\n\n      var state = {\n        tagExpr: tagExpr,\n        tagName: tagName,\n        args: args\n      };\n\n      if (opts.pre) {\n        opts.pre(state, file);\n      }\n\n      var attribs = node.attributes;\n      if (attribs.length) {\n        attribs = buildJSXOpeningElementAttributes(attribs, file);\n      } else {\n        attribs = t.literal(null);\n      }\n\n      args.push(attribs);\n\n      if (opts.post) {\n        opts.post(state, file);\n      }\n\n      return state.call || t.callExpression(state.callee, args);\n    }\n  };\n\n  /**\n   * The logic for this is quite terse. It's because we need to\n   * support spread elements. We loop over all attributes,\n   * breaking on spreads, we then push a new object containg\n   * all prior attributes to an array for later processing.\n   */\n\n  var buildJSXOpeningElementAttributes = function buildJSXOpeningElementAttributes(attribs, file) {\n    var _props = [];\n    var objs = [];\n\n    var pushProps = function pushProps() {\n      if (!_props.length) return;\n\n      objs.push(t.objectExpression(_props));\n      _props = [];\n    };\n\n    while (attribs.length) {\n      var prop = attribs.shift();\n      if (t.isJSXSpreadAttribute(prop)) {\n        pushProps();\n        objs.push(prop.argument);\n      } else {\n        _props.push(prop);\n      }\n    }\n\n    pushProps();\n\n    if (objs.length === 1) {\n      // only one object\n      attribs = objs[0];\n    } else {\n      // looks like we have multiple objects\n      if (!t.isObjectExpression(objs[0])) {\n        objs.unshift(t.objectExpression([]));\n      }\n\n      // spread it\n      attribs = t.callExpression(file.addHelper(\"extends\"), objs);\n    }\n\n    return attribs;\n  };\n\n  /**\n   * [Please add a description.]\n   */\n\n  visitor.JSXElement = {\n    exit: function exit(node) {\n      var callExpr = node.openingElement;\n\n      callExpr.arguments = callExpr.arguments.concat(node.children);\n\n      if (callExpr.arguments.length >= 3) {\n        callExpr._prettyCall = true;\n      }\n\n      return t.inherits(callExpr, node);\n    }\n  };\n\n  return visitor;\n};\n\nmodule.exports = exports[\"default\"];"]}