{"version":3,"sources":["../../../../../../../jspm_packages/npm/babel-core@5.8.38/lib/transformation/helpers/define-map.js"],"names":["exports","__esModule","push","hasComputed","toComputedObjectFromClass","toClassObject","toDefineObject","_interopRequireWildcard","obj","newObj","key","Object","prototype","hasOwnProperty","call","_interopRequireDefault","_lodashCollectionEach","require","_lodashCollectionEach2","_lodashObjectHas","_lodashObjectHas2","_types","t","mutatorMap","node","kind","file","alias","toKeyAlias","map","_inherits","_key","computed","_computed","decorators","arrayExpression","elements","concat","dec","expression","reverse","value","initializer","errorWithNode","inheritsComments","objExpr","i","properties","length","prop","val","unshift","property","identifier","toComputedKey","objectExpression","mapNode","propNode","inheritNode","isMethodDefinition","isClassProperty","removeComments","writable","literal","configurable","enumerable"],"mappings":"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","file":"define-map.js","sourcesContent":["/* */ \n\"format cjs\";\n\"use strict\";\n\nexports.__esModule = true;\nexports.push = push;\nexports.hasComputed = hasComputed;\nexports.toComputedObjectFromClass = toComputedObjectFromClass;\nexports.toClassObject = toClassObject;\nexports.toDefineObject = toDefineObject;\n// istanbul ignore next\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj[\"default\"] = obj; return newObj; } }\n\n// istanbul ignore next\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar _lodashCollectionEach = require(\"lodash/collection/each\");\n\nvar _lodashCollectionEach2 = _interopRequireDefault(_lodashCollectionEach);\n\nvar _lodashObjectHas = require(\"lodash/object/has\");\n\nvar _lodashObjectHas2 = _interopRequireDefault(_lodashObjectHas);\n\nvar _types = require(\"../../types\");\n\nvar t = _interopRequireWildcard(_types);\n\n/**\n * [Please add a description.]\n */\n\nfunction push(mutatorMap, node, kind, file) {\n  var alias = t.toKeyAlias(node);\n\n  //\n\n  var map = {};\n  if (_lodashObjectHas2[\"default\"](mutatorMap, alias)) map = mutatorMap[alias];\n  mutatorMap[alias] = map;\n\n  //\n\n  map._inherits = map._inherits || [];\n  map._inherits.push(node);\n\n  map._key = node.key;\n\n  if (node.computed) {\n    map._computed = true;\n  }\n\n  if (node.decorators) {\n    var decorators = map.decorators = map.decorators || t.arrayExpression([]);\n    decorators.elements = decorators.elements.concat(node.decorators.map(function (dec) {\n      return dec.expression;\n    }).reverse());\n  }\n\n  if (map.value || map.initializer) {\n    throw file.errorWithNode(node, \"Key conflict with sibling node\");\n  }\n\n  if (node.value) {\n    if (node.kind === \"init\") kind = \"value\";\n    if (node.kind === \"get\") kind = \"get\";\n    if (node.kind === \"set\") kind = \"set\";\n\n    t.inheritsComments(node.value, node);\n    map[kind] = node.value;\n  }\n\n  return map;\n}\n\n/**\n * [Please add a description.]\n */\n\nfunction hasComputed(mutatorMap) {\n  for (var key in mutatorMap) {\n    if (mutatorMap[key]._computed) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * [Please add a description.]\n */\n\nfunction toComputedObjectFromClass(obj) {\n  var objExpr = t.arrayExpression([]);\n\n  for (var i = 0; i < obj.properties.length; i++) {\n    var prop = obj.properties[i];\n    var val = prop.value;\n    val.properties.unshift(t.property(\"init\", t.identifier(\"key\"), t.toComputedKey(prop)));\n    objExpr.elements.push(val);\n  }\n\n  return objExpr;\n}\n\n/**\n * [Please add a description.]\n */\n\nfunction toClassObject(mutatorMap) {\n  var objExpr = t.objectExpression([]);\n\n  _lodashCollectionEach2[\"default\"](mutatorMap, function (map) {\n    var mapNode = t.objectExpression([]);\n\n    var propNode = t.property(\"init\", map._key, mapNode, map._computed);\n\n    _lodashCollectionEach2[\"default\"](map, function (node, key) {\n      if (key[0] === \"_\") return;\n\n      var inheritNode = node;\n      if (t.isMethodDefinition(node) || t.isClassProperty(node)) node = node.value;\n\n      var prop = t.property(\"init\", t.identifier(key), node);\n      t.inheritsComments(prop, inheritNode);\n      t.removeComments(inheritNode);\n\n      mapNode.properties.push(prop);\n    });\n\n    objExpr.properties.push(propNode);\n  });\n\n  return objExpr;\n}\n\n/**\n * [Please add a description.]\n */\n\nfunction toDefineObject(mutatorMap) {\n  _lodashCollectionEach2[\"default\"](mutatorMap, function (map) {\n    if (map.value) map.writable = t.literal(true);\n    map.configurable = t.literal(true);\n    map.enumerable = t.literal(true);\n  });\n\n  return toClassObject(mutatorMap);\n}"]}