{"version":3,"sources":["../../../../../../../jspm_packages/npm/babel-core@5.8.38/lib/transformation/helpers/remap-async-to-generator.js"],"names":["exports","__esModule","_interopRequireWildcard","obj","newObj","key","Object","prototype","hasOwnProperty","call","_types","require","t","awaitVisitor","Function","skip","AwaitExpression","node","type","all","argument","callExpression","memberExpression","identifier","referenceVisitor","ReferencedIdentifier","parent","scope","state","name","id","bindingIdentifierEquals","ref","generateUidIdentifier","path","callId","async","generator","traverse","isFunctionDeclaration","declar","variableDeclaration","variableDeclarator","_blockHoist","push","assignmentExpression","module"],"mappings":"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","file":"remap-async-to-generator.js","sourcesContent":["/* */ \n\"format cjs\";\n\"use strict\";\n\nexports.__esModule = true;\n// istanbul ignore next\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj[\"default\"] = obj; return newObj; } }\n\nvar _types = require(\"../../types\");\n\nvar t = _interopRequireWildcard(_types);\n\n/**\n * [Please add a description.]\n */\n\nvar awaitVisitor = {\n\n  /**\n   * [Please add a description.]\n   */\n\n  Function: function Function() {\n    this.skip();\n  },\n\n  /**\n   * [Please add a description.]\n   */\n\n  AwaitExpression: function AwaitExpression(node) {\n    node.type = \"YieldExpression\";\n\n    if (node.all) {\n      // await* foo; -> yield Promise.all(foo);\n      node.all = false;\n      node.argument = t.callExpression(t.memberExpression(t.identifier(\"Promise\"), t.identifier(\"all\")), [node.argument]);\n    }\n  }\n};\n\n/**\n * [Please add a description.]\n */\n\nvar referenceVisitor = {\n\n  /**\n   * [Please add a description.]\n   */\n\n  ReferencedIdentifier: function ReferencedIdentifier(node, parent, scope, state) {\n    var name = state.id.name;\n    if (node.name === name && scope.bindingIdentifierEquals(name, state.id)) {\n      return state.ref = state.ref || scope.generateUidIdentifier(name);\n    }\n  }\n};\n\n/**\n * [Please add a description.]\n */\n\nexports[\"default\"] = function (path, callId) {\n  var node = path.node;\n\n  node.async = false;\n  node.generator = true;\n\n  path.traverse(awaitVisitor, state);\n\n  var call = t.callExpression(callId, [node]);\n\n  var id = node.id;\n  node.id = null;\n\n  if (t.isFunctionDeclaration(node)) {\n    var declar = t.variableDeclaration(\"let\", [t.variableDeclarator(id, call)]);\n    declar._blockHoist = true;\n    return declar;\n  } else {\n    if (id) {\n      var state = { id: id };\n      path.traverse(referenceVisitor, state);\n\n      if (state.ref) {\n        path.scope.parent.push({ id: state.ref });\n        return t.assignmentExpression(\"=\", state.ref, call);\n      }\n    }\n\n    return call;\n  }\n};\n\nmodule.exports = exports[\"default\"];"]}