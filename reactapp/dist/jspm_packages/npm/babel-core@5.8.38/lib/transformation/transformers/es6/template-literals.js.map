{"version":3,"sources":["../../../../../../../../jspm_packages/npm/babel-core@5.8.38/lib/transformation/transformers/es6/template-literals.js"],"names":["exports","__esModule","_interopRequireWildcard","obj","newObj","key","Object","prototype","hasOwnProperty","call","_types","require","t","metadata","group","isString","node","isLiteral","value","buildBinaryExpression","left","right","binaryExpression","_templateLiteralProduced","crawl","path","is","get","isBaseType","replaceWith","callExpression","identifier","visitor","TaggedTemplateExpression","parent","scope","file","quasi","args","strings","raw","_arr","quasis","_i","length","elem","push","literal","cooked","arrayExpression","templateName","isLoose","templateObject","addTemplateObject","concat","expressions","tag","TemplateLiteral","nodes","_arr2","_i2","expr","shift","filter","n","unshift","root","_arr3","_i3","_node"],"mappings":"AAAA;AACA;AACA;;AAEA;;AAEAA,QAAQC,UAAR,GAAqB,IAArB;AACA;;AAEA,SAASC,uBAAT,CAAiCC,GAAjC,EAAsC;AAAE,MAAIA,OAAOA,IAAIF,UAAf,EAA2B;AAAE,WAAOE,GAAP;AAAa,GAA1C,MAAgD;AAAE,QAAIC,SAAS,EAAb,CAAiB,IAAID,OAAO,IAAX,EAAiB;AAAE,WAAK,IAAIE,GAAT,IAAgBF,GAAhB,EAAqB;AAAE,YAAIG,OAAOC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCN,GAArC,EAA0CE,GAA1C,CAAJ,EAAoDD,OAAOC,GAAP,IAAcF,IAAIE,GAAJ,CAAd;AAAyB;AAAE,KAACD,OAAO,SAAP,IAAoBD,GAApB,CAAyB,OAAOC,MAAP;AAAgB;AAAE;;AAEhR,IAAIM,SAASC,QAAQ,gBAAR,CAAb;;AAEA,IAAIC,IAAIV,wBAAwBQ,MAAxB,CAAR;;AAEA,IAAIG,WAAW;AACbC,SAAO;AADM,CAAf;;AAIAd,QAAQa,QAAR,GAAmBA,QAAnB;AACA;;;;AAIA,SAASE,QAAT,CAAkBC,IAAlB,EAAwB;AACtB,SAAOJ,EAAEK,SAAF,CAAYD,IAAZ,KAAqB,OAAOA,KAAKE,KAAZ,KAAsB,QAAlD;AACD;;AAED;;;;AAIA,SAASC,qBAAT,CAA+BC,IAA/B,EAAqCC,KAArC,EAA4C;AAC1C,MAAIL,OAAOJ,EAAEU,gBAAF,CAAmB,GAAnB,EAAwBF,IAAxB,EAA8BC,KAA9B,CAAX;AACAL,OAAKO,wBAAL,GAAgC,IAAhC;AACA,SAAOP,IAAP;AACD;;AAED;;;;AAIA,SAASQ,KAAT,CAAeC,IAAf,EAAqB;AACnB,MAAIA,KAAKC,EAAL,CAAQ,0BAAR,CAAJ,EAAyC;AACvCF,UAAMC,KAAKE,GAAL,CAAS,MAAT,CAAN;AACAH,UAAMC,KAAKE,GAAL,CAAS,OAAT,CAAN;AACD,GAHD,MAGO,IAAI,CAACF,KAAKG,UAAL,CAAgB,QAAhB,CAAD,IAA8B,CAACH,KAAKG,UAAL,CAAgB,QAAhB,CAAnC,EAA8D;AACnEH,SAAKI,WAAL,CAAiBjB,EAAEkB,cAAF,CAAiBlB,EAAEmB,UAAF,CAAa,QAAb,CAAjB,EAAyC,CAACN,KAAKT,IAAN,CAAzC,CAAjB;AACD;AACF;;AAED;;;;AAIA,IAAIgB,UAAU;;AAEZ;;;;AAIAC,4BAA0B,SAASA,wBAAT,CAAkCjB,IAAlC,EAAwCkB,MAAxC,EAAgDC,KAAhD,EAAuDC,IAAvD,EAA6D;AACrF,QAAIC,QAAQrB,KAAKqB,KAAjB;AACA,QAAIC,OAAO,EAAX;;AAEA,QAAIC,UAAU,EAAd;AACA,QAAIC,MAAM,EAAV;;AAEA,QAAIC,OAAOJ,MAAMK,MAAjB;AACA,SAAK,IAAIC,KAAK,CAAd,EAAiBA,KAAKF,KAAKG,MAA3B,EAAmCD,IAAnC,EAAyC;AACvC,UAAIE,OAAOJ,KAAKE,EAAL,CAAX;AACAJ,cAAQO,IAAR,CAAalC,EAAEmC,OAAF,CAAUF,KAAK3B,KAAL,CAAW8B,MAArB,CAAb;AACAR,UAAIM,IAAJ,CAASlC,EAAEmC,OAAF,CAAUF,KAAK3B,KAAL,CAAWsB,GAArB,CAAT;AACD;;AAEDD,cAAU3B,EAAEqC,eAAF,CAAkBV,OAAlB,CAAV;AACAC,UAAM5B,EAAEqC,eAAF,CAAkBT,GAAlB,CAAN;;AAEA,QAAIU,eAAe,yBAAnB;AACA,QAAId,KAAKe,OAAL,CAAa,sBAAb,CAAJ,EAA0CD,gBAAgB,QAAhB;;AAE1C,QAAIE,iBAAiBhB,KAAKiB,iBAAL,CAAuBH,YAAvB,EAAqCX,OAArC,EAA8CC,GAA9C,CAArB;AACAF,SAAKQ,IAAL,CAAUM,cAAV;;AAEAd,WAAOA,KAAKgB,MAAL,CAAYjB,MAAMkB,WAAlB,CAAP;;AAEA,WAAO3C,EAAEkB,cAAF,CAAiBd,KAAKwC,GAAtB,EAA2BlB,IAA3B,CAAP;AACD,GAhCW;;AAkCZ;;;;AAIAmB,mBAAiB,SAASA,eAAT,CAAyBzC,IAAzB,EAA+BkB,MAA/B,EAAuCC,KAAvC,EAA8CC,IAA9C,EAAoD;AACnE,QAAIsB,QAAQ,EAAZ;;AAEA,QAAIC,QAAQ3C,KAAK0B,MAAjB;AACA,SAAK,IAAIkB,MAAM,CAAf,EAAkBA,MAAMD,MAAMf,MAA9B,EAAsCgB,KAAtC,EAA6C;AAC3C,UAAIf,OAAOc,MAAMC,GAAN,CAAX;AACAF,YAAMZ,IAAN,CAAWlC,EAAEmC,OAAF,CAAUF,KAAK3B,KAAL,CAAW8B,MAArB,CAAX;;AAEA,UAAIa,OAAO7C,KAAKuC,WAAL,CAAiBO,KAAjB,EAAX;AACA,UAAID,IAAJ,EAAUH,MAAMZ,IAAN,CAAWe,IAAX;AACX;;AAED;AACAH,YAAQA,MAAMK,MAAN,CAAa,UAAUC,CAAV,EAAa;AAChC,aAAO,CAACpD,EAAEK,SAAF,CAAY+C,CAAZ,EAAe,EAAE9C,OAAO,EAAT,EAAf,CAAR;AACD,KAFO,CAAR;;AAIA;AACA;AACA,QAAI,CAACH,SAAS2C,MAAM,CAAN,CAAT,CAAD,IAAuB,CAAC3C,SAAS2C,MAAM,CAAN,CAAT,CAA5B,EAAgD;AAC9CA,YAAMO,OAAN,CAAcrD,EAAEmC,OAAF,CAAU,EAAV,CAAd;AACD;;AAED,QAAIW,MAAMd,MAAN,GAAe,CAAnB,EAAsB;AACpB,UAAIsB,OAAO/C,sBAAsBuC,MAAMI,KAAN,EAAtB,EAAqCJ,MAAMI,KAAN,EAArC,CAAX;;AAEA,UAAIK,QAAQT,KAAZ;AACA,WAAK,IAAIU,MAAM,CAAf,EAAkBA,MAAMD,MAAMvB,MAA9B,EAAsCwB,KAAtC,EAA6C;AAC3C,YAAIC,QAAQF,MAAMC,GAAN,CAAZ;AACAF,eAAO/C,sBAAsB+C,IAAtB,EAA4BG,KAA5B,CAAP;AACD;;AAED,WAAKxC,WAAL,CAAiBqC,IAAjB;AACA;AACD,KAXD,MAWO;AACH,aAAOR,MAAM,CAAN,CAAP;AACD;AACJ;AA3EW,CAAd;AA6EA1D,QAAQgC,OAAR,GAAkBA,OAAlB","file":"template-literals.js","sourcesContent":["/* */ \n\"format cjs\";\n/* eslint no-unused-vars: 0 */\n\n\"use strict\";\n\nexports.__esModule = true;\n// istanbul ignore next\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj[\"default\"] = obj; return newObj; } }\n\nvar _types = require(\"../../../types\");\n\nvar t = _interopRequireWildcard(_types);\n\nvar metadata = {\n  group: \"builtin-pre\"\n};\n\nexports.metadata = metadata;\n/**\n * [Please add a description.]\n */\n\nfunction isString(node) {\n  return t.isLiteral(node) && typeof node.value === \"string\";\n}\n\n/**\n * [Please add a description.]\n */\n\nfunction buildBinaryExpression(left, right) {\n  var node = t.binaryExpression(\"+\", left, right);\n  node._templateLiteralProduced = true;\n  return node;\n}\n\n/**\n * [Please add a description.]\n */\n\nfunction crawl(path) {\n  if (path.is(\"_templateLiteralProduced\")) {\n    crawl(path.get(\"left\"));\n    crawl(path.get(\"right\"));\n  } else if (!path.isBaseType(\"string\") && !path.isBaseType(\"number\")) {\n    path.replaceWith(t.callExpression(t.identifier(\"String\"), [path.node]));\n  }\n}\n\n/**\n * [Please add a description.]\n */\n\nvar visitor = {\n\n  /**\n   * [Please add a description.]\n   */\n\n  TaggedTemplateExpression: function TaggedTemplateExpression(node, parent, scope, file) {\n    var quasi = node.quasi;\n    var args = [];\n\n    var strings = [];\n    var raw = [];\n\n    var _arr = quasi.quasis;\n    for (var _i = 0; _i < _arr.length; _i++) {\n      var elem = _arr[_i];\n      strings.push(t.literal(elem.value.cooked));\n      raw.push(t.literal(elem.value.raw));\n    }\n\n    strings = t.arrayExpression(strings);\n    raw = t.arrayExpression(raw);\n\n    var templateName = \"tagged-template-literal\";\n    if (file.isLoose(\"es6.templateLiterals\")) templateName += \"-loose\";\n\n    var templateObject = file.addTemplateObject(templateName, strings, raw);\n    args.push(templateObject);\n\n    args = args.concat(quasi.expressions);\n\n    return t.callExpression(node.tag, args);\n  },\n\n  /**\n   * [Please add a description.]\n   */\n\n  TemplateLiteral: function TemplateLiteral(node, parent, scope, file) {\n    var nodes = [];\n\n    var _arr2 = node.quasis;\n    for (var _i2 = 0; _i2 < _arr2.length; _i2++) {\n      var elem = _arr2[_i2];\n      nodes.push(t.literal(elem.value.cooked));\n\n      var expr = node.expressions.shift();\n      if (expr) nodes.push(expr);\n    }\n\n    // filter out empty string literals\n    nodes = nodes.filter(function (n) {\n      return !t.isLiteral(n, { value: \"\" });\n    });\n\n    // since `+` is left-to-right associative\n    // ensure the first node is a string if first/second isn't\n    if (!isString(nodes[0]) && !isString(nodes[1])) {\n      nodes.unshift(t.literal(\"\"));\n    }\n\n    if (nodes.length > 1) {\n      var root = buildBinaryExpression(nodes.shift(), nodes.shift());\n\n      var _arr3 = nodes;\n      for (var _i3 = 0; _i3 < _arr3.length; _i3++) {\n        var _node = _arr3[_i3];\n        root = buildBinaryExpression(root, _node);\n      }\n\n      this.replaceWith(root);\n      //crawl(this);\n    } else {\n        return nodes[0];\n      }\n  }\n};\nexports.visitor = visitor;"]}