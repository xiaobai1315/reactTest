{"version":3,"sources":["../../../../../../../../jspm_packages/npm/babel-core@5.8.38/lib/transformation/transformers/es6/properties.computed.js"],"names":["exports","__esModule","_interopRequireWildcard","obj","newObj","key","Object","prototype","hasOwnProperty","call","_types","require","t","loose","node","body","objId","_arr","properties","_i","length","prop","push","expressionStatement","assignmentExpression","memberExpression","computed","isLiteral","value","spec","initProps","file","_arr2","_i2","toComputedKey","isIdentifier","literal","name","bodyNode","callExpression","addHelper","first","expression","isCallExpression","arguments","objectExpression","visitor","ObjectExpression","exit","parent","scope","hasComputed","_arr3","_i3","isProperty","kind","stopInits","filter","generateUidIdentifierBasedOnNode","callback","isLoose","result","unshift","variableDeclaration","variableDeclarator"],"mappings":"AAAA;AACA;AACA;;AAEAA,QAAQC,UAAR,GAAqB,IAArB;AACA;;AAEA,SAASC,uBAAT,CAAiCC,GAAjC,EAAsC;AAAE,MAAIA,OAAOA,IAAIF,UAAf,EAA2B;AAAE,WAAOE,GAAP;AAAa,GAA1C,MAAgD;AAAE,QAAIC,SAAS,EAAb,CAAiB,IAAID,OAAO,IAAX,EAAiB;AAAE,WAAK,IAAIE,GAAT,IAAgBF,GAAhB,EAAqB;AAAE,YAAIG,OAAOC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCN,GAArC,EAA0CE,GAA1C,CAAJ,EAAoDD,OAAOC,GAAP,IAAcF,IAAIE,GAAJ,CAAd;AAAyB;AAAE,KAACD,OAAO,SAAP,IAAoBD,GAApB,CAAyB,OAAOC,MAAP;AAAgB;AAAE;;AAEhR,IAAIM,SAASC,QAAQ,gBAAR,CAAb;;AAEA,IAAIC,IAAIV,wBAAwBQ,MAAxB,CAAR;;AAEA;;;;AAIA,SAASG,KAAT,CAAeC,IAAf,EAAqBC,IAArB,EAA2BC,KAA3B,EAAkC;AAChC,MAAIC,OAAOH,KAAKI,UAAhB;;AAEA,OAAK,IAAIC,KAAK,CAAd,EAAiBA,KAAKF,KAAKG,MAA3B,EAAmCD,IAAnC,EAAyC;AACvC,QAAIE,OAAOJ,KAAKE,EAAL,CAAX;AACAJ,SAAKO,IAAL,CAAUV,EAAEW,mBAAF,CAAsBX,EAAEY,oBAAF,CAAuB,GAAvB,EAA4BZ,EAAEa,gBAAF,CAAmBT,KAAnB,EAA0BK,KAAKhB,GAA/B,EAAoCgB,KAAKK,QAAL,IAAiBd,EAAEe,SAAF,CAAYN,KAAKhB,GAAjB,CAArD,CAA5B,EAAyGgB,KAAKO,KAA9G,CAAtB,CAAV;AACD;AACF;;AAED;;;;AAIA,SAASC,IAAT,CAAcf,IAAd,EAAoBC,IAApB,EAA0BC,KAA1B,EAAiCc,SAAjC,EAA4CC,IAA5C,EAAkD;AAChD;AACA;;AAEA,MAAIC,QAAQlB,KAAKI,UAAjB;AACA,OAAK,IAAIe,MAAM,CAAf,EAAkBA,MAAMD,MAAMZ,MAA9B,EAAsCa,KAAtC,EAA6C;AAC3C,QAAIZ,OAAOW,MAAMC,GAAN,CAAX;AACA;AACA,QAAIrB,EAAEe,SAAF,CAAYf,EAAEsB,aAAF,CAAgBb,IAAhB,CAAZ,EAAmC,EAAEO,OAAO,WAAT,EAAnC,CAAJ,EAAgE;AAC9DE,gBAAUR,IAAV,CAAeD,IAAf;AACA;AACD;;AAED,QAAIhB,MAAMgB,KAAKhB,GAAf;AACA,QAAIO,EAAEuB,YAAF,CAAe9B,GAAf,KAAuB,CAACgB,KAAKK,QAAjC,EAA2C;AACzCrB,YAAMO,EAAEwB,OAAF,CAAU/B,IAAIgC,IAAd,CAAN;AACD;;AAED,QAAIC,WAAW1B,EAAE2B,cAAF,CAAiBR,KAAKS,SAAL,CAAe,iBAAf,CAAjB,EAAoD,CAACxB,KAAD,EAAQX,GAAR,EAAagB,KAAKO,KAAlB,CAApD,CAAf;;AAEAb,SAAKO,IAAL,CAAUV,EAAEW,mBAAF,CAAsBe,QAAtB,CAAV;AACD;;AAED;;AAEA,MAAIvB,KAAKK,MAAL,KAAgB,CAApB,EAAuB;AACrB,QAAIqB,QAAQ1B,KAAK,CAAL,EAAQ2B,UAApB;;AAEA,QAAI9B,EAAE+B,gBAAF,CAAmBF,KAAnB,CAAJ,EAA+B;AAC7BA,YAAMG,SAAN,CAAgB,CAAhB,IAAqBhC,EAAEiC,gBAAF,CAAmBf,SAAnB,CAArB;AACA,aAAOW,KAAP;AACD;AACF;AACF;;AAED;;;;AAIA,IAAIK,UAAU;;AAEZ;;;;AAIAC,oBAAkB;AAChBC,UAAM,SAASA,IAAT,CAAclC,IAAd,EAAoBmC,MAApB,EAA4BC,KAA5B,EAAmCnB,IAAnC,EAAyC;AAC7C,UAAIoB,cAAc,KAAlB;;AAEA,UAAIC,QAAQtC,KAAKI,UAAjB;AACA,WAAK,IAAImC,MAAM,CAAf,EAAkBA,MAAMD,MAAMhC,MAA9B,EAAsCiC,KAAtC,EAA6C;AAC3C,YAAIhC,OAAO+B,MAAMC,GAAN,CAAX;AACAF,sBAAcvC,EAAE0C,UAAF,CAAajC,IAAb,EAAmB,EAAEK,UAAU,IAAZ,EAAkB6B,MAAM,MAAxB,EAAnB,CAAd;AACA,YAAIJ,WAAJ,EAAiB;AAClB;;AAED,UAAI,CAACA,WAAL,EAAkB;;AAElB;AACA;;AAEA,UAAIrB,YAAY,EAAhB;AACA,UAAI0B,YAAY,KAAhB;;AAEA1C,WAAKI,UAAL,GAAkBJ,KAAKI,UAAL,CAAgBuC,MAAhB,CAAuB,UAAUpC,IAAV,EAAgB;AACvD,YAAIA,KAAKK,QAAT,EAAmB;AACjB8B,sBAAY,IAAZ;AACD;;AAED,YAAInC,KAAKkC,IAAL,KAAc,MAAd,IAAwB,CAACC,SAA7B,EAAwC;AACtC1B,oBAAUR,IAAV,CAAeD,IAAf;AACA,iBAAO,KAAP;AACD,SAHD,MAGO;AACL,iBAAO,IAAP;AACD;AACF,OAXiB,CAAlB;;AAaA;;AAEA,UAAIL,QAAQkC,MAAMQ,gCAAN,CAAuCT,MAAvC,CAAZ;;AAEA;;AAEA,UAAIlC,OAAO,EAAX;;AAEA;;AAEA,UAAI4C,WAAW9B,IAAf;AACA,UAAIE,KAAK6B,OAAL,CAAa,yBAAb,CAAJ,EAA6CD,WAAW9C,KAAX;;AAE7C,UAAIgD,SAASF,SAAS7C,IAAT,EAAeC,IAAf,EAAqBC,KAArB,EAA4Bc,SAA5B,EAAuCC,IAAvC,CAAb;AACA,UAAI8B,MAAJ,EAAY,OAAOA,MAAP;;AAEZ;;AAEA9C,WAAK+C,OAAL,CAAalD,EAAEmD,mBAAF,CAAsB,KAAtB,EAA6B,CAACnD,EAAEoD,kBAAF,CAAqBhD,KAArB,EAA4BJ,EAAEiC,gBAAF,CAAmBf,SAAnB,CAA5B,CAAD,CAA7B,CAAb;;AAEAf,WAAKO,IAAL,CAAUV,EAAEW,mBAAF,CAAsBP,KAAtB,CAAV;;AAEA,aAAOD,IAAP;AACD;AAvDe;AANN,CAAd;AAgEAf,QAAQ8C,OAAR,GAAkBA,OAAlB","file":"properties.computed.js","sourcesContent":["/* */ \n\"format cjs\";\n\"use strict\";\n\nexports.__esModule = true;\n// istanbul ignore next\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj[\"default\"] = obj; return newObj; } }\n\nvar _types = require(\"../../../types\");\n\nvar t = _interopRequireWildcard(_types);\n\n/**\n * [Please add a description.]\n */\n\nfunction loose(node, body, objId) {\n  var _arr = node.properties;\n\n  for (var _i = 0; _i < _arr.length; _i++) {\n    var prop = _arr[_i];\n    body.push(t.expressionStatement(t.assignmentExpression(\"=\", t.memberExpression(objId, prop.key, prop.computed || t.isLiteral(prop.key)), prop.value)));\n  }\n}\n\n/**\n * [Please add a description.]\n */\n\nfunction spec(node, body, objId, initProps, file) {\n  // add a simple assignment for all Symbol member expressions due to symbol polyfill limitations\n  // otherwise use Object.defineProperty\n\n  var _arr2 = node.properties;\n  for (var _i2 = 0; _i2 < _arr2.length; _i2++) {\n    var prop = _arr2[_i2];\n    // this wont work with Object.defineProperty\n    if (t.isLiteral(t.toComputedKey(prop), { value: \"__proto__\" })) {\n      initProps.push(prop);\n      continue;\n    }\n\n    var key = prop.key;\n    if (t.isIdentifier(key) && !prop.computed) {\n      key = t.literal(key.name);\n    }\n\n    var bodyNode = t.callExpression(file.addHelper(\"define-property\"), [objId, key, prop.value]);\n\n    body.push(t.expressionStatement(bodyNode));\n  }\n\n  // only one node and it's a Object.defineProperty that returns the object\n\n  if (body.length === 1) {\n    var first = body[0].expression;\n\n    if (t.isCallExpression(first)) {\n      first.arguments[0] = t.objectExpression(initProps);\n      return first;\n    }\n  }\n}\n\n/**\n * [Please add a description.]\n */\n\nvar visitor = {\n\n  /**\n   * [Please add a description.]\n   */\n\n  ObjectExpression: {\n    exit: function exit(node, parent, scope, file) {\n      var hasComputed = false;\n\n      var _arr3 = node.properties;\n      for (var _i3 = 0; _i3 < _arr3.length; _i3++) {\n        var prop = _arr3[_i3];\n        hasComputed = t.isProperty(prop, { computed: true, kind: \"init\" });\n        if (hasComputed) break;\n      }\n\n      if (!hasComputed) return;\n\n      // put all getters/setters into the first object expression as well as all initialisers up\n      // to the first computed property\n\n      var initProps = [];\n      var stopInits = false;\n\n      node.properties = node.properties.filter(function (prop) {\n        if (prop.computed) {\n          stopInits = true;\n        }\n\n        if (prop.kind !== \"init\" || !stopInits) {\n          initProps.push(prop);\n          return false;\n        } else {\n          return true;\n        }\n      });\n\n      //\n\n      var objId = scope.generateUidIdentifierBasedOnNode(parent);\n\n      //\n\n      var body = [];\n\n      //\n\n      var callback = spec;\n      if (file.isLoose(\"es6.properties.computed\")) callback = loose;\n\n      var result = callback(node, body, objId, initProps, file);\n      if (result) return result;\n\n      //\n\n      body.unshift(t.variableDeclaration(\"var\", [t.variableDeclarator(objId, t.objectExpression(initProps))]));\n\n      body.push(t.expressionStatement(objId));\n\n      return body;\n    }\n  }\n};\nexports.visitor = visitor;"]}