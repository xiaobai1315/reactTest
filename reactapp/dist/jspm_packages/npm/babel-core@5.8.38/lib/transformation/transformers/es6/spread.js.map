{"version":3,"sources":["../../../../../../../../jspm_packages/npm/babel-core@5.8.38/lib/transformation/transformers/es6/spread.js"],"names":["exports","__esModule","_interopRequireWildcard","obj","newObj","key","Object","prototype","hasOwnProperty","call","_types","require","t","getSpreadLiteral","spread","scope","hub","file","isLoose","isIdentifier","argument","name","toArray","hasSpread","nodes","i","length","isSpreadElement","build","props","_props","push","arrayExpression","prop","metadata","group","visitor","ArrayExpression","node","parent","elements","first","shift","isArrayExpression","unshift","callExpression","memberExpression","identifier","CallExpression","args","arguments","contextLiteral","callee","get","isMemberExpression","temp","maybeGenerateMemoised","object","assignmentExpression","appendToMemberExpression","NewExpression","context","literal","newExpression","addHelper"],"mappings":"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","file":"spread.js","sourcesContent":["/* */ \n\"format cjs\";\n\"use strict\";\n\nexports.__esModule = true;\n// istanbul ignore next\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj[\"default\"] = obj; return newObj; } }\n\nvar _types = require(\"../../../types\");\n\nvar t = _interopRequireWildcard(_types);\n\n/**\n * [Please add a description.]\n */\n\nfunction getSpreadLiteral(spread, scope) {\n  if (scope.hub.file.isLoose(\"es6.spread\") && !t.isIdentifier(spread.argument, { name: \"arguments\" })) {\n    return spread.argument;\n  } else {\n    return scope.toArray(spread.argument, true);\n  }\n}\n\n/**\n * [Please add a description.]\n */\n\nfunction hasSpread(nodes) {\n  for (var i = 0; i < nodes.length; i++) {\n    if (t.isSpreadElement(nodes[i])) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * [Please add a description.]\n */\n\nfunction build(props, scope) {\n  var nodes = [];\n\n  var _props = [];\n\n  var push = function push() {\n    if (!_props.length) return;\n    nodes.push(t.arrayExpression(_props));\n    _props = [];\n  };\n\n  for (var i = 0; i < props.length; i++) {\n    var prop = props[i];\n    if (t.isSpreadElement(prop)) {\n      push();\n      nodes.push(getSpreadLiteral(prop, scope));\n    } else {\n      _props.push(prop);\n    }\n  }\n\n  push();\n\n  return nodes;\n}\n\nvar metadata = {\n  group: \"builtin-advanced\"\n};\n\nexports.metadata = metadata;\n/**\n * [Please add a description.]\n */\n\nvar visitor = {\n\n  /**\n   * [Please add a description.]\n   */\n\n  ArrayExpression: function ArrayExpression(node, parent, scope) {\n    var elements = node.elements;\n    if (!hasSpread(elements)) return;\n\n    var nodes = build(elements, scope);\n    var first = nodes.shift();\n\n    if (!t.isArrayExpression(first)) {\n      nodes.unshift(first);\n      first = t.arrayExpression([]);\n    }\n\n    return t.callExpression(t.memberExpression(first, t.identifier(\"concat\")), nodes);\n  },\n\n  /**\n   * [Please add a description.]\n   */\n\n  CallExpression: function CallExpression(node, parent, scope) {\n    var args = node.arguments;\n    if (!hasSpread(args)) return;\n\n    var contextLiteral = t.identifier(\"undefined\");\n\n    node.arguments = [];\n\n    var nodes;\n    if (args.length === 1 && args[0].argument.name === \"arguments\") {\n      nodes = [args[0].argument];\n    } else {\n      nodes = build(args, scope);\n    }\n\n    var first = nodes.shift();\n    if (nodes.length) {\n      node.arguments.push(t.callExpression(t.memberExpression(first, t.identifier(\"concat\")), nodes));\n    } else {\n      node.arguments.push(first);\n    }\n\n    var callee = node.callee;\n\n    if (this.get(\"callee\").isMemberExpression()) {\n      var temp = scope.maybeGenerateMemoised(callee.object);\n      if (temp) {\n        callee.object = t.assignmentExpression(\"=\", temp, callee.object);\n        contextLiteral = temp;\n      } else {\n        contextLiteral = callee.object;\n      }\n      t.appendToMemberExpression(callee, t.identifier(\"apply\"));\n    } else {\n      node.callee = t.memberExpression(node.callee, t.identifier(\"apply\"));\n    }\n\n    node.arguments.unshift(contextLiteral);\n  },\n\n  /**\n   * [Please add a description.]\n   */\n\n  NewExpression: function NewExpression(node, parent, scope, file) {\n    var args = node.arguments;\n    if (!hasSpread(args)) return;\n\n    var nodes = build(args, scope);\n\n    var context = t.arrayExpression([t.literal(null)]);\n\n    args = t.callExpression(t.memberExpression(context, t.identifier(\"concat\")), nodes);\n\n    return t.newExpression(t.callExpression(t.memberExpression(file.addHelper(\"bind\"), t.identifier(\"apply\")), [node.callee, args]), []);\n  }\n};\nexports.visitor = visitor;"]}